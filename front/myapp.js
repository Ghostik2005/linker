!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/codebase/",e(e.s=27)}([function(t,e,n){"use strict";function o(t){var e=$$(t).config.totalPos,n=$$(t).config.posPpage;return(Math.ceil(e/n)-1)*n+1}function r(t,e){var n=t.app.config.user,o=t.app.config.r_url+"?getBar",r={user:n,id_spr:e},i=_(o,r,!0).response;i=JSON.parse(i),i.result&&($$("bars_dc").clearAll(),$$("bars_dc").parse(i.ret_val))}function i(t,e){var n=$$(t).config.startPos/$$(t).config.posPpage,o=$$(t).config.totalPos/$$(t).config.posPpage;o=Math.ceil(o);var r=$$(e).getChildViews()[2],i=$$(e).getChildViews()[6];n=0!==o?Math.ceil(n):0,r.define("label","Страница "+n+" из "+o),r.refresh(),i.define("label","Всего записей: "+$$(t).config.totalPos),i.refresh()}function a(t){var e=t.th,n=t.view,o=t.navBar,r=t.start,a=t.count,s=t.searchBar,c=t.method,u=$$(s).getValue(),l=e?e.app.config.user:"user",p=e?e.app.config.r_url+"?"+c:"http://saas.local/linker_logic?"+c,f={user:l,search:u,start:r,count:a};$$(n).config.old_stri!==u?($$(n).config.old_stri=u,$$(n).showProgress({type:"icon",icon:'<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>'}),_(p,f).then(function(t){t=t.json(),t.result?($$(n).clearAll(),$$(n).parse(t.ret_val),$$(n).config.startPos=t.start,$$(n).config.totalPos=t.total,i(n,o)):webix.message("error")})):console.log("yes")}function s(t){var e=$$("prcs_dc").getItem($$("prcs_dc").getCursor()),n={},o="https://www.google.ru/search?newwindow=1&q="+e.c_tovar,r="<a target='_balnk' href='"+o+"'><span>"+e.c_tovar+"</span></a>",i="<span style='color: #666666;'>Осталось свести в текущей сессии: </span><span style='color: red; font-weight: bold;'>"+$$("prcs_dc").count()+"</span>";n._name=r,n._count=i,n._vendor=e.c_zavod,n.p_name=e.c_tovar,$$("_names_bar").parse(n);var s=e.c_tovar.split(" "),c=0;s[c].length<4&&(c+=1);for(var u=s[c],l=c;l<s.length;l++)for(var p=s[l],f=0;f<p.length;f++){var h=(parseInt(p[f],10),!isNaN(p[f]));h&&(u+=" "+p[f])}u=u.replace('"'," "),u=u.replace("!"," "),u=u.replace("-"," "),u=u.replace("."," "),u=u.replace("*"," "),u=u.replace("+"," "),u=u.replace("/"," "),u=u.replace("\\"," "),$$("prcs_dc").config.old_stri=u,$$("_spr_search").setValue(u),i=$$("__dt").config.posPpage,a({th:t,view:"__dt",navBar:"__nav",start:1,count:i,searchBar:"_spr_search",method:"getSprSearch"})}function c(t,e){var n=t.app.config.user,o=t.app.config.r_url+"?getSpr",r={user:n,id_spr:e},i=_(o,r,!0).response;return i=JSON.parse(i),i.result?i.ret_val[0]:(webix.message("error"),"error")}function u(t){setTimeout(p,0,{app:t,type:"async",method:"getStranaAll",store:"strana_dc"}),setTimeout(p,5500,{app:t,type:"async",method:"getVendorAll",store:"vendor_dc"}),setTimeout(p,4500,{app:t,type:"async",method:"getDvAll",store:"dv_dc"}),setTimeout(p,0,{app:t,type:"async",method:"getNdsAll",store:"nds_dc"}),setTimeout(p,0,{app:t,type:"async",method:"getHranAll",store:"hran_dc"}),setTimeout(p,0,{app:t,type:"async",method:"getSezonAll",store:"sezon_dc"}),setTimeout(p,0,{app:t,type:"async",method:"getGroupAll",store:"group_dc"})}function l(t,e){var n=t.app.config.user;_(t.app.config.r_url+"?getPrcs",{user:n,id_vnd:+e}).then(function(t){t=t.json(),t.result?(t=t.ret_val,$$("prcs_dc").clearAll(),$$("prcs_dc").parse(t)):webix.message("error")})}function p(t){var e=t.app,n=t.method,o=t.store,r=e.config.user,i=e.config.r_url+"?"+n,a={user:r};if("sync"!==t.type)_(i,a).then(function(t){t=t.json(),t.result?(t=t.ret_val,$$(o).clearAll(),$$(o).parse(t)):webix.message("error")});else{var s=_(i,a,!0).response;s=JSON.parse(s),s.result?(s=s.ret_val,$$(o).clearAll(),$$(o).parse(s)):webix.message("error")}}function f(t,e){var n=e.app.config.user;_(e.app.config.r_url+"?getSupplUnlnk",{user:n}).then(function(e){if(e=e.json(),e.result){e=e.ret_val,$$(t).getList().clearAll(),$$(t).getList().parse(e);var n=$$(t).getList().getFirstId();$$(t).setValue(n)}else webix.message("error")}).then(function(){})}function h(t,e){var n=(t.sh_prc,y.getCursor()),o=y.data.order,r=void 0;o.forEach(function(t,e,o){t===n&&(r=e)}),r+=1,r===y.count()-1&&(r=0),y.remove(n),n=y.data.order[+r],y.setCursor(n),y.count()<1?f("_suppl",e):s()}function d(t,e){return e=e.toString().toLowerCase(),e=new RegExp(".*"+e.replace(/ /g,".*")+".*"),-1!=t.c_vnd.toString().toLowerCase().search(e)}function _(t,e,n){return!0===n?webix.ajax().sync().headers({"Content-type":"application/json"}).post(t,e):webix.ajax().headers({"Content-type":"application/json"}).post(t,e)}function b(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):NaN}function w(t,e,n){n=n||{};var o=n.expires;if("number"==typeof o&&o){var r=new Date;r.setTime(r.getTime()+1e3*o),o=n.expires=r}o&&o.toUTCString&&(n.expires=o.toUTCString()),e=encodeURIComponent(e);var i=t+"="+e;for(var a in n){i+="; "+a;var s=n[a];!0!==s&&(i+="="+s)}document.cookie=i}function g(t){w(t,"",{expires:-1,path:"/"})}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"barcodes",function(){return v}),n.d(e,"prcs",function(){return y}),n.d(e,"strana",function(){return m}),n.d(e,"vendor",function(){return $}),n.d(e,"dv",function(){return x}),n.d(e,"nds",function(){return j}),n.d(e,"sezon",function(){return O}),n.d(e,"hran",function(){return k}),n.d(e,"group",function(){return P}),e.last_page=o,e.get_bars=r,e.form_navi=i,e.get_data=a,e.parse_unlinked_item=s,e.get_spr=c,e.init_first=u,e.get_prcs=l,e.get_refs=p,e.get_suppl=f,e.delPrc=h,e.filter_1=d,e.request=_,e.getCookie=b,e.setCookie=w,e.deleteCookie=g;var v=new webix.DataCollection({id:"bars_dc",on:{onAfterLoad:function(){}}}),y=new webix.DataCollection({id:"prcs_dc",on:{onAfterLoad:function(){var t=this.data.order[0];this.setCursor(t),s()}}}),m=new webix.DataCollection({id:"strana_dc",on:{onAfterLoad:function(){}}}),$=new webix.DataCollection({id:"vendor_dc",on:{onAfterLoad:function(){}}}),x=new webix.DataCollection({id:"dv_dc",on:{onAfterLoad:function(){}}}),j=new webix.DataCollection({id:"nds_dc",on:{onAfterLoad:function(){}}}),O=new webix.DataCollection({id:"sezon_dc",on:{onAfterLoad:function(){}}}),k=new webix.DataCollection({id:"hran_dc",on:{onAfterLoad:function(){}}}),P=new webix.DataCollection({id:"group_dc",on:{onAfterLoad:function(){}}})},function(t,e,n){"use strict";var o=n(29);n.d(e,"a",function(){return o.a});var r=n(4);n.d(e,"b",function(){return r.a});var i=(n(22),n(35));n.d(e,"c",function(){return i.a});var a=(n(36),n(37),n(38)),s=n(39),c=n(42),u=n(43),l=n(44),p=n(45);a.a,s.a,c.a,l.a,p.a,u.a;window.Promise||(window.Promise=webix.promise)},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(6),c=n(7),u=n(0),l=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){function t(t,e){return e=e.toString().toLowerCase(),e=new RegExp(".*"+e.replace(/ /g,".*")+".*"),-1!=t.c_strana.toString().toLowerCase().search(e)}function e(t,e){return e=e.toString().toLowerCase(),e=new RegExp(".*"+e.replace(/ /g,".*")+".*"),-1!=t.c_zavod.toString().toLowerCase().search(e)}function n(t,e){return e=e.toString().toLowerCase(),e=new RegExp(".*"+e.replace(/ /g,".*")+".*"),-1!=t.act_ingr.toString().toLowerCase().search(e)}function o(t,e){return e=e.toString().toLowerCase(),e=new RegExp(".*"+e.replace(/ /g,".*")+".*"),-1!=t.group.toString().toLowerCase().search(e)}function r(t,e){return e=e.toString().toLowerCase(),e=new RegExp(".*"+e.replace(/ /g,".*")+".*"),-1!=t.sezon.toString().toLowerCase().search(e)}function i(t,e){return e=e.toString().toLowerCase(),e=new RegExp(".*"+e.replace(/ /g,".*")+".*"),-1!=t.usloviya.toString().toLowerCase().search(e)}function a(t){u.vendor.add(t,0)}function s(t){u.dv.add(t,0)}var c=this;return{view:"cWindow",modal:!0,on:{onHide:function(){u.barcodes.clearAll()}},body:{view:"form",localId:"new_form",margin:0,rules:{c_tovar:webix.rules.isNotEmpty,id_strana:webix.rules.isNotEmpty,id_zavod:webix.rules.isNotEmpty,id_dv:webix.rules.isNotEmpty},elements:[{rows:[{view:"label",label:"Название товара:   Название 1",name:"t_name"},{view:"text",label:"",value:"Название 1",name:"c_tovar",required:!0},{height:10,width:700},{cols:[{rows:[{view:"label",label:"Страна:",name:"s_name"},{view:"combo",width:400,value:"",name:"id_strana",required:!0,options:{filter:t,body:{template:"#c_strana#",yCount:15}},on:{onAfterRender:function(){this.getList().sync(u.strana)}}},{view:"label",label:"Производитель:",name:"v_name"},{cols:[{view:"combo",label:"",value:"",name:"id_zavod",required:!0,options:{filter:e,body:{template:"#c_zavod#",yCount:10}},on:{onAfterRender:function(){this.getList().sync(u.vendor)}}},{view:"button",type:"base",label:"+",width:30,disabled:!0,on:{onAfterRender:function(){"admin"===this.$scope.app.config.user&&this.enable()}},click:function(){var t={new_name:"c_zavod",url:"Zavod",callback:a};c.popstri.show("Добавление производителя",t)}}]},{view:"label",label:"Действующее вещество:",name:"dv_name"},{cols:[{view:"combo",label:"",value:"",name:"id_dv",required:!0,options:{filter:n,body:{autoheight:!1,view:"list",type:{height:"auto"},template:"<div class='comboList'>#act_ingr#</div>",height:250,yCount:0}},on:{onAfterRender:function(){this.getList().sync(u.dv)}}},{view:"button",type:"base",label:"+",width:30,disabled:!0,on:{onAfterRender:function(){"admin"===this.$scope.app.config.user&&this.enable()}},click:function(){var t={new_name:"act_ingr",url:"Dv",callback:s};c.popstri.show("Добавление д.вещества",t)}}]},{view:"label",label:"Штрих-код:"},{cols:[{view:"text",label:"",value:"",readonly:!0,name:"barcode",click:function(){var t=c.$$("new_form").getValues().id_spr;console.log(t),c.popbar.show("Редактирование ш.кодов",t)}}]},{view:"textarea",label:"Описание:",labelPosition:"top",value:"",height:120,name:"c_opisanie"}]},{width:5},{rows:[{view:"form",css:"borders",localId:"new_f_right",elements:[{view:"label",labelWidth:0},{view:"label",labelWidth:0},{view:"checkbox",labelRight:"Рецептурный",labelWidth:0,align:"left",name:"_prescr"},{view:"checkbox",labelRight:"Обязательный",labelWidth:0,align:"left",name:"_mandat"},{view:"combo",label:"Сезон:",labelPosition:"top",value:"",name:"id_sezon",css:"small",options:{filter:r,body:{template:"#sezon#",yCount:5}},on:{onAfterRender:function(){this.getList().sync(u.sezon)}}},{view:"combo",label:"Условия хранения:",labelPosition:"top",value:"",name:"id_usloviya",css:"small",options:{filter:i,body:{template:"#usloviya#",yCount:10}},on:{onAfterRender:function(){this.getList().sync(u.hran)}}},{view:"combo",label:"Группа:",labelPosition:"top",value:"",name:"id_group",css:"small",options:{filter:o,body:{autoheight:!1,view:"list",type:{height:"auto"},template:"<div class='comboList'>#group#</div>",height:200,yCount:0}},on:{onAfterRender:function(){this.getList().sync(u.group)}}},{view:"combo",label:"НДС:",labelPosition:"top",value:"",name:"id_nds",css:"small",options:{body:{template:"#nds#",yCount:10}},on:{onAfterRender:function(){this.getList().sync(u.nds)}}}]}]}]},{cols:[{view:"button",type:"base",label:"Отменить",width:120,height:32,click:function(){webix.message("Очищаем форму и закрываем"),c.hide()}},{},{view:"button",type:"base",label:"Test",width:120,height:32,click:function(){}},{view:"button",type:"base",label:"Сохранить",width:120,height:32,disabled:!0,on:{onAfterRender:function(){"admin"===this.$scope.app.config.user&&this.enable()}},click:function(){var t=c.$$("new_form").validate({hidden:!1,disabled:!1});if(console.log("validate: ",t),console.log(c.$$("new_form").getValues()),t){var e=c.$$("new_form").getValues(),n=c.$$("new_f_right").getValues(),o={};o.id_spr=e.id_spr?e.id_spr:-1,o.barcode=e.barcode,o.c_tovar=e.c_tovar,o.id_strana=e.id_strana,o.id_zavod=e.id_zavod,o.id_dv=e.id_dv,o.c_opisanie=e.c_opisanie,o.prescr=1===n._prescr,o.mandat=1===n._mandat,o.id_sezon=n.id_sezon,o.id_usloviya=n.id_usloviya,o.id_group=n.id_group,o.id_nds=n.id_nds,o.sh_prc=u.prcs.getItem(u.prcs.getCursor()).sh_prc,o.user=c.app.config.user,console.log("params",o);var r=c.app.config.r_url+"?setSpr",i=Object(u.request)(r,o,!0).response;i=JSON.parse(i),i.result?(i=i.ret_val,Object(u.delPrc)(o,c),console.log(i)):webix.message("error"),webix.message("Очищаем форму, отправляем данные на сервер и закрываем если все в порядке"),c.hide()}}}]}]}]}}},e.prototype.show=function(t,e){e&&(this.$$("new_form").parse(e),this.$$("new_f_right").parse(e)),this.getRoot().getHead().getChildViews()[0].setValue(t),this.getRoot().show()},e.prototype.hide=function(){this.getRoot().hide()},e.prototype.init=function(){this.popstri=this.ui(s.default),this.popbar=this.ui(c.default)},e}(a.b);e.default=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(0),c=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){var t,e=this;return{view:"cWindow",modal:!0,body:(t={view:"form",margin:0,_params:{},on:{onShow:function(t){$$("_yes").focus()}},elements:[{view:"label",label:"Подтвердите",height:44,align:"center"},{cols:[{view:"button",type:"base",label:"Нет",width:120,height:44,click:function(){e.getRoot().getBody().config._params={},e.hide()}},{},{view:"button",type:"base",label:"Да",width:120,height:44,localId:"_yes",click:function(){var t=e.getRoot().getBody().config._params,n=t.sh_prc,o=e.app.config.user,r=e.app.config.r_url+t.command,i=t.type,a=t.action?t.action:"no_action",c=t.id_spr?t.id_spr:NaN,u=t.callback,l=t.th,p={user:o,sh_prc:n,action:a,id_spr:c};e.hide(),"sync"===i||Object(s.request)(r,p).then(function(t){t=t.json(),t.result?u?u(t,l):console.log("error callback",t):webix.message("error")})}}]}]},t.on={onBeforeShow:function(){},onShow:function(){}},t)}},e.prototype.show=function(t,e){this.getRoot().getHead().getChildViews()[0].setValue("Подтвердите действие"),e&&(this.getRoot().getBody().config._params=e),this.getRoot().getBody().getChildViews()[0].setValue(t),this.getRoot().show()},e.prototype.hide=function(){this.getRoot().hide()},e.prototype.getValues=function(){return this.getRoot().getBody().getValues()},e}(a.b);e.default=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return c});var a=n(20),s=n(21),c=function(t){function e(n,i){o(this,e);var a=r(this,t.call(this));return a.app=n,a._name=i,a._children=[],a}return i(e,t),e.prototype.ui=function(t,e){if("function"==typeof t){var n=new t(this.app,e);return this._children.push(n),n.render(),n}var o=this.app.webix.ui(t);return this._children.push(o),o},e.prototype.show=function(t,e){var n=this;if("string"==typeof t){if("/"===t.substr(0,1))return this.app.show(t);if(0===t.indexOf("./")&&(t=t.substr(2)),0===t.indexOf("../")){var o=this.getParentView();return void(o?o.show("./"+t.substr(3)):this.app.show("/"+t.substr(3)))}var r=this.getSubView();if(!r)return this.app.show("/"+t);if(r.parent!==this)return r.parent.show(t,e);var i=Object(s.a)(t),a=null,c=this.app.getRouter().get();if(this._index){a=Object(s.a)(c).slice(0,this._index).concat(i);for(var u=0;u<a.length;u++)a[u].index=u+1;var l=Object(s.b)(a);this.app.canNavigate(l,this).then(function(t){l!==t?n.app.show(t):n._finishShow(r.subview,a,t)}).catch(function(){return!1})}else this._finishShow(r.subview,i,"")}},e.prototype.init=function(t,e){},e.prototype.ready=function(t,e){},e.prototype.config=function(){this.app.webix.message("View:Config is not implemented")},e.prototype.urlChange=function(t,e){},e.prototype.destroy=function(){},e.prototype.destructor=function(){this.destroy();for(var e=this._children,n=e.length-1;n>=0;n--)e[n]&&e[n].destructor&&e[n].destructor();this.app=this._children=null,this._root.destructor(),t.prototype.destructor.call(this)},e.prototype.use=function(t,e){t(this.app,this,e)},e.prototype._render=function(t){var e=this,n=this.config();return n.then?n.then(function(n){return e._render_final(n,t)}):this._render_final(n,t)},e.prototype._render_final=function(t,e){var n=this,o=void 0,r={ui:{}};this.app.copyConfig(t,r.ui,this._subs),this.app.callEvent("app:render",[this,e,r]),r.ui.$scope=this;try{this._root=this.app.webix.ui(r.ui,this._container),this._root.getParentView()&&(this._container=this._root),this._init(this._root,e),o=this._urlChange(e).then(function(){return n.ready(n._root,e)})}catch(t){o=Promise.reject(t)}return o.catch(function(t){return n._initError(n,t)})},e.prototype._init=function(t,e){return this.init(t,e)},e.prototype._urlChange=function(t){var e=this,n=[];for(var o in this._subs){var r=this._subs[o];if(r.url)if("string"==typeof r.url){var i=Object(s.a)(r.url);n.push(this._createSubView(r,i))}else{var a=r.view;"function"!=typeof r.url||a instanceof r.url||(a=new r.url(this.app,"")),a||(a=r.url),n.push(this._renderSubView(r,a,t))}else if("default"===o&&t&&t.length>1){var c=t.slice(1);n.push(this._createSubView(r,c))}}return Promise.all(n).then(function(){e.urlChange(e._root,t)})},e.prototype._initError=function(t,e){return this.app.error("app:error:initview",[e,t]),!0},e.prototype._createSubView=function(t,e){var n=this;return this.app.createFromURL(e,t.view).then(function(o){return n._renderSubView(t,o,e)})},e.prototype._renderSubView=function(t,e,n){var o=this.app.webix.$$(t.id);return e.render(o,n,this).then(function(n){return t.view&&t.view!==e&&t.view.destructor(),t.view=e,t.id=n.config.id,n})},e.prototype._finishShow=function(t,e,n){this._index?(this._urlChange(e.slice(this._index-1)),this.app.getRouter().set(n,{silent:!0}),this.app.callEvent("app:route",[e])):this._createSubView(t,e)},e}(a.a)},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(8),u=n(3),l=n(0),p=n(10),f=n(11),h=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){var t=this;return{rows:[{view:"toolbar",height:40,cols:[{view:"combo",name:"suppliers",id:"_suppl",readonly:!1,disabled:!1,width:300,options:{filter:l.filter_1,body:{css:"big-combo",template:"#c_vnd# - #count#",yCount:10}},on:{onChange:function(){var e=$$("_suppl").getList().getItem($$("_suppl").getValue()).id_vnd;Object(l.get_prcs)(t,e)}}},{},{view:"button",type:"base",label:"TEST",width:150,click:function(){webix.message({text:"test",type:"debug"})}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-refresh'></span><span style='line-height: 20px;'> Синхронизировать с сервером</span>",width:260,click:function(){Object(l.get_suppl)("_suppl",t)}},{view:"button",id:"_skip",type:"htmlbutton",label:"<span class='webix_icon fa-archive'></span><span style='line-height: 20px;'> Пропущенные (Ctrl+S)</span>",width:210,click:function(){t.popskipped.show("Пропущенные товары")}},{view:"button",id:"_links",type:"htmlbutton",label:"<span class='webix_icon fa-stumbleupon'></span><span style='line-height: 20px;'> Связки (Ctrl+L)</span>",width:150,click:function(){t.poplinks.show("Линки")}}]},{view:"toolbar",id:"_names_bar",css:"header",rows:[{cols:[{view:"label",label:"",name:"_name",fillspace:1},{width:100},{view:"label",label:"",css:"right",name:"_count"}]},{cols:[{view:"label",label:"",css:"header",name:"_vendor"},{},{view:"button",type:"htmlbutton",label:"<span class='butt'>Обновить сессию</span>",width:230,click:function(){var e=$$("_suppl").getList().getItem($$("_suppl").getValue()).id_vnd;Object(l.get_prcs)(t,e)}},{view:"button",type:"htmlbutton",label:"<span class='butt'>Посмотреть все из сессии</span>",width:230,click:function(){var e=$$("_suppl").getValue();e=$$("_suppl").getList().getItem(e).c_vnd,t.popunlink.show("Осталось связать в этой сессии по поставщику "+e)}}]}]},{view:"toolbar",height:40,cols:[{view:"text",label:"",value:"",labelWidth:1,placeholder:"Строка поиска",id:"_spr_search",keyPressTimeout:900,tooltip:"!слово - исключить из поиска, +слово - поиск в названии производителя",on:{onTimedKeyPress:function(t,e){var n=this.$scope,o=$$("__dt").config.posPpage;Object(l.get_data)({th:n,view:"__dt",navBar:"__nav",start:1,count:o,searchBar:"_spr_search",method:"getSprSearch"})}}},{view:"button",type:"htmlbutton",id:"_add",label:"Добавить (Ins)",width:140,hotkey:"insert",disabled:!0,on:{onAfterRender:function(){"admin"===this.$scope.app.config.user&&this.enable()}},click:function(){var e={},n=$$("_names_bar").getValues().p_name;e.t_name="Название товара:   "+n,e.c_tovar=n.toUpperCase(),t.popnew.show("Добавление в справочник",e)}},{view:"button",type:"htmlbutton",id:"_link",label:"<span class='webix_icon fa-link'></span><span style='line-height: 20px;'>  Связать (Ctrl+Home)</span>",width:200,hotkey:"home+ctrl",disabled:!0,click:function(){var e=l.prcs.getItem(l.prcs.getCursor()).sh_prc,n=$$("__dt").getSelectedItem().id_spr,o={};o.th=t,o.command="?setLnk",o.sh_prc=e,o.id_spr=n,o.type="async",o.callback=l.delPrc,t.popconfirm.show("Связать?",o)}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-left'></span><span style='line-height: 20px;'>Ctrl+</span><span class='webix_icon fa-arrow-down'></span>",width:90,hotkey:"down+ctrl",click:function(){var e=$$("prcs_dc").getCursor(),n=$$("prcs_dc").data.order,o=void 0;n.forEach(function(t,n,r){t===e&&(o=n)}),o-=1,o<0&&(o=$$("prcs_dc").count()-1),e=$$("prcs_dc").data.order[+o],$$("prcs_dc").setCursor(e),Object(l.parse_unlinked_item)(t)}},{view:"button",type:"htmlbutton",label:"Пропустить (Ctrl+M)",width:160,hotkey:"m+ctrl",disabled:!1,click:function(){var e=l.prcs.getItem(l.prcs.getCursor()).sh_prc,n={};n.th=t,n.command="?skipLnk",n.sh_prc=e,n.type="async",n.callback=l.delPrc,t.popconfirm.show("Пропустить?",n)}},{view:"button",type:"htmlbutton",label:"<span style='line-height: 20px;'>Ctrl+</span><span class='webix_icon fa-arrow-up'></span><span class='webix_icon fa-angle-right'></span>",width:90,hotkey:"up+ctrl",click:function(){var e=$$("prcs_dc").getCursor(),n=$$("prcs_dc").data.order,o=void 0;n.forEach(function(t,n,r){t===e&&(o=n)}),o+=1,o===$$("prcs_dc").count()-1&&(o=0),e=$$("prcs_dc").data.order[+o],$$("prcs_dc").setCursor(e),Object(l.parse_unlinked_item)(t)}}]}]}},e.prototype.init=function(){Object(l.get_suppl)("_suppl",this),this.popconfirm=this.ui(u.default),this.popnew=this.ui(s.default),this.poplinks=this.ui(c.default),this.popunlink=this.ui(p.default),this.popskipped=this.ui(f.default)},e}(a.b);e.default=h},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(0),c=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){function t(t){var e=this.config._params;console.log(this.$scope);var n=this.$scope.app.config.r_url+"?check"+e.url,o={};o[e.new_name]=t,o.user=this.$scope.app.config.user;var r=Object(s.request)(n,o,!0).response;r=JSON.parse(r);var i=!1;return r.result&&(i=!0),i}var e=this;return{view:"cWindow",modal:!0,on:{onHide:function(){e.$$("_n_f").clear(),e.$$("_n_f").clearValidation()}},body:{view:"form",localId:"_n_f",_params:{},margin:0,rules:{_new_str:t},elements:[{view:"text",label:"Название",value:"",width:320,name:"_new_str",required:!0,placeholder:"Введите новое значение",invalidMessage:"Такое название уже есть"},{cols:[{view:"button",type:"base",label:"Отменить",width:120,click:function(){e.hide()}},{},{view:"button",type:"base",label:"Сохранить",width:120,click:function(){if(e.$$("_n_f").validate({hidden:!1,disabled:!1})){var t=e.$$("_n_f").getValues(),n={},o=e.$$("_n_f").config._params;n[o.new_name]=t._new_str,n.user=e.app.config.user,n.id_spr=!!o.id_spr&&o.id_spr;var r=e.app.config.r_url+"?set"+o.url,i=Object(s.request)(r,n,!0).response;i=JSON.parse(i),i.result&&o.callback(i.ret_val),e.hide()}}}]}],on:{onBeforeShow:function(){},onShow:function(){}}}}},e.prototype.show=function(t,e){this.$$("_n_f").config._params=e,this.getRoot().getHead().getChildViews()[0].setValue(t),this.getRoot().show()},e.prototype.hide=function(){this.getRoot().hide()},e.prototype.getValues=function(){return this.getRoot().getBody().getValues()},e}(a.b);e.default=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(0),c=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){function t(t){var e=0;if(isNaN(t)||13!==t.length)return!1;for(var n=0;n<13;n++)e+=Number(t[n])*(n%2*2+1);return!(e%10)}var e=this;return{view:"cWindow",modal:!0,on:{onHide:function(){e.$$("_n_b").clear(),e.$$("_n_b").clearValidation()},onShow:function(){var t=e.$$("_n_b").config.id_spr;Object(s.get_bars)(e,t),e.$$("b_list").clearAll(),e.$$("b_list").parse(s.barcodes)}},body:{view:"form",localId:"_n_b",margin:0,id_spr:NaN,rules:{_new_bar:t},elements:[{rows:[{cols:[{view:"text",label:"Название",value:"",name:"_new_bar",placeholder:"Введите новое значение",localId:"_nbar",required:!0},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-plus'></span>",width:30,disabled:!1,on:{},click:function(){if(e.$$("_n_b").validate()){var t={barcode:e.$$("_nbar").getValue()};e.$$("b_list").add(t),e.$$("_nbar").setValue("")}}}]},{cols:[{view:"list",localId:"b_list",width:250,height:350,template:"#barcode#",select:!0,on:{onAfterSelect:function(){var t=this.getSelectedItem();this.$scope.$$("b_code").setValue(t.barcode)},onItemDblClick:function(t){this.remove(t)}}},{width:10},{rows:[{view:"barcode",type:"ean13",value:"",width:300,name:"_new_",localId:"b_code",hieght:200},{}]}]},{cols:[{view:"button",type:"base",label:"Отменить",width:120,click:function(){e.hide()}},{},{view:"button",type:"base",label:"Сохранить",width:120,click:function(){e.$$("_n_b").validate({hidden:!1,disabled:!1})&&(e.$$("_n_b").getValues(),e.hide())}}]}]}],on:{onBeforeShow:function(){},onShow:function(){}}}}},e.prototype.show=function(t,e){this.$$("_n_b").config.id_spr=e,this.getRoot().getHead().getChildViews()[0].setValue(t),this.getRoot().show()},e.prototype.hide=function(){this.getRoot().hide()},e}(a.b);e.default=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(0),u=n(3),l=n(9),p=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){function t(){var t=$$("__tt").getSelectedItem().id;$$("__tt").remove(t)}var e=this;return{view:"cWindow",width:.8*document.documentElement.clientWidth,height:.8*document.documentElement.clientHeight,modal:!0,on:{onShow:function(){Object(c.get_data)({th:e,view:"__tt",navBar:"__nav_l",start:1,count:20,searchBar:"_link_search",method:"getSprLnks"})},onHide:function(){$$("__tt").clearAll(),$$("_link_search").setValue(""),$$("_break").disable()}},body:{view:"form",margin:0,elements:[{view:"form",margin:0,elements:[{rows:[{cols:[{view:"text",label:"",placeholder:"Строка поиска",width:500,id:"_link_search",keyPressTimeout:900,tooltip:"!слово - исключить из поиска",on:{onTimedKeyPress:function(t,e){var n=this.$scope,o=$$("__tt").config.posPpage;Object(c.get_data)({th:n,view:"__tt",navBar:"__nav_l",start:1,count:o,searchBar:"_link_search",method:"getSprLnks"})}}},{view:"checkbox",labelRight:"Поиск по справочнику",labelWidth:0,value:1},{view:"button",type:"htmlbutton",id:"_break",disabled:!0,label:"<span class='webix_icon fa-unlink'></span><span style='line-height: 20px;'>  Разорвать (Ctrl+D)</span>",width:220,click:function(){$$("__tt").callEvent("onItemDblClick")}}]},{height:10},{view:"treetable",id:"__tt",startPos:1,posPpage:20,totalPos:1250,select:!0,borderless:!0,rowHeight:30,fixedRowHeight:!1,old_stri:" ",columns:[{id:"c_tovar",header:"Наименование",fillspace:!0,template:"<span>{common.treetable()} #c_tovar#</span>"},{id:"c_zavod",header:"Производитель",width:250},{id:"c_vnd",header:"Поставщик",width:200},{id:"id_tovar",header:"Код",width:100},{id:"dt",header:"Дата",width:160},{id:"owner",header:"Создал",width:120}],on:{onBeforeRender:function(){webix.extend(this,webix.ProgressBar),this.count||this.showProgress({type:"icon",icon:'<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>'})},onItemDblClick:function(e,n,o){var r=this.getSelectedItem().$level;if(1===r)"admin"===this.$scope.app.config.user?(e=e.row,e=Object(c.get_spr)(this.$scope,e),e.s_name="Страна: "+e.c_strana,e.t_name="Название товара: "+e.c_tovar,e.v_name="Производитель: "+e.c_zavod,e.dv_name="Действующее вещество: "+e.c_dv,this.$scope.popnew.show("Редактирование записи "+e.id_spr,e)):webix.message({type:"error",text:"Редактирование запрещено"});else if(2===r){var i=$$("__tt").getSelectedItem().id,a={};a.action="return",a.command="?delLnk",a.sh_prc=i,a.type="async",a.callback=t,this.$scope.popunlink.show("Причина разрыва связкии?",a)}},onKeyPress:function(t,e){13===t&&this.callEvent("onItemDblClick")},onBeforeSelect:function(t){},onAfterSelect:function(t){var e=this.getSelectedItem().$level;1===e?$$("_break").disable():2===e&&$$("_break").enable()}}},{view:"toolbar",id:"__nav_l",height:36,cols:[{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-double-left'></span>",width:50,click:function(){var t=$$("__tt").config.posPpage;Object(c.get_data)({th:e,view:"__tt",navBar:"__nav_l",start:1,count:t,searchBar:"_link_search",method:"getSprLnks"})}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-left'></span>",width:50,click:function(){var t=$$("__tt").config.startPos-$$("__tt").config.posPpage;t=t<0?1:t;var n=$$("__tt").config.posPpage;Object(c.get_data)({th:e,view:"__tt",navBar:"__nav_l",start:t,count:n,searchBar:"_link_search",method:"getSprLnks"})}},{view:"label",label:"Страница 1 из 1",width:200},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-right'></span>",width:50,click:function(){var t=$$("__tt").config.startPos+$$("__tt").config.posPpage;t=t>$$("__tt").config.totalPos?Object(c.last_page)("__tt"):t;var n=$$("__tt").config.posPpage;Object(c.get_data)({th:e,view:"__tt",navBar:"__nav_l",start:t,count:n,searchBar:"_link_search",method:"getSprLnks"})}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-double-right'></span>",width:50,click:function(){var t=Object(c.last_page)("__tt"),n=$$("__tt").config.posPpage;Object(c.get_data)({th:e,view:"__tt",navBar:"__nav_l",start:t,count:n,searchBar:"_link_search",method:"getSprLnks"})}},{},{view:"label",label:"Всего записей: 0",width:180}]}]}]}]}}},e.prototype.show=function(t){this.getRoot().getHead().getChildViews()[0].setValue(t),this.getRoot().show()},e.prototype.hide=function(){this.getRoot().hide()},e.prototype.init=function(){this.popnew=this.ui(s.default),this.popconfirm=this.ui(u.default),this.popunlink=this.ui(l.default)},e}(a.b);e.default=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(0),c=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){function t(t,e){var n=t.getRoot().getBody().config._params,o=n.sh_prc,r=t.app.config.user,i=t.app.config.r_url+n.command,a=n.type,c=e,u=n.callback,l={user:r,sh_prc:o,action:c};t.hide(),"sync"===a?console.log("sync"):Object(s.request)(i,l).then(function(t){t=t.json(),t.result?u?u(t):console.log("ecall",t):webix.message("error")})}var e=this;return{view:"cWindow",modal:!0,body:{view:"form",margin:0,_params:{},elements:[{view:"label",label:"Причина разрыва связкии",height:44,align:"center"},{cols:[{view:"button",type:"base",label:"Ошибка",width:120,height:44,click:function(){t(e,"return")}},{},{view:"button",type:"base",label:"Устарела",width:120,height:44,disabled:!0,on:{onAfterRender:function(){"admin"===this.$scope.app.config.user&&this.enable()}},click:function(){t(e,"delete")}}]}],on:{onBeforeShow:function(){},onShow:function(){}}}}},e.prototype.show=function(t,e){this.getRoot().getHead().getChildViews()[0].setValue("Подтвердите действие"),e&&(this.getRoot().getBody().config._params=e),this.getRoot().getBody().getChildViews()[0].setValue(t),this.getRoot().show()},e.prototype.hide=function(){this.getRoot().hide()},e.prototype.getValues=function(){return this.getRoot().getBody().getValues()},e}(a.b);e.default=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(0),c=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){var t=this,e={view:"datatable",id:"__unl",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,headermenu:!0,old_stri:"",columns:[{id:"id_tovar",width:100,sort:"int",header:[{text:"ID у поставщика"}]},{id:"c_tovar",fillspace:1,sort:"text",header:[{text:"Название"}]},{id:"c_zavod",sort:"text",width:300,header:[{text:"Производитель"}]}],on:{onItemDblClick:function(e){$$("prcs_dc").setCursor(e.row),Object(s.parse_unlinked_item)(t),t.getRoot().hide()},onKeyPress:function(t,e){13===t&&this.callEvent("onItemDblClick")},onBeforeSelect:function(){}}};return{view:"cWindow",width:.8*document.documentElement.clientWidth,height:.8*document.documentElement.clientHeight,modal:!0,on:{onShow:function(){$$("__unl").clearAll(),$$("__unl").parse($$("prcs_dc"))}},body:e}},e.prototype.show=function(t){this.getRoot().getHead().getChildViews()[0].setValue(t),this.getRoot().show()},e.prototype.hide=function(){this.getRoot().hide()},e}(a.b);e.default=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(0),c=n(3),u=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){function t(){var t=$$("__dt_s").getSelectedId();$$("__dt_s").remove(t)}var e=this,n={view:"toolbar",height:40,cols:[{view:"text",label:"",value:"",labelWidth:1,placeholder:"Строка поиска",id:"_search_skip",keyPressTimeout:900,tooltip:"!слово - исключить из поиска, +слово - поиск в названии производителя",on:{onTimedKeyPress:function(t,n){var o=$$("__dt_s").config.posPpage;Object(s.get_data)({th:e,view:"__dt_s",navBar:"__nav_s",start:1,count:o,searchBar:"_search_skip",method:"getPrcsSkip"})}}}]},o={view:"toolbar",id:"__nav_s",height:36,cols:[{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-double-left'></span>",width:50,click:function(){var t=$$("__dt_s").config.posPpage;Object(s.get_data)({th:e,view:"__dt_s",navBar:"__nav_s",start:1,count:t,searchBar:"_search_skip",method:"getPrcsSkip"})}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-left'></span>",width:50,click:function(){var t=$$("__dt_s").config.startPos-$$("__dt_s").config.posPpage;t=t<0?1:t;var n=$$("__dt_s").config.posPpage;Object(s.get_data)({th:e,view:"__dt_s",navBar:"__nav_s",start:t,count:n,searchBar:"_search_skip",method:"getPrcsSkip"})}},{view:"label",label:"Страница 1 из 1",width:200,id:"__pager_s"},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-right'></span>",width:50,click:function(){var t=$$("__dt_s").config.startPos+$$("__dt_s").config.posPpage;t=t>$$("__dt_s").config.totalPos?Object(s.last_page)("__dt_s"):t;var n=$$("__dt_s").config.posPpage;Object(s.get_data)({th:e,view:"__dt_s",navBar:"__nav_s",start:t,count:n,searchBar:"_search_skip",method:"getPrcsSkip"})}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-double-right'></span>",width:50,click:function(){var t=Object(s.last_page)("__dt_s"),n=$$("__dt_s").config.posPpage;Object(s.get_data)({th:e,view:"__dt_s",navBar:"__nav_s",start:t,count:n,searchBar:"_search_skip",method:"getPrcsSkip"})}},{},{view:"label",label:"Всего записей: 0",width:180,id:"__count_s"}]},r={view:"datatable",id:"__dt_s",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,headermenu:!0,startPos:1,posPpage:20,totalPos:1250,old_stri:" ",columns:[{id:"id_tovar",width:80,sort:"int",header:[{text:"ID товара"}]},{id:"c_tovar",fillspace:1,sort:"text",header:[{text:"Название"}]},{id:"c_zavod",sort:"text",width:300,header:[{text:"Производитель"}]}],on:{"data->onParse":function(t,e){this.clearAll()},onBeforeRender:function(){webix.extend(this,webix.ProgressBar),this.count||this.showProgress({type:"icon",icon:'<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>'})},onItemDblClick:function(e){if("admin"===this.$scope.app.config.user){var n=this.getSelectedItem().sh_prc,o={};o.command="?returnLnk",o.sh_prc=n,o.type="async",o.callback=t,this.$scope.popconfirm.show("Вернуть на сведение?",o)}},onKeyPress:function(t,e){13===t&&this.callEvent("onItemDblClick")},onAfterLoad:function(){this.hideProgress()},onBeforeSelect:function(){}}};return{view:"cWindow",width:.8*document.documentElement.clientWidth,height:.8*document.documentElement.clientHeight,modal:!0,on:{onShow:function(){Object(s.get_data)({th:e,view:"__dt_s",navBar:"__nav_s",start:1,count:$$("__dt_s").config.posPpage,searchBar:"_search_skip",method:"getPrcsSkip"})}},body:{view:"layout",rows:[n,r,o]}}},e.prototype.show=function(t){this.getRoot().getHead().getChildViews()[0].setValue(t),this.getRoot().show()},e.prototype.hide=function(){this.getRoot().hide()},e.prototype.init=function(){this.popconfirm=this.ui(c.default)},e}(a.b);e.default=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(2),c=n(0),u=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){function t(t){var e=t.id_mnn;return e=0!=+e?"<div> <span class='green'>есть</span></div>":"<div> <span class='red'>нет</span></div>"}var e=this,n={view:"toolbar",id:"__nav",height:36,cols:[{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-double-left'></span>",width:50,click:function(){var t=$$("__dt").config.posPpage;Object(c.get_data)({th:e,view:"__dt",navBar:"__nav",start:1,count:t,searchBar:"_spr_search",method:"getSprSearch"})}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-left'></span>",width:50,click:function(){var t=$$("__dt").config.startPos-$$("__dt").config.posPpage;t=t<0?1:t;var n=$$("__dt").config.posPpage;Object(c.get_data)({th:e,view:"__dt",navBar:"__nav",start:t,count:n,searchBar:"_spr_search",method:"getSprSearch"})}},{view:"label",label:"Страница 1 из 1",width:200,id:"__pager"},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-right'></span>",width:50,click:function(){var t=$$("__dt").config.startPos+$$("__dt").config.posPpage;t=t>$$("__dt").config.totalPos?Object(c.last_page)("__dt"):t;var n=$$("__dt").config.posPpage;Object(c.get_data)({th:e,view:"__dt",navBar:"__nav",start:t,count:n,searchBar:"_spr_search",method:"getSprSearch"})}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-double-right'></span>",width:50,click:function(){var t=Object(c.last_page)("__dt"),n=$$("__dt").config.posPpage;Object(c.get_data)({th:e,view:"__dt",navBar:"__nav",start:t,count:n,searchBar:"_spr_search",method:"getSprSearch"})}},{},{view:"label",label:"Всего записей: 0",width:180,id:"__count"}]};return{view:"layout",rows:[{view:"datatable",id:"__dt",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,headermenu:!0,startPos:1,posPpage:20,totalPos:1250,old_stri:"",columns:[{id:"id_mnn",width:75,template:t,header:[{text:"МНН"}]},{id:"id_spr",width:80,header:[{text:"IDSPR"}]},{id:"c_tovar",fillspace:1,sort:"text",header:[{text:"Название"}]},{id:"id_zavod",width:400,header:[{text:"Производитель"}]},{id:"id_strana",width:250,header:[{text:"Страна"}]}],on:{"data->onParse":function(t,e){this.clearAll(),$$("_link").disable()},onBeforeRender:function(){webix.extend(this,webix.ProgressBar),this.count||this.showProgress({type:"icon",icon:'<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>'})},onItemDblClick:function(t){t=this.getItem(t.row),t=t.id_spr,t=Object(c.get_spr)(this.$scope,t),t.s_name="Страна: "+t.c_strana,t.t_name="Название товара: "+t.c_tovar,t.v_name="Производитель: "+t.c_zavod,t.dv_name="Действующее вещество: "+t.c_dv,this.$scope.popnew.show("Редактирование записи "+t.id_spr,t)},onAfterLoad:function(){this.hideProgress()},onBeforeSelect:function(){$$("_link").enable()},onKeyPress:function(t,e){13===t&&this.callEvent("onItemDblClick")}}},n]}},e.prototype.init=function(){this.popnew=this.ui(s.default)},e}(a.b);e.default=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{view:"toolbar",css:"header",cols:[{view:"label",label:"Вы находитесь на сервере:   saas",css:"ms-logo-text",height:36},{},{view:"button",type:"htmlbutton",width:32,label:"<span class='webix_icon fa-info', style='color: #666666;'></span>"}]}},e}(a.b);e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(15),c=n(16),u=n(17),l=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{view:"layout",rows:[{height:10},{margin:10,cols:[{$subview:u.default,name:"gr_right"},{$subview:s.default,name:"gr_center"},{$subview:c.default,name:"gr_left"}]}]}},e}(a.b);e.default=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{rows:[{view:"toolbar",cols:[{view:"label",label:"Содержание группы"}]},{view:"toolbar",cols:[{view:"label",label:"Группа не выбрана"},{},{view:"button",type:"form",label:"Новая",width:100}]},{view:"datatable",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,footer:!0,headermenu:!0,columns:[{id:"idspr",sort:"int",width:75,header:[{text:"IDSPR"}]},{id:"mnn",fillspace:1,sort:"text",header:[{text:"Товар"}]},{id:"idspr",width:120,sort:"text",header:[{text:"Производитель"}]},{id:"name",width:100,sort:"text",header:[{text:"Страна"}]}]}]}},e}(a.b);e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{rows:[{view:"toolbar",cols:[{view:"label",label:"Группы"}]},{view:"toolbar",cols:[{view:"text",value:""}]},{view:"datatable",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,footer:!0,headermenu:!0,columns:[{id:"idspr",sort:"int",width:75,header:[{text:"IDSPR"}]},{id:"mnn",fillspace:1,sort:"text",header:[{text:"Товар"}]},{id:"name",width:120,sort:"text",header:[{text:"Страна"}]}]}]}},e}(a.b);e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{rows:[{view:"toolbar",cols:[{view:"label",label:"Не сведенные"}]},{view:"toolbar",cols:[{view:"text",value:""}]},{view:"datatable",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,footer:!0,headermenu:!0,columns:[{id:"idspr",sort:"int",width:75,header:[{text:"IDSPR"}]},{id:"mnn",fillspace:1,sort:"text",header:[{text:"Товар"}]},{id:"idspr",width:120,sort:"text",header:[{text:"Производитель"}]},{id:"name",width:100,sort:"text",header:[{text:"Страна"}]}]}]}},e}(a.b);e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{rows:[{view:"toolbar",height:40,cols:[{view:"label",label:"Общий поиск"},{},{view:"button",type:"form",label:"Проверка групп",width:180,click:function(){}},{view:"button",type:"form",label:"Добавить эталон",width:220},{view:"button",type:"form",label:"Линки",width:140},{view:"button",type:"form",label:"Штрихкоды",width:180}]}]}},e.prototype.init=function(){},e}(a.b);e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){var t=this;return{view:"toolbar",css:"header",cols:[{view:"label",label:"<a href='http://ms71.org'><span class='ms-logo', style='background-image: url(addons/img/ms_logo.jpg);'></span></a>",width:44,align:"center",height:36},{view:"label",label:"Манускрипт солюшн: linker",css:"ms-logo-text",height:36,width:250},{view:"label",label:"Текущий пользователь:  "+this.app.config.user,css:"ms-logo-text",width:300,height:36},{},{view:"button",id:"_adm",css:"butt",type:"htmlbutton",label:"<span class = 'butt'>Админка</span>",width:120,click:function(){webix.message({text:"Упс. Пока не доступно",type:"debug"})}},{view:"button",id:"_merge",css:"butt",type:"htmlbutton",disabled:!0,label:"<span class='butt'>Merger</span>",width:80,click:function(){$$("_merge").disable(),$$("_group").enable(),t.app.show("/start/body")}},{view:"button",id:"_group",css:"butt",type:"htmlbutton",label:"<span class='butt'>Grouper</span>",width:80,click:function(){$$("_merge").enable(),$$("_group").disable(),t.app.show("/start/grouper")}},{view:"button",id:"_exit",css:"butt",type:"htmlbutton",label:"<span class='butt'>Выйти</span>",width:80,click:function(){webix.message("exit")}}]}},e}(a.b);e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=t.getChildViews(),o=n,i=Array.isArray(o),a=0,o=i?o:o[Symbol.iterator]();;){var s;if(i){if(a>=o.length)break;s=o[a++]}else{if(a=o.next(),a.done)break;s=a.value}var c=s,u=c;if(u.config.localId===e)return u;if(u=r(u,e))return u}return null}n.d(e,"a",function(){return i});var i=function(){function t(){o(this,t),this._id=webix.uid(),this._events=[],this._subs={}}return t.prototype.getRoot=function(){return this._root},t.prototype.destructor=function(){for(var t=this._events,e=t.length-1;e>=0;e--)t[e].obj.detachEvent(t[e].id);for(var n in this._subs){var o=this._subs[n].view;o&&o.destructor()}this._events=this._container=this._app=this._parent=null},t.prototype.render=function(t,e,n){var o=this;this._parent=n,e&&(this._index=e[0].index),t=t||document.body;var r="string"==typeof t?webix.toNode(t):t;return this._container!==r?(this._container=r,this._render(e).then(function(){return o.getRoot()})):this._urlChange(e).then(function(){return o.getRoot()})},t.prototype.getIndex=function(){return this._index},t.prototype.getId=function(){return this._id},t.prototype.getParentView=function(){return this._parent},t.prototype.$$=function(t){var e=webix.$$(t);return e||(e=r(this.getRoot(),t)),e},t.prototype.on=function(t,e,n){var o=t.attachEvent(e,n);return this._events.push({obj:t,id:o}),o},t.prototype.contains=function(t){for(var e in this._subs){var n=this._subs[e].view;if(n===t||n.contains(t))return!0}return!1},t.prototype.getSubView=function(t){var e=this._subs[t||"default"];return e?{subview:e,parent:this}:this._parent?this._parent.getSubView(t):null},t.prototype.getName=function(){return this._name},t}()},function(t,e,n){"use strict";function o(t){"/"===t[0]&&(t=t.substr(1));for(var e=t.split("/"),n=[],o=0;o<e.length;o++){var r=e[o],i={},a=r.indexOf(":");if(-1===a&&(a=r.indexOf("?")),-1!==a)for(var s=r.substr(a+1).split(/[\:\?\&]/g),c=s,u=Array.isArray(c),l=0,c=u?c:c[Symbol.iterator]();;){var p;if(u){if(l>=c.length)break;p=c[l++]}else{if(l=c.next(),l.done)break;p=l.value}var f=p,h=f.split("=");i[h[0]]=h[1]}n[o]={page:a>-1?r.substr(0,a):r,params:i,index:o+1}}return n}function r(t){for(var e=[],n=t,o=Array.isArray(n),r=0,n=o?n:n[Symbol.iterator]();;){var a;if(o){if(r>=n.length)break;a=n[r++]}else{if(r=n.next(),r.done)break;a=r.value}var s=a;e.push("/"+s.page);var c=i(s.params);c&&e.push(":"+c)}return e.join("")}function i(t){var e=[];for(var n in t)e.length&&e.push(":"),e.push(n+"="+t[n]);return e.join("")}e.a=o,e.b=r},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return a});var r=n(32),i=n.n(r),a=function(){function t(e,n){var r=this;o(this,t),this.config=n||{},this._prefix=this.config.routerPrefix,void 0===this._prefix&&(this._prefix="!");var a=function(t){};i()(this._prefix+"*",function(t){return r._lastUrl="",a(r.get())}),a=e}return t.prototype.set=function(t,e){if(this.config.routes){var n=t.split("?",2);for(var o in this.config.routes)if(this.config.routes[o]===n[0]){t=o+(n.length>1?"?"+n[1]:"");break}}this._lastUrl=t,i.a.navigate(this._prefix+t,e)},t.prototype.get=function(){var t=this._lastUrl||(window.location.hash||"").replace("#"+this._prefix,"");if(this.config.routes){var e=t.split("?",2),n=this.config.routes[e[0]];n&&(t=n+(e.length>1?"?"+e[1]:""))}return t},t}()},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(5),c=n(12),u=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{view:"layout",css:"margin-zero",rows:[{$subview:s.default,name:"top_menu"},{$subview:c.default,name:"spr_dt"}]}},e.prototype.ready=function(t){},e}(a.b);e.default=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=(n(5),n(18)),c=n(14),u=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{view:"layout",css:"margin-zero",rows:[{$subview:s.default,name:"gr_top"},{$subview:c.default,name:"gr_spr"}]}},e.prototype.ready=function(t){},e}(a.b);e.default=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(19),c=n(13),u=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{type:"line",id:"main_ui",rows:[{$subview:s.default},{$subview:!0},{$subview:c.default}]}},e.prototype.init=function(){},e}(a.b);e.default=u},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(28),r=(n.n(o),n(1)),i=n(0);webix.ready(function(){webix.protoUI({name:"cWindow",defaults:{modal:!1,move:!0,position:"center"},$init:function(t){webix.extend(t,{head:{view:"toolbar",cols:[{view:"label",label:"Название окна"},{view:"button",type:"icon",icon:"times",css:"times",height:26,width:26,click:function(){this.getTopParentView().hide()}}]}})}},webix.ui.window);var t=new r.a({id:"mainApp",name:"linker",version:"2017.334.1230",start:"/start/body",user:"admin",r_url:"http://saas.local/linker_logic",router:r.c,x_api:"api-key",debug:!0});t.render(),Object(i.init_first)(t),webix.attachEvent("onBeforeAjax",function(e,n,o,r,i,a,s){i["x-api-key"]=t.config.x_api}),t.attachEvent("app:error:resolve",function(t,e){window.console.error(e)})})},function(t,e){},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return d});var a=n(20),s=n(4),c=n(30),u=n(31),l=n(22),p=n(21),f=n(33),h=(n.n(f),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}),d=function(t){function e(n){o(this,e);var i=r(this,t.call(this));return i.webix=n.webix||webix,i.config=i.webix.extend({name:"App",version:"1.0",start:"/home"},n,!0),i._name=i.config.name,i._services={},webix.extend(i,webix.EventSystem),webix.attachEvent("onClick",function(t){return i.clickHandler(t)}),i}return i(e,t),e.prototype.getService=function(t){var e=this._services[t];return"function"==typeof e&&(e=this._services[t]=e(this)),e},e.prototype.setService=function(t,e){this._services[t]=e},e.prototype.copyConfig=function(t,n,o){if(t.$ui?t={$subview:new c.a(this,"",t)}:t instanceof e&&(t={$subview:t}),t.$subview)return this.addSubView(t,n,o);n=n||(t instanceof Array?[]:{});for(var r in t){var i=t[r];"function"==typeof i&&i.prototype&&i.prototype.config&&(i={$subview:i}),!i||"object"!==(void 0===i?"undefined":h(i))||i instanceof webix.DataCollection?n[r]=i:i instanceof Date?n[r]=new Date(i):n[r]=this.copyConfig(i,i instanceof Array?[]:{},o)}return n},e.prototype.getRouter=function(){return this.$router},e.prototype.clickHandler=function(t){if(t){var e=t.target||t.srcElement;if(e&&e.getAttribute){var n=e.getAttribute("trigger");n&&this.trigger(n);var o=e.getAttribute("route");o&&this.show(o)}}},e.prototype.refresh=function(){var t=this._container;this._view.destructor(),this._view=this._container=null,this.render(t,Object(p.a)(this.getRouter().get()),this._parent)},e.prototype.loadView=function(t){var e=this,o=this.config.views,r=null;try{if(o&&"string"==typeof(r="function"==typeof o?o(t):o[t])&&(t=r,r=null),!r){t=t.replace(/\./g,"/");var i=n(34)("./"+t);i.__esModule&&(i=i.default),r=i}}catch(e){r=this._loadError(t,e)}return r.then||(r=Promise.resolve(r)),r=r.catch(function(n){return e._loadError(t,n)})},e.prototype.createFromURL=function(t,n){var o=this,r=t[0],i=r.page;return n&&n.getName()===i?Promise.resolve(n):this.loadView(r.page).then(function(t){if("function"==typeof t){if(t.prototype&&t.prototype.show)return new t(o,i);t=t()}return t instanceof e||t instanceof s.a?t:t.$ui?new c.a(o,i,t):new u.a(o,i,t)})},e.prototype.show=function(t){var e=this;this.$router.get()!==t&&this.canNavigate(t).then(function(t){e.$router.set(t,{silent:!0}),e._render(t)}).catch(function(){return!1})},e.prototype.canNavigate=function(t,e){var n={url:Object(p.a)(t),redirect:t,confirm:Promise.resolve(!0)};return this.callEvent("app:guard",[t,e||this._view,n])?n.confirm.then(function(){return n.redirect}):Promise.reject("")},e.prototype.destructor=function(){this._view.destructor()},e.prototype.trigger=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];this.apply(t,n)},e.prototype.apply=function(t,e){this.callEvent(t,e)},e.prototype.action=function(t){return this.webix.bind(function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];this.apply(t,n)},this)},e.prototype.on=function(t,e){this.attachEvent(t,e)},e.prototype.use=function(t,e){t(this,null,e)},e.prototype.error=function(t,e){this.callEvent(t,e),this.callEvent("app:error",e),this.config.debug&&e[0]&&console.error(e[0])},e.prototype._render=function(t){var e=this;!this.$router&&(t=this._first_start(t));var n="string"==typeof t?t:Object(p.b)(t);return this.canNavigate(n).then(function(t){return e.$router.set(t,{silent:!0}),e._render_stage(t)})},e.prototype._render_stage=function(t){var e=this,n="string"==typeof t?Object(p.a)(t):t;return webix.ui.freeze(function(){return e.createFromURL(n,e._view).then(function(t){var o=e._view;return e._view=t,t.render(e._container,n,e._parent).then(function(r){return o&&o!==e._view&&o.destructor(),e._view.getRoot().getParentView()&&(e._container=r),e._root=r,e.callEvent("app:route",[n]),t})}).catch(function(t){e.error("app:error:render",[t])})})},e.prototype._urlChange=function(t){return alert("Not implemented"),Promise.resolve(!0)},e.prototype._first_start=function(t){var e=this,n=function(t){return setTimeout(function(){e._render(t)},1)};if(this.$router=new(this.config.router||l.a)(n,this.config),this._container===document.body&&!1!==this.config.animation){var o=this._container;webix.html.addCss(o,"webixappstart"),setTimeout(function(){webix.html.removeCss(o,"webixappstart"),webix.html.addCss(o,"webixapp")},10)}return t&&1!==t.length||(t=this.$router.get()||this.config.start,this.$router.set(t,{silent:!0})),t},e.prototype._loadError=function(t,e){return this.error("app:error:resolve",[e,t]),{template:" "}},e.prototype.addSubView=function(t,e,n){var o=!0!==t.$subview?t.$subview:null,r=t.name||(o?this.webix.uid():"default");e.id=t.id||"s"+this.webix.uid();var i=n[r]={id:e.id,url:o};return i.url instanceof s.a&&(i.view=i.url),e},e}(a.a)},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return s});var a=n(4),s=function(t){function e(n,i,a){o(this,e);var s=r(this,t.call(this,n,i));return s._ui=a,s._windows=[],s}return i(e,t),e.prototype.getRoot=function(){if(this.app.config.jet1xMode){var t=this.getParentView();if(t)return t.getRoot()}return this._root},e.prototype.config=function(){return this._ui.$ui||this._ui},e.prototype.destructor=function(){var e=this._ui.$ondestroy;e&&e();for(var n=this._windows,o=Array.isArray(n),r=0,n=o?n:n[Symbol.iterator]();;){var i;if(o){if(r>=n.length)break;i=n[r++]}else{if(r=n.next(),r.done)break;i=r.value}i.destructor()}t.prototype.destructor.call(this)},e.prototype.show=function(e,n){if(0===e.indexOf("/")||0===e.indexOf("./"))return t.prototype.show.call(this,e,n);t.prototype.show.call(this,"../"+e,n)},e.prototype.init=function(t,e){this.app.config.legacyEarlyInit&&this._realInitHandler(t,e)},e.prototype.ready=function(t,e){this.app.config.legacyEarlyInit||this._realInitHandler(t,e)},e.prototype._realInitHandler=function(t,n){var o=this._ui.$oninit;if(o){var r=this.getRoot();o(r,r.$scope)}var i=this._ui.$onevent;if(i)for(var a in i)this.on(this.app,a,i[a]);var s=this._ui.$windows;if(s)for(var c=s,u=Array.isArray(c),l=0,c=u?c:c[Symbol.iterator]();;){var p;if(u){if(l>=c.length)break;p=c[l++]}else{if(l=c.next(),l.done)break;p=l.value}var f=p;if(f.$ui){var h=new e(this.app,this.getName(),f);h.render(document.body),this._windows.push(h)}else this.ui(f)}},e.prototype._urlChange=function(e){var n=this;return t.prototype._urlChange.call(this,e).then(function(){var t=n._ui.$onurlchange;if(t){var o=n.getRoot();t(e[0].params,e.slice(1),o.$scope)}})},e}(a.a)},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return s});var a=n(4),s=function(t){function e(n,i,a){o(this,e);var s=r(this,t.call(this,n,i));return s._ui=a,s}return i(e,t),e.prototype.config=function(){return this._ui},e}(a.a)},function(t,e,n){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t,e){var n,r=[],i={},a=t.routie,s=function(t,e){this.name=e,this.path=t,this.keys=[],this.fns=[],this.params={},this.regex=c(this.path,this.keys,!1,!1)};s.prototype.addHandler=function(t){this.fns.push(t)},s.prototype.removeHandler=function(t){for(var e=0,n=this.fns.length;e<n;e++){if(t==this.fns[e])return void this.fns.splice(e,1)}},s.prototype.run=function(t){for(var e=0,n=this.fns.length;e<n;e++)if(!1===this.fns[e].apply(this,t))return!1;return!0},s.prototype.match=function(t,e){var n=this.regex.exec(t);if(!n)return!1;for(var o=1,r=n.length;o<r;++o){var i=this.keys[o-1],a="string"==typeof n[o]?decodeURIComponent(n[o]):n[o];i&&(this.params[i.name]=a),e.push(a)}return!0},s.prototype.toURL=function(t){var e=this.path;for(var n in t)e=e.replace("/:"+n,"/"+t[n]);if(e=e.replace(/\/:.*\?/g,"/").replace(/\?/g,""),-1!=e.indexOf(":"))throw new Error("missing parameters for url: "+e);return e};var c=function(t,e,n,o){return t instanceof RegExp?t:(t instanceof Array&&(t="("+t.join("|")+")"),t=t.concat(o?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(t,n,o,r,i,a){return e.push({name:r,optional:!!a}),n=n||"",(a?"":n)+"(?:"+(a?n:"")+(o||"")+(i||o&&"([^/.]+?)"||"([^/]+?)")+")"+(a||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+t+"$",n?"":"i"))},u=function(t,e){var n=t.split(" "),o=2==n.length?n[0]:null;t=2==n.length?n[1]:n[0],i[t]||(i[t]=new s(t,o),r.push(i[t])),i[t].addHandler(e)},l=function t(e,n){if("function"==typeof n)u(e,n),t.reload();else if("object"==(void 0===e?"undefined":o(e))){for(var r in e)u(r,e[r]);t.reload()}else void 0===n&&t.navigate(e)};l.lookup=function(t,e){for(var n=0,o=r.length;n<o;n++){var i=r[n];if(i.name==t)return i.toURL(e)}},l.remove=function(t,e){var n=i[t];n&&n.removeHandler(e)},l.removeAll=function(){i={},r=[],n=""},l.navigate=function(t,e){e=e||{};var n=e.silent||!1;n&&_(),setTimeout(function(){window.location.hash=t,n&&setTimeout(function(){d()},1)},1)},l.noConflict=function(){return t.routie=a,l};var p=function(){return window.location.hash.substring(1)},f=function(t,e){var n=[];return e.match(t,n)?!1!==e.run(n)?1:0:-1},h=l.reload=function(){for(var t=p(),e=0,o=r.length;e<o;e++){var i=r[e],a=f(t,i);if(1===a){n=t;break}if(0===a){l.navigate(n,{silent:!0});break}}},d=function(){t.addEventListener?t.addEventListener("hashchange",h,!1):t.attachEvent("onhashchange",h)},_=function(){t.removeEventListener?t.removeEventListener("hashchange",h):t.detachEvent("onhashchange",h)};if(d(),n=p(),e)return l;t.routie=l};t.exports=r(window,!0),t.exports.default=t.exports},function(t,e){var n=webix;n.ui.freeze||(n.ui.freeze=function(t){var e=t();return e&&e.then?e.then(function(t){return n.ui.$freeze=!1,n.ui.resize(),t}):(n.ui.$freeze=!1,n.ui.resize()),e})},function(t,e,n){function o(t){return n(r(t))}function r(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var i={"./body":23,"./body.js":23,"./footer":13,"./footer.js":13,"./globals":0,"./globals.js":0,"./gr-body":14,"./gr-body.js":14,"./gr-center":15,"./gr-center.js":15,"./gr-left":16,"./gr-left.js":16,"./gr-right":17,"./gr-right.js":17,"./gr-top":18,"./gr-top.js":18,"./grouper":24,"./grouper.js":24,"./header":19,"./header.js":19,"./links_form":8,"./links_form.js":8,"./new_bar":7,"./new_bar.js":7,"./new_form":2,"./new_form.js":2,"./new_stri":6,"./new_stri.js":6,"./skipped":11,"./skipped.js":11,"./spr_dt":12,"./spr_dt.js":12,"./start":25,"./start.js":25,"./top-menu":5,"./top-menu.js":5,"./unlink":9,"./unlink.js":9,"./unlinked":10,"./unlinked.js":10,"./yes-no":3,"./yes-no.js":3};o.keys=function(){return Object.keys(i)},o.resolve=r,t.exports=o,o.id=34},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r});var r=function(){function t(e,n){o(this,t),this.name=n.storeName||n.id+":route",this.cb=e}return t.prototype.set=function(t,e){var n=this;webix.storage.session.put(this.name,t),e&&e.silent||setTimeout(function(){return n.cb(t)},1)},t.prototype.get=function(){return webix.storage.session.get(this.name)},t}()},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){function t(e,n){o(this,t),this.cb=e,this.prefix=n.routerPrefix||""}t.prototype.set=function(t,e){var n=this;window.history.pushState(null,null,this.prefix+t),e&&e.silent||setTimeout(function(){return n.cb(t)},1)},t.prototype.get=function(){var t=window.location.pathname.replace(this.prefix,"");return"/"!==t?t:""}}()},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){function t(e,n){o(this,t),this.path="",this.cb=e}t.prototype.set=function(t,e){var n=this;this.path=t,e&&e.silent||setTimeout(function(){return n.cb(t)},1)},t.prototype.get=function(){return this.path}}()},function(t,e,n){"use strict";function o(t,e,n){e.on(t,"app:guard",function(t,o,r){if(o===e||o.contains(e)){var i=n();r.confirm=!1===i?Promise.reject(i):r.confirm.then(function(){return i})}})}e.a=o},function(t,e,n){"use strict";function o(t,e,o){o=o||{};var r=o.storage,a=r?r.get("lang"):o.lang||"en",s={_:null,polyglot:null,getLang:function(){return a},setLang:function(e,o){var c=n(41)("./"+e);c.__esModule&&(c=c.default);var u=s.polyglot=new i.a({phrases:c});u.locale(e),s._=webix.bind(u.t,u),a=e,r&&r.put("lang",a),o||t.refresh()}};t.setService("locale",s),s.setLang(a,!0)}e.a=o;var r=n(40),i=n.n(r)},function(t,e,n){var o,r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n,i){o=[],void 0!==(r=function(){return i(n)}.apply(e,o))&&(t.exports=r)}(this,function(t){"use strict";function e(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||u}function n(t){var e,n,o,r={};for(e in t)if(t.hasOwnProperty(e)){n=t[e];for(o in n)r[n[o]]=e}return r}function o(t){var e=/^\s+|\s+$/g;return t.replace(e,"")}function r(t,e,n){var r,i,a;return null!=n&&t?(i=t.split(p),a=i[s(e,n)]||i[0],r=o(a)):r=t,r}function a(t){var e=n(h);return e[t]||e.en}function s(t,e){return f[a(t)](e)}function c(t,e){for(var n in e)"_"!==n&&e.hasOwnProperty(n)&&(t=t.replace(new RegExp("%\\{"+n+"\\}","g"),e[n]));return t}function u(e){t.console&&t.console.warn&&t.console.warn("WARNING: "+e)}function l(t){var e={};for(var n in t)e[n]=t[n];return e}e.VERSION="0.4.3",e.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},e.prototype.extend=function(t,e){var n;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],e&&(o=e+"."+o),"object"===(void 0===n?"undefined":i(n))?this.extend(n,o):this.phrases[o]=n)},e.prototype.clear=function(){this.phrases={}},e.prototype.replace=function(t){this.clear(),this.extend(t)},e.prototype.t=function(t,e){var n,o;return e=null==e?{}:e,"number"==typeof e&&(e={smart_count:e}),"string"==typeof this.phrases[t]?n=this.phrases[t]:"string"==typeof e._?n=e._:this.allowMissing?n=t:(this.warn('Missing translation for key: "'+t+'"'),o=t),"string"==typeof n&&(e=l(e),o=r(n,this.currentLocale,e.smart_count),o=c(o,e)),o},e.prototype.has=function(t){return t in this.phrases};var p="||||",f={chinese:function(t){return 0},german:function(t){return 1!==t?1:0},french:function(t){return t>1?1:0},russian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},h={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return e})},function(t,e,n){function o(t){return n(r(t))}function r(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var i={"./en":26,"./en.js":26};o.keys=function(){return Object.keys(i)},o.resolve=r,t.exports=o,o.id=41},function(t,e,n){"use strict";function o(t,e,n){e.urls&&(n=e.urls[n]||n),t.show("./"+n)}function r(t,e,n){var r=e.$$(n.id||n),i=!1;r.attachEvent("onchange",function(){i||o(e,n,this.getValue())}),r.attachEvent("onafterselect",function(){if(!i){var t=null;r.setValue?t=this.getValue():r.getSelectedId&&(t=r.getSelectedId()),o(e,n,t)}}),e.on(t,"app:route",function(t){var n=t[e.getIndex()];if(n){i=!0;var o=n.page;r.setValue&&r.getValue()!==o?r.setValue(o):r.select&&r.exists(o)&&r.getSelectedId()!==o&&r.select(o),i=!1}})}e.a=r},function(t,e,n){"use strict";function o(t,e,n){function o(t){var o=e.$$(n.target);o&&(t||(t="<div class='status_"+h+"'><span class='webix_icon fa-"+g[h]+"'></span> "+w[h]+"</div>"),o.setHTML(t))}function a(){d--,p("good")}function s(t){d--,p("error",t)}function c(t){d++,p("saving"),t&&t.then&&t.then(a,s)}function u(){return h}function l(){0==d&&o(" ")}function p(e,n){d<0&&(d=0),"saving"===e?(h="saving",o()):(_="error"===e,0===d&&(h=_?"error":"good",_?t.error("app:error:server",[n.responseText||n]):b&&setTimeout(l,b),o()))}function f(t){var n=webix.dp(t);n&&(e.on(n,"onAfterDataSend",c),e.on(n,"onAfterSaveError",function(t,e,n){return s(n)}),e.on(n,"onAfterSave",a))}var h="good",d=0,_=!1,b=n.expire;b||!1===b||(b=2e3);var w=n.texts||i,g=n.icons||r;"string"==typeof n&&(n={target:n}),t.setService("status",{getStatus:u,setStatus:p,track:f}),n.remote&&e.on(webix,"onRemoteCall",c),n.ajax&&e.on(webix,"onBeforeAjax",function(t,e,n,o,r,i,a){c(a)}),n.data&&f(n.data)}e.a=o;var r={good:"check",error:"warning",saving:"refresh fa-spin"},i={good:"Ok",error:"Error",saving:"Connecting..."}},function(t,e,n){"use strict";function o(t,e,n){n=n||{};var o=n.storage,r=o?o.get("theme"):n.theme||"flat-default",i={getTheme:function(){return r},setTheme:function(e,n){for(var i=e.split("-"),a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var c=a[s].getAttribute("title");c&&(c===e||c===i[0]?(a[s].rel="stylesheet",a[s].disabled=!1):(a[s].rel="alternate stylesheet",a[s].disabled=!0),webix.skin.set(i[0])),webix.html.removeCss(document.body,"theme-"+r),webix.html.addCss(document.body,"theme-"+e)}r=e,o&&o.put("theme",e),n||t.refresh()}};t.setService("theme",i),i.setTheme(r,!0)}e.a=o},function(t,e,n){"use strict";function o(t,e,n){function o(t,e){t===i?(p.logout(),e.redirect=s):t===r||p.getStatus()||(e.redirect=r)}n=n||{};var r=n.login||"/login",i=n.logout||"/logout",a=n.afterLogin||t.config.start,s=n.afterLogout||"/login",c=n.ping||3e5,u=n.model,l=n.user,p={getUser:function(){return l},getStatus:function(t){return t?u.status().catch(function(){return null}).then(function(t){l=t}):null!==l},login:function(e,n){return u.login(e,n).then(function(e){if(l=e,!e)throw"Access denied";t.show(a)})},logout:function(){return l=null,u.logout()}};t.setService("user",p),t.attachEvent("app:guard",function(t,e,n){return void 0===l&&(n.confirm=p.getStatus(!0).then(function(e){return o(t,n)})),o(t,n)}),c&&setInterval(function(){return p.getStatus(!0)},c)}e.a=o}]);