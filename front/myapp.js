!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/codebase/",t(t.s=39)}([function(e,t,n){"use strict";var o=n(41);n.d(t,"a",function(){return o.a});var i=n(5);n.d(t,"b",function(){return i.a});var r=(n(25),n(47));n.d(t,"c",function(){return r.a});var a=(n(48),n(49),n(50)),s=n(51),c=n(54),u=n(55),l=n(56),p=n(57);a.a,s.a,c.a,l.a,p.a,u.a;window.Promise||(window.Promise=webix.promise)},function(e,t,n){"use strict";function o(e){E.add(e)}function i(e){E.remove(e)}function r(e,t){var n=e.id,o=t.getItem(n);o.usloviya=e.value,t.updateItem(n,o),t.refresh()}function a(e){var t=$$(e).config.totalPos,n=$$(e).config.posPpage;return(Math.ceil(t/n)-1)*n+1}function s(e,t){var n=e.app.config.user,o=e.app.config.r_url+"?getBar",i={user:n,id_spr:t},r=y(o,i,!0).response;r=JSON.parse(r),r.result&&($$("bars_dc").clearAll(),$$("bars_dc").parse(r.ret_val))}function c(e,t){var n=$$(e).config.startPos/$$(e).config.posPpage,o=$$(e).config.totalPos/$$(e).config.posPpage;o=Math.ceil(o);var i=$$(t).getChildViews()[2],r=$$(t).getChildViews()[6];n=0!==o?Math.ceil(n):0,i.define("label","Страница "+n+" из "+o),i.refresh(),r.define("label","Всего записей: "+$$(e).config.totalPos),r.refresh()}function u(e){var t=e.th,n=e.view,o=e.navBar,i=e.start,r=e.count,a=e.searchBar,s=e.method,u=$$(a).getValue(),l=t?t.app.config.user:"user",p=t?t.app.config.r_url+"?"+s:"http://saas.local/linker_logic?"+s,f={user:l,search:u,start:i,count:r};$$(n).config.old_stri!==u&&($$(n).config.old_stri=u,$$(n).showProgress({type:"icon",icon:'<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>'}),y(p,f).then(function(e){e=e.json(),e.result?($$(n).clearAll(),$$(n).parse(e.ret_val),$$(n).config.startPos=e.start,$$(n).config.totalPos=e.total,c(n,o)):webix.message("error")}))}function l(e){var t=$$("prcs_dc").getItem($$("prcs_dc").getCursor()),n={},o="https://www.google.ru/search?newwindow=1&q="+t.c_tovar,i="<a target='_balnk' href='"+o+"'><span>"+t.c_tovar+"</span></a>",r="<span style='color: #666666;'>Осталось свести в текущей сессии: </span><span style='color: red; font-weight: bold;'>"+$$("prcs_dc").count()+"</span>";n._name=i,n._count=r,n._vendor=t.c_zavod,n.p_name=t.c_tovar,$$("_names_bar").parse(n);var a=t.c_tovar.split(" "),s=0;a[s].length<4&&(s+=1);for(var c=a[s],l=s;l<a.length;l++)for(var p=a[l],f=0;f<p.length;f++){var h=(parseInt(p[f],10),!isNaN(p[f]));h&&(c+=" "+p[f])}c=c.replace('"'," "),c=c.replace("!"," "),c=c.replace("-"," "),c=c.replace("."," "),c=c.replace("*"," "),c=c.replace("+"," "),c=c.replace("/"," "),c=c.replace("\\"," "),$$("prcs_dc").config.old_stri=c,$$("_spr_search").setValue(c),r=$$("__dt").config.posPpage,u({th:e,view:"__dt",navBar:"__nav",start:1,count:r,searchBar:"_spr_search",method:"getSprSearch"})}function p(e,t){var n=e.app.config.user,o=e.app.config.r_url+"?getSpr",i={user:n,id_spr:t},r=y(o,i,!0).response;return r=JSON.parse(r),r.result?r.ret_val[0]:(webix.message("error"),"error")}function f(e){setTimeout(d,0,{app:e,type:"async",method:"getStranaAll",store:"strana_dc"}),setTimeout(d,5500,{app:e,type:"async",method:"getVendorAll",store:"vendor_dc"}),setTimeout(d,4500,{app:e,type:"async",method:"getDvAll",store:"dv_dc"}),setTimeout(d,0,{app:e,type:"async",method:"getNdsAll",store:"nds_dc"}),setTimeout(d,0,{app:e,type:"async",method:"getHranAll",store:"hran_dc"}),setTimeout(d,0,{app:e,type:"async",method:"getSezonAll",store:"sezon_dc"}),setTimeout(d,0,{app:e,type:"async",method:"getGroupAll",store:"group_dc"})}function h(e,t){var n=e.app.config.user;y(e.app.config.r_url+"?getPrcs",{user:n,id_vnd:+t}).then(function(e){e=e.json(),e.result?(e=e.ret_val,$$("prcs_dc").clearAll(),$$("prcs_dc").parse(e)):webix.message("error")})}function d(e){var t=e.app,n=e.method,o=e.store,i=t.config.user,r=t.config.r_url+"?"+n,a={user:i};if("sync"!==e.type)y(r,a).then(function(e){e=e.json(),e.result?(e=e.ret_val,$$(o).clearAll(),$$(o).parse(e)):webix.message("error")});else{var s=y(r,a,!0).response;s=JSON.parse(s),s.result?(s=s.ret_val,$$(o).clearAll(),$$(o).parse(s)):webix.message("error")}}function b(e,t){var n=t.app.config.user;y(t.app.config.r_url+"?getSupplUnlnk",{user:n}).then(function(t){if(t=t.json(),t.result){t=t.ret_val,$$(e).getList().clearAll(),$$(e).getList().parse(t);var n=$$(e).getList().getFirstId();$$(e).setValue(n)}else webix.message("error")}).then(function(){})}function w(e,t){var n=(e.sh_prc,$.getCursor()),o=$.data.order,i=void 0;o.forEach(function(e,t,o){e===n&&(i=t)}),i+=1,i===$.count()-1&&(i=0),$.remove(n),n=$.data.order[+i],$.setCursor(n),$.count()<1?b("_suppl",t):l()}function _(e,t){return t=t.toString().toLowerCase(),t=new RegExp(".*"+t.replace(/ /g,".*")+".*"),-1!=e.c_vnd.toString().toLowerCase().search(t)}function y(e,t,n){return!0===n?webix.ajax().sync().headers({"Content-type":"application/json"}).post(e,t):webix.ajax().headers({"Content-type":"application/json"}).post(e,t)}function g(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):NaN}function v(e,t,n){n=n||{};var o=n.expires;if("number"==typeof o&&o){var i=new Date;i.setTime(i.getTime()+1e3*o),o=n.expires=i}o&&o.toUTCString&&(n.expires=o.toUTCString()),t=encodeURIComponent(t);var r=e+"="+t;for(var a in n){r+="; "+a;var s=n[a];!0!==s&&(r+="="+s)}document.cookie=r}function m(e){v(e,"",{expires:-1,path:"/"})}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"barcodes",function(){return x}),n.d(t,"prcs",function(){return $}),n.d(t,"strana",function(){return j}),n.d(t,"vendor",function(){return O}),n.d(t,"dv",function(){return P}),n.d(t,"nds",function(){return k}),n.d(t,"sezon",function(){return S}),n.d(t,"hran",function(){return E}),n.d(t,"group",function(){return C}),t.addHran=o,t.delHran=i,t.updHran=r,t.last_page=a,t.get_bars=s,t.form_navi=c,t.get_data=u,t.parse_unlinked_item=l,t.get_spr=p,t.init_first=f,t.get_prcs=h,t.get_refs=d,t.get_suppl=b,t.delPrc=w,t.filter_1=_,t.request=y,t.getCookie=g,t.setCookie=v,t.deleteCookie=m;var x=new webix.DataCollection({id:"bars_dc",on:{onAfterLoad:function(){}}}),$=new webix.DataCollection({id:"prcs_dc",on:{onAfterLoad:function(){var e=this.data.order[0];this.setCursor(e),l()}}}),j=new webix.DataCollection({id:"strana_dc",on:{onAfterLoad:function(){}}}),O=new webix.DataCollection({id:"vendor_dc",on:{onAfterLoad:function(){}}}),P=new webix.DataCollection({id:"dv_dc",on:{onAfterLoad:function(){}}}),k=new webix.DataCollection({id:"nds_dc",on:{onAfterLoad:function(){}}}),S=new webix.DataCollection({id:"sezon_dc",on:{onAfterLoad:function(){}}}),E=new webix.DataCollection({id:"hran_dc",on:{onAfterLoad:function(){}}}),C=new webix.DataCollection({id:"group_dc",on:{onAfterLoad:function(){}}})},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){var e=this;return{view:"cWindow",modal:!0,on:{onHide:function(){console.log(e.$$("new_user")),e.$$("new_user").clear()}},body:{view:"form",localId:"new_user",margin:0,rules:{},elements:[{rows:[{view:"label",label:"Пользователь:",name:"u_name"},{view:"text",label:"",value:"",name:"c_user"},{height:10,width:600},{view:"label",label:"Группа:",name:"g_name"},{cols:[{view:"combo",value:"",name:"id_group",required:!0,options:{body:{template:"#c_group#",yCount:15}},on:{onAfterRender:function(){}}},{view:"button",type:"base",label:"+",width:30,disabled:!0,on:{onAfterRender:function(){"admin"===this.$scope.app.config.user&&this.enable()}},click:function(){}}]},{view:"label",label:"Роль:",name:"r_name"},{cols:[{view:"combo",label:"",value:"",name:"id_role",options:{body:{template:"#id_role#",yCount:10}},on:{onAfterRender:function(){}}},{view:"button",type:"base",label:"+",width:30,disabled:!0,on:{onAfterRender:function(){"admin"===this.$scope.app.config.user&&this.enable()}},click:function(){}}]},{view:"label",label:"Статус:",name:"st_name"},{cols:[{view:"combo",label:"",value:"",name:"id_status",options:{body:{template:"#c_status#",yCount:10}},on:{onAfterRender:function(){}}},{view:"button",type:"base",label:"+",width:30,disabled:!0,on:{onAfterRender:function(){"admin"===this.$scope.app.config.user&&this.enable()}},click:function(){}}]},{height:10,width:600},{cols:[{view:"button",type:"base",label:"Отменить",width:120,height:32,click:function(){e.hide()}},{},{view:"button",type:"base",label:"Test",width:120,height:32,click:function(){}},{view:"button",type:"base",label:"Сохранить",width:120,height:32,disabled:!0,on:{onAfterRender:function(){"admin"===this.$scope.app.config.user&&this.enable()}},click:function(){e.hide()}}]}]}]}}},t.prototype.show=function(e,t){console.log(t),t&&this.$$("new_user").parse(t),this.getRoot().getHead().getChildViews()[0].setValue(e),this.getRoot().show()},t.prototype.hide=function(){this.getRoot().hide()},t}(a.b);t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(9),c=n(10),u=n(1),l=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){function e(e,t){return t=t.toString().toLowerCase(),t=new RegExp(".*"+t.replace(/ /g,".*")+".*"),-1!=e.c_strana.toString().toLowerCase().search(t)}function t(e,t){return t=t.toString().toLowerCase(),t=new RegExp(".*"+t.replace(/ /g,".*")+".*"),-1!=e.c_zavod.toString().toLowerCase().search(t)}function n(e,t){return t=t.toString().toLowerCase(),t=new RegExp(".*"+t.replace(/ /g,".*")+".*"),-1!=e.act_ingr.toString().toLowerCase().search(t)}function o(e,t){return t=t.toString().toLowerCase(),t=new RegExp(".*"+t.replace(/ /g,".*")+".*"),-1!=e.group.toString().toLowerCase().search(t)}function i(e,t){return t=t.toString().toLowerCase(),t=new RegExp(".*"+t.replace(/ /g,".*")+".*"),-1!=e.sezon.toString().toLowerCase().search(t)}function r(e,t){return t=t.toString().toLowerCase(),t=new RegExp(".*"+t.replace(/ /g,".*")+".*"),-1!=e.usloviya.toString().toLowerCase().search(t)}function a(e){u.vendor.add(e,0)}function s(e){u.dv.add(e,0)}var c=this;return{view:"cWindow",modal:!0,on:{onHide:function(){u.barcodes.clearAll()}},body:{view:"form",localId:"new_form",margin:0,rules:{c_tovar:webix.rules.isNotEmpty,id_strana:webix.rules.isNotEmpty,id_zavod:webix.rules.isNotEmpty,id_dv:webix.rules.isNotEmpty},elements:[{rows:[{view:"label",label:"Название товара:   Название 1",name:"t_name"},{view:"text",label:"",value:"Название 1",name:"c_tovar",required:!0},{height:10,width:700},{cols:[{rows:[{view:"label",label:"Страна:",name:"s_name"},{view:"combo",width:400,value:"",name:"id_strana",required:!0,options:{filter:e,body:{template:"#c_strana#",yCount:15}},on:{onAfterRender:function(){this.getList().sync(u.strana)}}},{view:"label",label:"Производитель:",name:"v_name"},{cols:[{view:"combo",label:"",value:"",name:"id_zavod",required:!0,options:{filter:t,body:{template:"#c_zavod#",yCount:10}},on:{onAfterRender:function(){this.getList().sync(u.vendor)}}},{view:"button",type:"base",label:"+",width:30,disabled:!0,on:{onAfterRender:function(){"admin"===this.$scope.app.config.user&&this.enable()}},click:function(){var e={new_name:"c_zavod",url:"Zavod",callback:a};c.popstri.show("Добавление производителя",e)}}]},{view:"label",label:"Действующее вещество:",name:"dv_name"},{cols:[{view:"combo",label:"",value:"",name:"id_dv",required:!0,options:{filter:n,body:{autoheight:!1,view:"list",type:{height:"auto"},template:"<div class='comboList'>#act_ingr#</div>",height:250,yCount:0}},on:{onAfterRender:function(){this.getList().sync(u.dv)}}},{view:"button",type:"base",label:"+",width:30,disabled:!0,on:{onAfterRender:function(){"admin"===this.$scope.app.config.user&&this.enable()}},click:function(){var e={new_name:"act_ingr",url:"Dv",callback:s};c.popstri.show("Добавление д.вещества",e)}}]},{view:"label",label:"Штрих-код:"},{cols:[{view:"text",label:"",value:"",readonly:!0,name:"barcode",localId:"_barc",click:function(){var e=c.$$("new_form").getValues().id_spr;c.popbar.show("Редактирование ш.кодов",e,c)}}]},{view:"textarea",label:"Описание:",labelPosition:"top",value:"",height:125,name:"c_opisanie"}]},{width:5},{rows:[{view:"form",css:"borders",localId:"new_f_right",elements:[{view:"label",labelWidth:0},{view:"label",labelWidth:0},{view:"checkbox",labelRight:"Рецептурный",labelWidth:0,align:"left",name:"_prescr"},{view:"checkbox",labelRight:"Обязательный",labelWidth:0,align:"left",name:"_mandat"},{view:"combo",label:"Сезон:",labelPosition:"top",value:"",name:"id_sezon",css:"small",options:{filter:i,body:{template:"#sezon#",yCount:5}},on:{onAfterRender:function(){this.getList().sync(u.sezon)}}},{view:"combo",label:"Условия хранения:",labelPosition:"top",value:"",name:"id_usloviya",css:"small",options:{filter:r,body:{template:"#usloviya#",yCount:10}},on:{onAfterRender:function(){this.getList().sync(u.hran)}}},{view:"combo",label:"Группа:",labelPosition:"top",value:"",name:"id_group",css:"small",options:{filter:o,body:{autoheight:!1,view:"list",type:{height:"auto"},template:"<div class='comboList'>#group#</div>",height:200,yCount:0}},on:{onAfterRender:function(){this.getList().sync(u.group)}}},{view:"combo",label:"НДС:",labelPosition:"top",value:"",name:"id_nds",css:"small",options:{body:{template:"#nds#",yCount:10}},on:{onAfterRender:function(){this.getList().sync(u.nds)}}}]}]}]},{cols:[{view:"button",type:"base",label:"Отменить",width:120,height:32,click:function(){c.hide()}},{},{view:"button",type:"base",label:"Test",width:120,height:32,click:function(){}},{view:"button",type:"base",label:"Сохранить",width:120,height:32,disabled:!0,on:{onAfterRender:function(){"admin"===this.$scope.app.config.user&&this.enable()}},click:function(){if(c.$$("new_form").validate({hidden:!1,disabled:!1})){var e=c.$$("new_form").getValues(),t=c.$$("new_f_right").getValues(),n={};n.id_spr=e.id_spr?e.id_spr:-1,n.barcode=e.barcode,n.c_tovar=e.c_tovar,n.id_strana=e.id_strana,n.id_zavod=e.id_zavod,n.id_dv=e.id_dv,n.c_opisanie=e.c_opisanie,n.prescr=1===t._prescr,n.mandat=1===t._mandat,n.id_sezon=t.id_sezon,n.id_usloviya=t.id_usloviya,n.id_group=t.id_group,n.id_nds=t.id_nds,n.sh_prc=u.prcs.getItem(u.prcs.getCursor()).sh_prc,n.user=c.app.config.user;var o=c.app.config.r_url+"?setSpr",i=Object(u.request)(o,n,!0).response;i=JSON.parse(i),i.result&&i.new?Object(u.delPrc)(n,c):i.result&&!i.new||webix.message("error"),c.hide()}}}]}]}]}}},t.prototype.show=function(e,t){t&&(this.$$("new_form").parse(t),this.$$("new_f_right").parse(t)),this.getRoot().getHead().getChildViews()[0].setValue(e),this.getRoot().show()},t.prototype.hide=function(){this.getRoot().hide()},t.prototype.init=function(){this.popstri=this.ui(s.default),this.popbar=this.ui(c.default)},t}(a.b);t.default=l},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){var e,t=this;return{view:"cWindow",modal:!0,body:(e={view:"form",margin:0,_params:{},on:{onShow:function(e){$$("_yes").focus()}},elements:[{view:"label",label:"Подтвердите",height:44,align:"center"},{cols:[{view:"button",type:"base",label:"Нет",width:120,height:44,click:function(){t.getRoot().getBody().config._params={},t.hide()}},{},{view:"button",type:"base",label:"Да",width:120,height:44,localId:"_yes",click:function(){var e=t.getRoot().getBody().config._params,n=e.sh_prc,o=t.app.config.user,i=t.app.config.r_url+e.command,r=e.type,a=e.action?e.action:"no_action",c=e.id_spr?e.id_spr:NaN,u=e.callback,l=e.th,p={user:o,sh_prc:n,action:a,id_spr:c};t.hide(),"sync"===r||Object(s.request)(i,p).then(function(e){e=e.json(),e.result?u?u(e,l):console.log("error callback",e):webix.message("error")})}}]}]},e.on={onBeforeShow:function(){},onShow:function(){}},e)}},t.prototype.show=function(e,t){this.getRoot().getHead().getChildViews()[0].setValue("Подтвердите действие"),t&&(this.getRoot().getBody().config._params=t),this.getRoot().getBody().getChildViews()[0].setValue(e),this.getRoot().show()},t.prototype.hide=function(){this.getRoot().hide()},t.prototype.getValues=function(){return this.getRoot().getBody().getValues()},t}(a.b);t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return c});var a=n(23),s=n(24),c=function(e){function t(n,r){o(this,t);var a=i(this,e.call(this));return a.app=n,a._name=r,a._children=[],a}return r(t,e),t.prototype.ui=function(e,t){if("function"==typeof e){var n=new e(this.app,t);return this._children.push(n),n.render(),n}var o=this.app.webix.ui(e);return this._children.push(o),o},t.prototype.show=function(e,t){var n=this;if("string"==typeof e){if("/"===e.substr(0,1))return this.app.show(e);if(0===e.indexOf("./")&&(e=e.substr(2)),0===e.indexOf("../")){var o=this.getParentView();return void(o?o.show("./"+e.substr(3)):this.app.show("/"+e.substr(3)))}var i=this.getSubView();if(!i)return this.app.show("/"+e);if(i.parent!==this)return i.parent.show(e,t);var r=Object(s.a)(e),a=null,c=this.app.getRouter().get();if(this._index){a=Object(s.a)(c).slice(0,this._index).concat(r);for(var u=0;u<a.length;u++)a[u].index=u+1;var l=Object(s.b)(a);this.app.canNavigate(l,this).then(function(e){l!==e?n.app.show(e):n._finishShow(i.subview,a,e)}).catch(function(){return!1})}else this._finishShow(i.subview,r,"")}},t.prototype.init=function(e,t){},t.prototype.ready=function(e,t){},t.prototype.config=function(){this.app.webix.message("View:Config is not implemented")},t.prototype.urlChange=function(e,t){},t.prototype.destroy=function(){},t.prototype.destructor=function(){this.destroy();for(var t=this._children,n=t.length-1;n>=0;n--)t[n]&&t[n].destructor&&t[n].destructor();this.app=this._children=null,this._root.destructor(),e.prototype.destructor.call(this)},t.prototype.use=function(e,t){e(this.app,this,t)},t.prototype._render=function(e){var t=this,n=this.config();return n.then?n.then(function(n){return t._render_final(n,e)}):this._render_final(n,e)},t.prototype._render_final=function(e,t){var n=this,o=void 0,i={ui:{}};this.app.copyConfig(e,i.ui,this._subs),this.app.callEvent("app:render",[this,t,i]),i.ui.$scope=this;try{this._root=this.app.webix.ui(i.ui,this._container),this._root.getParentView()&&(this._container=this._root),this._init(this._root,t),o=this._urlChange(t).then(function(){return n.ready(n._root,t)})}catch(e){o=Promise.reject(e)}return o.catch(function(e){return n._initError(n,e)})},t.prototype._init=function(e,t){return this.init(e,t)},t.prototype._urlChange=function(e){var t=this,n=[];for(var o in this._subs){var i=this._subs[o];if(i.url)if("string"==typeof i.url){var r=Object(s.a)(i.url);n.push(this._createSubView(i,r))}else{var a=i.view;"function"!=typeof i.url||a instanceof i.url||(a=new i.url(this.app,"")),a||(a=i.url),n.push(this._renderSubView(i,a,e))}else if("default"===o&&e&&e.length>1){var c=e.slice(1);n.push(this._createSubView(i,c))}}return Promise.all(n).then(function(){t.urlChange(t._root,e)})},t.prototype._initError=function(e,t){return this.app.error("app:error:initview",[t,e]),!0},t.prototype._createSubView=function(e,t){var n=this;return this.app.createFromURL(t,e.view).then(function(o){return n._renderSubView(e,o,t)})},t.prototype._renderSubView=function(e,t,n){var o=this.app.webix.$$(e.id);return t.render(o,n,this).then(function(n){return e.view&&e.view!==t&&e.view.destructor(),e.view=t,e.id=n.config.id,n})},t.prototype._finishShow=function(e,t,n){this._index?(this._urlChange(t.slice(this._index-1)),this.app.getRouter().set(n,{silent:!0}),this.app.callEvent("app:route",[t])):this._createSubView(e,t)},t}(a.a)},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(3),c=n(11),u=n(4),l=n(1),p=n(13),f=n(14),h=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){var e=this;return{rows:[{view:"toolbar",height:40,cols:[{view:"combo",name:"suppliers",id:"_suppl",readonly:!1,disabled:!1,width:300,options:{filter:l.filter_1,body:{css:"big-combo",template:"#c_vnd# - #count#",yCount:10}},on:{onChange:function(){var t=$$("_suppl").getList().getItem($$("_suppl").getValue()).id_vnd;Object(l.get_prcs)(e,t)}}},{},{view:"button",type:"base",label:"TEST",width:150,click:function(){webix.message({text:"test",type:"debug"})}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-refresh'></span><span style='line-height: 20px;'> Синхронизировать с сервером</span>",width:260,click:function(){Object(l.get_suppl)("_suppl",e)}},{view:"button",id:"_skip",type:"htmlbutton",label:"<span class='webix_icon fa-archive'></span><span style='line-height: 20px;'> Пропущенные (Ctrl+S)</span>",width:210,click:function(){e.popskipped.show("Пропущенные товары")}},{view:"button",id:"_links",type:"htmlbutton",label:"<span class='webix_icon fa-stumbleupon'></span><span style='line-height: 20px;'> Связки (Ctrl+L)</span>",width:150,click:function(){e.poplinks.show("Линки")}}]},{view:"toolbar",id:"_names_bar",css:"header",rows:[{cols:[{view:"label",label:"",name:"_name",fillspace:1},{width:100},{view:"label",label:"",css:"right",name:"_count"}]},{cols:[{view:"label",label:"",css:"header",name:"_vendor"},{},{view:"button",type:"htmlbutton",label:"<span class='butt'>Обновить сессию</span>",width:230,click:function(){var t=$$("_suppl").getList().getItem($$("_suppl").getValue()).id_vnd;Object(l.get_prcs)(e,t)}},{view:"button",type:"htmlbutton",label:"<span class='butt'>Посмотреть все из сессии</span>",width:230,click:function(){var t=$$("_suppl").getValue();t=$$("_suppl").getList().getItem(t).c_vnd,e.popunlink.show("Осталось связать в этой сессии по поставщику "+t)}}]}]},{view:"toolbar",height:40,cols:[{view:"text",label:"",value:"",labelWidth:1,placeholder:"Строка поиска",id:"_spr_search",keyPressTimeout:900,tooltip:"!слово - исключить из поиска, +слово - поиск в названии производителя",on:{onTimedKeyPress:function(e,t){var n=this.$scope,o=$$("__dt").config.posPpage;Object(l.get_data)({th:n,view:"__dt",navBar:"__nav",start:1,count:o,searchBar:"_spr_search",method:"getSprSearch"})}}},{view:"button",type:"htmlbutton",id:"_add",label:"Добавить (Ins)",width:140,hotkey:"insert",disabled:!0,on:{onAfterRender:function(){"admin"===this.$scope.app.config.user&&this.enable()}},click:function(){var t={},n=$$("_names_bar").getValues().p_name;t.t_name="Название товара:   "+n,t.c_tovar=n.toUpperCase(),e.popnew.show("Добавление в справочник",t)}},{view:"button",type:"htmlbutton",id:"_link",label:"<span class='webix_icon fa-link'></span><span style='line-height: 20px;'>  Связать (Ctrl+Home)</span>",width:200,hotkey:"home+ctrl",disabled:!0,click:function(){var t=l.prcs.getItem(l.prcs.getCursor()).sh_prc,n=$$("__dt").getSelectedItem().id_spr,o={};o.th=e,o.command="?setLnk",o.sh_prc=t,o.id_spr=n,o.type="async",o.callback=l.delPrc,e.popconfirm.show("Связать?",o)}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-left'></span><span style='line-height: 20px;'>Ctrl+</span><span class='webix_icon fa-arrow-down'></span>",width:90,hotkey:"down+ctrl",click:function(){var t=$$("prcs_dc").getCursor(),n=$$("prcs_dc").data.order,o=void 0;n.forEach(function(e,n,i){e===t&&(o=n)}),o-=1,o<0&&(o=$$("prcs_dc").count()-1),t=$$("prcs_dc").data.order[+o],$$("prcs_dc").setCursor(t),Object(l.parse_unlinked_item)(e)}},{view:"button",type:"htmlbutton",label:"Пропустить (Ctrl+M)",width:160,hotkey:"m+ctrl",disabled:!1,click:function(){var t=l.prcs.getItem(l.prcs.getCursor()).sh_prc,n={};n.th=e,n.command="?skipLnk",n.sh_prc=t,n.type="async",n.callback=l.delPrc,e.popconfirm.show("Пропустить?",n)}},{view:"button",type:"htmlbutton",label:"<span style='line-height: 20px;'>Ctrl+</span><span class='webix_icon fa-arrow-up'></span><span class='webix_icon fa-angle-right'></span>",width:90,hotkey:"up+ctrl",click:function(){var t=$$("prcs_dc").getCursor(),n=$$("prcs_dc").data.order,o=void 0;n.forEach(function(e,n,i){e===t&&(o=n)}),o+=1,o===$$("prcs_dc").count()-1&&(o=0),t=$$("prcs_dc").data.order[+o],$$("prcs_dc").setCursor(t),Object(l.parse_unlinked_item)(e)}}]}]}},t.prototype.init=function(){Object(l.get_suppl)("_suppl",this),this.popconfirm=this.ui(u.default),this.popnew=this.ui(s.default),this.poplinks=this.ui(c.default),this.popunlink=this.ui(p.default),this.popskipped=this.ui(f.default)},t}(a.b);t.default=h},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=(n(1),function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){var e=this;return{view:"toolbar",height:40,cols:[{view:"combo",localId:"_options",value:1,readonly:!1,disabled:!1,width:190,options:[{id:1,value:"Пользователи"},{id:2,value:"Страны"},{id:3,value:"Производители"},{id:4,value:"Действующие вещества"},{id:5,value:"Группы"},{id:6,value:"Штрих-коды"},{id:7,value:"Сезоны"},{id:8,value:"Условия хранения"},{id:9,value:"Ставки НДС"}],on:{onChange:function(){var t=e.$$("_options").getValue(),n=6==+t?"/start/adm/adm-barcodes":2==+t?"/start/adm/adm-country":3==+t?"/start/adm/adm-vendors":4==+t?"/start/adm/adm-dv":5==+t?"/start/adm/adm-groups":7==+t?"/start/adm/adm-seasons":8==+t?"/start/adm/adm-hran":"/start/adm/adm-users";e.app.show(n)}}},{},{view:"button",type:"base",disabled:!1,label:"TEST",width:150,click:function(){webix.message({text:"test",type:"debug"})}},{view:"button",type:"htmlbutton",disabled:!1,label:"<span class='webix_icon fa-refresh'></span><span style='line-height: 20px;'> Синхронизировать с сервером</span>",width:260,click:function(){webix.message({text:"sync",type:"debug"})}}]}},t.prototype.init=function(){},t}(a.b));t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){function e(e){var t=this.$scope.app.config.r_url+"?check"+this.config._params.type,n={};n.check=e,n.user=this.$scope.app.config.user;var o=Object(s.request)(t,n,!0).response;o=JSON.parse(o);var i=!1;return o.ret_val||this.config._params.text?i=!0:webix.message("error"),i}var t=this;return{view:"cWindow",modal:!0,on:{onHide:function(){t.$$("_n_f").clear(),t.$$("_n_f").clearValidation()}},body:{view:"form",localId:"_n_f",_params:{},margin:0,rules:{id:e,text:webix.rules.isNotEmpty},elements:[{view:"text",localId:"_id",label:"ID группы",value:"",width:320,name:"id",placeholder:"Введите значение",readonly:!0,required:!0,invalidMessage:"Такой ID уже есть"},{view:"text",label:"Название",value:"",width:320,name:"text",placeholder:"Введите значение",required:!0,invalidMessage:"Введите название"},{height:15},{height:30,cols:[{view:"button",type:"base",label:"Отменить",width:120,click:function(){t.hide()}},{},{view:"button",type:"base",label:"Сохранить",width:120,click:function(){if(t.$$("_n_f").validate({hidden:!1,disabled:!1})){var e=t.$$("_n_f").getValues(),n={},o=t.$$("_n_f").config._params;n.value=e.text,n.user=t.app.config.user,n.id=o.text?o.id:e.id;var i="new"===o.mode?t.app.config.r_url+"?set"+o.type:t.app.config.r_url+"?upd"+o.type,r=Object(s.request)(i,n,!0).response;r=JSON.parse(r),r.result&&o.callback(r.ret_val,o.source),t.hide()}}}]}],on:{onBeforeShow:function(){},onShow:function(){}}}}},t.prototype.show=function(e,t){if(this.$$("_n_f").config._params=t,console.log(t),this.getRoot().getHead().getChildViews()[0].setValue(e),t.text){var n={text:t.text,id:t.id};console.log(n),this.$$("_n_f").parse(n),this.$$("_id").define("readonly",!0)}else this.$$("_id").define("readonly",!1);this.$$("_id").refresh(),this.getRoot().show()},t.prototype.hide=function(){this.getRoot().hide()},t.prototype.getValues=function(){return this.getRoot().getBody().getValues()},t}(a.b);t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){function e(e){var t=this.config._params,n=this.$scope.app.config.r_url+"?check"+t.url,o={};o[t.new_name]=e,o.user=this.$scope.app.config.user;var i=Object(s.request)(n,o,!0).response;i=JSON.parse(i);var r=!1;return i.result&&(r=!0),r}var t=this;return{view:"cWindow",modal:!0,on:{onHide:function(){t.$$("_n_f").clear(),t.$$("_n_f").clearValidation()}},body:{view:"form",localId:"_n_f",_params:{},margin:0,rules:{_new_str:e},elements:[{view:"text",label:"Название",value:"",width:320,name:"_new_str",required:!0,placeholder:"Введите новое значение",invalidMessage:"Такое название уже есть"},{cols:[{view:"button",type:"base",label:"Отменить",width:120,click:function(){t.hide()}},{},{view:"button",type:"base",label:"Сохранить",width:120,click:function(){if(t.$$("_n_f").validate({hidden:!1,disabled:!1})){var e=t.$$("_n_f").getValues(),n={},o=t.$$("_n_f").config._params;n[o.new_name]=e._new_str,n.user=t.app.config.user,n.id_spr=!!o.id_spr&&o.id_spr;var i=t.app.config.r_url+"?set"+o.url,r=Object(s.request)(i,n,!0).response;r=JSON.parse(r),r.result&&o.callback(r.ret_val),t.hide()}}}]}],on:{onBeforeShow:function(){},onShow:function(){}}}}},t.prototype.show=function(e,t){this.$$("_n_f").config._params=t,this.getRoot().getHead().getChildViews()[0].setValue(e),this.getRoot().show()},t.prototype.hide=function(){this.getRoot().hide()},t.prototype.getValues=function(){return this.getRoot().getBody().getValues()},t}(a.b);t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){function e(e){var t=0;if(isNaN(e)||13!==e.length)return!1;for(var n=0;n<13;n++)t+=Number(e[n])*(n%2*2+1);return!(t%10)}var t=this;return{view:"cWindow",modal:!0,on:{onHide:function(){t.$$("_nbar").setValue(""),t.$$("_n_b").clearValidation()},onShow:function(){var e=t.$$("_n_b").config.id_spr;Object(s.get_bars)(t,e),t.$$("_nbar").setValue(""),t.$$("b_list").clearAll(),t.$$("b_list").parse(s.barcodes)}},body:{view:"form",localId:"_n_b",margin:0,id_spr:NaN,th:NaN,rules:{_new_bar:e},elements:[{rows:[{cols:[{view:"text",label:"Название",value:"",name:"_new_bar",placeholder:"Введите новое значение",localId:"_nbar"},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-plus'></span>",width:30,disabled:!1,on:{},click:function(){if(e(t.$$("_nbar").getValue())){var n={barcode:t.$$("_nbar").getValue()};t.$$("b_list").add(n),t.$$("_nbar").setValue("")}}}]},{cols:[{view:"list",localId:"b_list",width:250,height:350,template:"#barcode#",select:!0,on:{onAfterSelect:function(){var e=this.getSelectedItem();this.$scope.$$("b_code").setValue(e.barcode)},onItemDblClick:function(e){this.remove(e),this.$scope.$$("b_code").setValue("0000000000000")}}},{width:10},{rows:[{view:"barcode",type:"ean13",value:"0000000000000",width:300,name:"_new_",localId:"b_code",hieght:200},{}]}]},{cols:[{view:"button",type:"base",label:"Отменить",width:120,click:function(){t.hide()}},{},{view:"button",type:"base",label:"Применить",width:120,click:function(){t.$$("b_list").selectAll();var e=t.$$("b_list").getSelectedItem(),n="";if(e){void 0===e||c(e);try{e.forEach(function(e,t,o){n+=e.barcode+" "})}catch(t){n=e.barcode}}t.$$("_n_b").config.th.$$("_barc").setValue(n),t.hide()}}]}]}],on:{onBeforeShow:function(){},onShow:function(){}}}}},t.prototype.show=function(e,t,n){this.$$("_n_b").config.id_spr=t,this.$$("_n_b").config.th=n,this.getRoot().getHead().getChildViews()[0].setValue(e),this.getRoot().show()},t.prototype.hide=function(){this.getRoot().hide()},t}(a.b);t.default=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(3),c=n(1),u=n(4),l=n(12),p=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){function e(){var e=$$("__tt").getSelectedItem().id;$$("__tt").remove(e)}var t=this;return{view:"cWindow",width:.8*document.documentElement.clientWidth,height:.8*document.documentElement.clientHeight,modal:!0,on:{onShow:function(){Object(c.get_data)({th:t,view:"__tt",navBar:"__nav_l",start:1,count:20,searchBar:"_link_search",method:"getSprLnks"})},onHide:function(){$$("__tt").clearAll(),$$("_link_search").setValue(""),$$("_break").disable()}},body:{view:"layout",rows:[{rows:[{cols:[{view:"text",label:"",placeholder:"Строка поиска",width:500,id:"_link_search",height:40,keyPressTimeout:900,tooltip:"!слово - исключить из поиска",on:{onTimedKeyPress:function(e,t){var n=this.$scope,o=$$("__tt").config.posPpage;Object(c.get_data)({th:n,view:"__tt",navBar:"__nav_l",start:1,count:o,searchBar:"_link_search",method:"getSprLnks"})}}},{view:"checkbox",labelRight:"Поиск по справочнику",labelWidth:0,value:1},{view:"button",type:"htmlbutton",id:"_break",disabled:!0,label:"<span class='webix_icon fa-unlink'></span><span style='line-height: 20px;'>  Разорвать (Ctrl+D)</span>",width:220,click:function(){$$("__tt").callEvent("onItemDblClick")}}]},{height:10},{view:"treetable",id:"__tt",startPos:1,posPpage:20,totalPos:1250,select:!0,borderless:!0,rowHeight:30,fixedRowHeight:!1,old_stri:" ",columns:[{id:"c_tovar",header:"Наименование",fillspace:!0,template:"<span>{common.treetable()} #c_tovar#</span>"},{id:"c_zavod",header:"Производитель",width:250},{id:"c_vnd",header:"Поставщик",width:200},{id:"id_tovar",header:"Код",width:100},{id:"dt",header:"Дата",width:160},{id:"owner",header:"Создал",width:120}],on:{onBeforeRender:function(){webix.extend(this,webix.ProgressBar),this.count||this.showProgress({type:"icon",icon:'<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>'})},onItemDblClick:function(t,n,o){var i=this.getSelectedItem().$level;if(1===i)"admin"===this.$scope.app.config.user?(t=t.row,t=Object(c.get_spr)(this.$scope,t),t.s_name="Страна: "+t.c_strana,t.t_name="Название товара: "+t.c_tovar,t.v_name="Производитель: "+t.c_zavod,t.dv_name="Действующее вещество: "+t.c_dv,this.$scope.popnew.show("Редактирование записи "+t.id_spr,t)):webix.message({type:"error",text:"Редактирование запрещено"});else if(2===i){var r=$$("__tt").getSelectedItem().id,a={};a.action="return",a.command="?delLnk",a.sh_prc=r,a.type="async",a.callback=e,this.$scope.popunlink.show("Причина разрыва связкии?",a)}},onKeyPress:function(e,t){13===e&&this.callEvent("onItemDblClick")},onBeforeSelect:function(e){},onAfterSelect:function(e){var t=this.getSelectedItem().$level;1===t?$$("_break").disable():2===t&&$$("_break").enable()}}},{view:"toolbar",id:"__nav_l",height:36,cols:[{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-double-left'></span>",width:50,click:function(){var e=$$("__tt").config.posPpage;Object(c.get_data)({th:t,view:"__tt",navBar:"__nav_l",start:1,count:e,searchBar:"_link_search",method:"getSprLnks"})}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-left'></span>",width:50,click:function(){var e=$$("__tt").config.startPos-$$("__tt").config.posPpage;e=e<0?1:e;var n=$$("__tt").config.posPpage;Object(c.get_data)({th:t,view:"__tt",navBar:"__nav_l",start:e,count:n,searchBar:"_link_search",method:"getSprLnks"})}},{view:"label",label:"Страница 1 из 1",width:200},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-right'></span>",width:50,click:function(){var e=$$("__tt").config.startPos+$$("__tt").config.posPpage;e=e>$$("__tt").config.totalPos?Object(c.last_page)("__tt"):e;var n=$$("__tt").config.posPpage;Object(c.get_data)({th:t,view:"__tt",navBar:"__nav_l",start:e,count:n,searchBar:"_link_search",method:"getSprLnks"})}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-double-right'></span>",width:50,click:function(){var e=Object(c.last_page)("__tt"),n=$$("__tt").config.posPpage;Object(c.get_data)({th:t,view:"__tt",navBar:"__nav_l",start:e,count:n,searchBar:"_link_search",method:"getSprLnks"})}},{},{view:"label",label:"Всего записей: 0",width:180}]}]}]}}},t.prototype.show=function(e){this.getRoot().getHead().getChildViews()[0].setValue(e),this.getRoot().show()},t.prototype.hide=function(){this.getRoot().hide()},t.prototype.init=function(){this.popnew=this.ui(s.default),this.popconfirm=this.ui(u.default),this.popunlink=this.ui(l.default)},t}(a.b);t.default=p},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){function e(e,t){var n=e.getRoot().getBody().config._params,o=n.sh_prc,i=e.app.config.user,r=e.app.config.r_url+n.command,a=n.type,c=t,u=n.callback,l={user:i,sh_prc:o,action:c};e.hide(),"sync"===a?console.log("sync"):Object(s.request)(r,l).then(function(e){e=e.json(),e.result?u?u(e):console.log("ecall",e):webix.message("error")})}var t=this;return{view:"cWindow",modal:!0,body:{view:"form",margin:0,_params:{},elements:[{view:"label",label:"Причина разрыва связкии",height:44,align:"center"},{cols:[{view:"button",type:"base",label:"Ошибка",width:120,height:44,click:function(){e(t,"return")}},{},{view:"button",type:"base",label:"Устарела",width:120,height:44,disabled:!0,on:{onAfterRender:function(){"admin"===this.$scope.app.config.user&&this.enable()}},click:function(){e(t,"delete")}}]}],on:{onBeforeShow:function(){},onShow:function(){}}}}},t.prototype.show=function(e,t){this.getRoot().getHead().getChildViews()[0].setValue("Подтвердите действие"),t&&(this.getRoot().getBody().config._params=t),this.getRoot().getBody().getChildViews()[0].setValue(e),this.getRoot().show()},t.prototype.hide=function(){this.getRoot().hide()},t.prototype.getValues=function(){return this.getRoot().getBody().getValues()},t}(a.b);t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){var e=this,t={view:"datatable",id:"__unl",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,headermenu:!0,old_stri:"",columns:[{id:"id_tovar",width:100,sort:"int",header:[{text:"ID у поставщика"}]},{id:"c_tovar",fillspace:1,sort:"text",header:[{text:"Название"}]},{id:"c_zavod",sort:"text",width:300,header:[{text:"Производитель"}]}],on:{onItemDblClick:function(t){$$("prcs_dc").setCursor(t.row),Object(s.parse_unlinked_item)(e),e.getRoot().hide()},onKeyPress:function(e,t){13===e&&this.callEvent("onItemDblClick")},onBeforeSelect:function(){}}};return{view:"cWindow",width:.8*document.documentElement.clientWidth,height:.8*document.documentElement.clientHeight,modal:!0,on:{onShow:function(){$$("__unl").clearAll(),$$("__unl").parse($$("prcs_dc"))}},body:t}},t.prototype.show=function(e){this.getRoot().getHead().getChildViews()[0].setValue(e),this.getRoot().show()},t.prototype.hide=function(){this.getRoot().hide()},t}(a.b);t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(4),u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){function e(){var e=$$("__dt_s").getSelectedId();$$("__dt_s").remove(e)}var t=this,n={height:40,cols:[{view:"text",label:"",value:"",labelWidth:1,placeholder:"Строка поиска",id:"_search_skip",keyPressTimeout:900,tooltip:"!слово - исключить из поиска, +слово - поиск в названии производителя",on:{onTimedKeyPress:function(e,n){var o=$$("__dt_s").config.posPpage;Object(s.get_data)({th:t,view:"__dt_s",navBar:"__nav_s",start:1,count:o,searchBar:"_search_skip",method:"getPrcsSkip"})}}}]},o={view:"toolbar",id:"__nav_s",height:36,cols:[{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-double-left'></span>",width:50,click:function(){var e=$$("__dt_s").config.posPpage;Object(s.get_data)({th:t,view:"__dt_s",navBar:"__nav_s",start:1,count:e,searchBar:"_search_skip",method:"getPrcsSkip"})}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-left'></span>",width:50,click:function(){var e=$$("__dt_s").config.startPos-$$("__dt_s").config.posPpage;e=e<0?1:e;var n=$$("__dt_s").config.posPpage;Object(s.get_data)({th:t,view:"__dt_s",navBar:"__nav_s",start:e,count:n,searchBar:"_search_skip",method:"getPrcsSkip"})}},{view:"label",label:"Страница 1 из 1",width:200,id:"__pager_s"},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-right'></span>",width:50,click:function(){var e=$$("__dt_s").config.startPos+$$("__dt_s").config.posPpage;e=e>$$("__dt_s").config.totalPos?Object(s.last_page)("__dt_s"):e;var n=$$("__dt_s").config.posPpage;Object(s.get_data)({th:t,view:"__dt_s",navBar:"__nav_s",start:e,count:n,searchBar:"_search_skip",method:"getPrcsSkip"})}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-double-right'></span>",width:50,click:function(){var e=Object(s.last_page)("__dt_s"),n=$$("__dt_s").config.posPpage;Object(s.get_data)({th:t,view:"__dt_s",navBar:"__nav_s",start:e,count:n,searchBar:"_search_skip",method:"getPrcsSkip"})}},{},{view:"label",label:"Всего записей: 0",width:180,id:"__count_s"}]},i={view:"datatable",id:"__dt_s",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,headermenu:!0,startPos:1,posPpage:20,totalPos:1250,old_stri:" ",columns:[{id:"id_tovar",width:80,sort:"int",header:[{text:"ID товара"}]},{id:"c_tovar",fillspace:1,sort:"text",header:[{text:"Название"}]},{id:"c_zavod",sort:"text",width:300,header:[{text:"Производитель"}]}],on:{"data->onParse":function(e,t){this.clearAll()},onBeforeRender:function(){webix.extend(this,webix.ProgressBar),this.count||this.showProgress({type:"icon",icon:'<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>'})},onItemDblClick:function(t){if("admin"===this.$scope.app.config.user){var n=this.getSelectedItem().sh_prc,o={};o.command="?returnLnk",o.sh_prc=n,o.type="async",o.callback=e,this.$scope.popconfirm.show("Вернуть на сведение?",o)}},onKeyPress:function(e,t){13===e&&this.callEvent("onItemDblClick")},onAfterLoad:function(){this.hideProgress()},onBeforeSelect:function(){}}};return{view:"cWindow",width:.8*document.documentElement.clientWidth,height:.8*document.documentElement.clientHeight,modal:!0,on:{onShow:function(){Object(s.get_data)({th:t,view:"__dt_s",navBar:"__nav_s",start:1,count:$$("__dt_s").config.posPpage,searchBar:"_search_skip",method:"getPrcsSkip"})}},body:{view:"layout",rows:[n,i,o]}}},t.prototype.show=function(e){this.getRoot().getHead().getChildViews()[0].setValue(e),this.getRoot().show()},t.prototype.hide=function(){this.getRoot().hide()},t.prototype.init=function(){this.popconfirm=this.ui(c.default)},t}(a.b);t.default=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(3),c=n(1),u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){function e(e){var t=e.id_mnn;return t=0!=+t?"<div> <span class='green'>есть</span></div>":"<div> <span class='red'>нет</span></div>"}var t=this,n={view:"toolbar",id:"__nav",height:36,cols:[{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-double-left'></span>",width:50,click:function(){var e=$$("__dt").config.posPpage;Object(c.get_data)({th:t,view:"__dt",navBar:"__nav",start:1,count:e,searchBar:"_spr_search",method:"getSprSearch"})}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-left'></span>",width:50,click:function(){var e=$$("__dt").config.startPos-$$("__dt").config.posPpage;e=e<0?1:e;var n=$$("__dt").config.posPpage;Object(c.get_data)({th:t,view:"__dt",navBar:"__nav",start:e,count:n,searchBar:"_spr_search",method:"getSprSearch"})}},{view:"label",label:"Страница 1 из 1",width:200,id:"__pager"},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-right'></span>",width:50,click:function(){var e=$$("__dt").config.startPos+$$("__dt").config.posPpage;e=e>$$("__dt").config.totalPos?Object(c.last_page)("__dt"):e;var n=$$("__dt").config.posPpage;Object(c.get_data)({th:t,view:"__dt",navBar:"__nav",start:e,count:n,searchBar:"_spr_search",method:"getSprSearch"})}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-double-right'></span>",width:50,click:function(){var e=Object(c.last_page)("__dt"),n=$$("__dt").config.posPpage;Object(c.get_data)({th:t,view:"__dt",navBar:"__nav",start:e,count:n,searchBar:"_spr_search",method:"getSprSearch"})}},{},{view:"label",label:"Всего записей: 0",width:180,id:"__count"}]};return{view:"layout",rows:[{view:"datatable",id:"__dt",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,headermenu:!0,startPos:1,posPpage:20,totalPos:1250,old_stri:"",columns:[{id:"id_mnn",width:75,template:e,header:[{text:"МНН"}]},{id:"id_spr",width:80,header:[{text:"IDSPR"}]},{id:"c_tovar",fillspace:1,sort:"text",header:[{text:"Название"}]},{id:"id_zavod",width:400,header:[{text:"Производитель"}]},{id:"id_strana",width:250,header:[{text:"Страна"}]}],on:{"data->onParse":function(e,t){this.clearAll(),$$("_link").disable()},onBeforeRender:function(){webix.extend(this,webix.ProgressBar),this.count||this.showProgress({type:"icon",icon:'<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>'})},onItemDblClick:function(e){e=this.getSelectedItem(),e=e.id_spr,e=Object(c.get_spr)(this.$scope,e),e.s_name="Страна: "+e.c_strana,e.t_name="Название товара: "+e.c_tovar,e.v_name="Производитель: "+e.c_zavod,e.dv_name="Действующее вещество: "+e.c_dv,this.$scope.popnew.show("Редактирование записи "+e.id_spr,e)},onAfterLoad:function(){this.hideProgress()},onBeforeSelect:function(){$$("_link").enable()},onKeyPress:function(e,t){13===e&&this.callEvent("onItemDblClick")}}},n]}},t.prototype.init=function(){this.popnew=this.ui(s.default)},t}(a.b);t.default=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){return{view:"toolbar",css:"header",cols:[{view:"label",label:"Вы находитесь на сервере:   saas",css:"ms-logo-text",height:36},{},{view:"button",type:"htmlbutton",width:32,label:"<span class='webix_icon fa-info', style='color: #666666;'></span>"}]}},t}(a.b);t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(18),c=n(19),u=n(20),l=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){return{view:"layout",rows:[{height:10},{margin:10,cols:[{$subview:u.default,name:"gr_right"},{$subview:s.default,name:"gr_center"},{$subview:c.default,name:"gr_left"}]}]}},t}(a.b);t.default=l},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){return{rows:[{view:"toolbar",cols:[{view:"label",label:"Содержание группы"}]},{view:"toolbar",cols:[{view:"label",label:"Группа не выбрана"},{},{view:"button",type:"form",label:"Новая",width:100}]},{view:"datatable",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,footer:!0,headermenu:!0,columns:[{id:"idspr",sort:"int",width:75,header:[{text:"IDSPR"}]},{id:"mnn",fillspace:1,sort:"text",header:[{text:"Товар"}]},{id:"idspr",width:120,sort:"text",header:[{text:"Производитель"}]},{id:"name",width:100,sort:"text",header:[{text:"Страна"}]}]}]}},t}(a.b);t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){return{rows:[{view:"toolbar",cols:[{view:"label",label:"Группы"}]},{view:"toolbar",cols:[{view:"text",value:""}]},{view:"datatable",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,footer:!0,headermenu:!0,columns:[{id:"idspr",sort:"int",width:75,header:[{text:"IDSPR"}]},{id:"mnn",fillspace:1,sort:"text",header:[{text:"Товар"}]},{id:"name",width:120,sort:"text",header:[{text:"Страна"}]}]}]}},t}(a.b);t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){return{rows:[{view:"toolbar",cols:[{view:"label",label:"Не сведенные"}]},{view:"toolbar",cols:[{view:"text",value:""}]},{view:"datatable",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,footer:!0,headermenu:!0,columns:[{id:"idspr",sort:"int",width:75,header:[{text:"IDSPR"}]},{id:"mnn",fillspace:1,sort:"text",header:[{text:"Товар"}]},{id:"idspr",width:120,sort:"text",header:[{text:"Производитель"}]},{id:"name",width:100,sort:"text",header:[{text:"Страна"}]}]}]}},t}(a.b);t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){return{rows:[{view:"toolbar",height:40,cols:[{view:"label",label:"Общий поиск"},{},{view:"button",type:"form",label:"Проверка групп",width:180,click:function(){}},{view:"button",type:"form",label:"Добавить эталон",width:220},{view:"button",type:"form",label:"Линки",width:140},{view:"button",type:"form",label:"Штрихкоды",width:180}]}]}},t.prototype.init=function(){},t}(a.b);t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){var e=this;return{view:"toolbar",css:"header",cols:[{view:"label",label:"<a href='http://ms71.org'><span class='ms-logo', style='background-image: url(addons/img/ms_logo.jpg);'></span></a>",width:44,align:"center",height:36},{view:"label",label:"Манускрипт солюшн: linker | "+this.app.config.user,css:"ms-logo-text",height:36,width:550},{},{view:"button",id:"_adm",css:"butt",type:"htmlbutton",label:"<span class = 'butt'>Админка</span>",width:120,click:function(){e.app.show("/start/adm/adm-users")}},{view:"button",id:"_merge",css:"butt",type:"htmlbutton",label:"<span class='butt'>Merger</span>",width:80,click:function(){e.app.show("/start/body")}},{view:"button",id:"_exit",css:"butt",type:"htmlbutton",label:"<span class='butt'>Выйти</span>",width:80,click:function(){webix.message({text:"exit",type:"debug"})}}]}},t}(a.b);t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=e.getChildViews(),o=n,r=Array.isArray(o),a=0,o=r?o:o[Symbol.iterator]();;){var s;if(r){if(a>=o.length)break;s=o[a++]}else{if(a=o.next(),a.done)break;s=a.value}var c=s,u=c;if(u.config.localId===t)return u;if(u=i(u,t))return u}return null}n.d(t,"a",function(){return r});var r=function(){function e(){o(this,e),this._id=webix.uid(),this._events=[],this._subs={}}return e.prototype.getRoot=function(){return this._root},e.prototype.destructor=function(){for(var e=this._events,t=e.length-1;t>=0;t--)e[t].obj.detachEvent(e[t].id);for(var n in this._subs){var o=this._subs[n].view;o&&o.destructor()}this._events=this._container=this._app=this._parent=null},e.prototype.render=function(e,t,n){var o=this;this._parent=n,t&&(this._index=t[0].index),e=e||document.body;var i="string"==typeof e?webix.toNode(e):e;return this._container!==i?(this._container=i,this._render(t).then(function(){return o.getRoot()})):this._urlChange(t).then(function(){return o.getRoot()})},e.prototype.getIndex=function(){return this._index},e.prototype.getId=function(){return this._id},e.prototype.getParentView=function(){return this._parent},e.prototype.$$=function(e){var t=webix.$$(e);return t||(t=i(this.getRoot(),e)),t},e.prototype.on=function(e,t,n){var o=e.attachEvent(t,n);return this._events.push({obj:e,id:o}),o},e.prototype.contains=function(e){for(var t in this._subs){var n=this._subs[t].view;if(n===e||n.contains(e))return!0}return!1},e.prototype.getSubView=function(e){var t=this._subs[e||"default"];return t?{subview:t,parent:this}:this._parent?this._parent.getSubView(e):null},e.prototype.getName=function(){return this._name},e}()},function(e,t,n){"use strict";function o(e){"/"===e[0]&&(e=e.substr(1));for(var t=e.split("/"),n=[],o=0;o<t.length;o++){var i=t[o],r={},a=i.indexOf(":");if(-1===a&&(a=i.indexOf("?")),-1!==a)for(var s=i.substr(a+1).split(/[\:\?\&]/g),c=s,u=Array.isArray(c),l=0,c=u?c:c[Symbol.iterator]();;){var p;if(u){if(l>=c.length)break;p=c[l++]}else{if(l=c.next(),l.done)break;p=l.value}var f=p,h=f.split("=");r[h[0]]=h[1]}n[o]={page:a>-1?i.substr(0,a):i,params:r,index:o+1}}return n}function i(e){for(var t=[],n=e,o=Array.isArray(n),i=0,n=o?n:n[Symbol.iterator]();;){var a;if(o){if(i>=n.length)break;a=n[i++]}else{if(i=n.next(),i.done)break;a=i.value}var s=a;t.push("/"+s.page);var c=r(s.params);c&&t.push(":"+c)}return t.join("")}function r(e){var t=[];for(var n in e)t.length&&t.push(":"),t.push(n+"="+e[n]);return t.join("")}t.a=o,t.b=i},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return a});var i=n(44),r=n.n(i),a=function(){function e(t,n){var i=this;o(this,e),this.config=n||{},this._prefix=this.config.routerPrefix,void 0===this._prefix&&(this._prefix="!");var a=function(e){};r()(this._prefix+"*",function(e){return i._lastUrl="",a(i.get())}),a=t}return e.prototype.set=function(e,t){if(this.config.routes){var n=e.split("?",2);for(var o in this.config.routes)if(this.config.routes[o]===n[0]){e=o+(n.length>1?"?"+n[1]:"");break}}this._lastUrl=e,r.a.navigate(this._prefix+e,t)},e.prototype.get=function(){var e=this._lastUrl||(window.location.hash||"").replace("#"+this._prefix,"");if(this.config.routes){var t=e.split("?",2),n=this.config.routes[t[0]];n&&(e=n+(t.length>1?"?"+t[1]:""))}return e},e}()},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(7),c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){return{view:"layout",css:"margin-zero",rows:[{$subview:s.default,name:"top_menu"},{$subview:!0}]}},t.prototype.ready=function(e){},t}(a.b);t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){var e=this,t={view:"datatable",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,headermenu:!0,startPos:1,posPpage:20,totalPos:1250,old_stri:"",columns:[{id:"id",width:75,header:[{text:"ID"}]},{id:"c_user",fillspace:1,sort:"text",header:[{text:"Штрихкоды"}]},{id:"id_state",width:150,header:[{text:"Статус"}]},{id:"dt",width:250,header:[{text:"Дата заведения"}]}],on:{onBeforeRender:function(){},onItemDblClick:function(e){e=this.getSelectedItem(),this.$scope.popnewuser.show("Редактирование пользователя",e)},onAfterLoad:function(){},onBeforeSelect:function(){e.$$("_del").enable()},onKeyPress:function(e,t){13===e&&this.callEvent("onItemDblClick")}},data:[{id:1,c_user:"admin",id_group:"adm",id_role:"adm",id_state:"active",dt:"01-01-2016"},{id:2,c_user:"not admin",id_group:"user",id_role:"user",id_state:"active",dt:"01-01-2016"},{id:3,c_user:"not admin 1",id_group:"user",id_role:"user",id_state:"inactive",dt:"01-01-2016"}]};return{view:"layout",rows:[{height:40,cols:[{view:"text",label:"",value:"",labelWidth:1,placeholder:"Строка поиска",keyPressTimeout:900,tooltip:"!слово - исключить из поиска, +слово - поиск в названии производителя",on:{onTimedKeyPress:function(e,t){}}},{view:"button",type:"htmlbutton",disabled:!1,label:"<span class='webix_icon fa-user-plus'></span><span style='line-height: 20px;'> Добавить</span>",width:140,click:function(){e.popnewuser.show("Добавление пользователя"),webix.message({text:"Добавление пользователя",type:"debug"})}},{view:"button",type:"htmlbutton",disabled:!0,localId:"_del",label:"<span class='webix_icon fa-user-times'></span><span style='line-height: 20px;'> Удалить</span>",width:140,click:function(){webix.message({text:"Удаление пользователя",type:"debug"})}}]},t]}},t.prototype.init=function(){this.popnewuser=this.ui(s.default)},t}(a.b);t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(1),u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){var e=this,t={view:"datatable",localId:"__dtc",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,headermenu:!0,startPos:1,posPpage:20,totalPos:1250,old_stri:"",columns:[{id:"id",width:75,header:[{text:"ID"}]},{id:"c_strana",fillspace:1,sort:"text",header:[{text:"Страна"}]},{id:"id_state",width:150,header:[{text:"Статус"}]},{id:"dt",width:250,header:[{text:"Дата заведения"}]}],on:{onBeforeRender:function(){},onItemDblClick:function(e){e=this.getSelectedItem(),this.$scope.popnewuser.show("Редактирование пользователя",e)},onAfterLoad:function(){},onBeforeSelect:function(){e.$$("_del").enable()},onKeyPress:function(e,t){13===e&&this.callEvent("onItemDblClick")}}};return{view:"layout",rows:[{height:40,cols:[{view:"text",label:"",value:"",labelWidth:1,placeholder:"Строка поиска",keyPressTimeout:900,tooltip:"!слово - исключить из поиска, +слово - поиск в названии производителя",on:{onTimedKeyPress:function(e,t){}}},{view:"button",type:"htmlbutton",disabled:!1,label:"<span class='webix_icon fa-user-plus'></span><span style='line-height: 20px;'> Добавить</span>",width:140,click:function(){e.popnewuser.show("Добавление пользователя"),webix.message({text:"Добавление пользователя",type:"debug"})}},{view:"button",type:"htmlbutton",disabled:!0,localId:"_del",label:"<span class='webix_icon fa-user-times'></span><span style='line-height: 20px;'> Удалить</span>",width:140,click:function(){webix.message({text:"Удаление пользователя",type:"debug"})}}]},t]}},t.prototype.init=function(){this.popnewuser=this.ui(s.default),this.$$("__dtc").sync(c.strana.data)},t}(a.b);t.default=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(1),u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){var e=this,t={view:"datatable",localId:"__dtd",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,headermenu:!0,startPos:1,posPpage:20,totalPos:1250,old_stri:"",columns:[{id:"id",width:75,header:[{text:"ID"}]},{id:"act_ingr",fillspace:1,sort:"text",header:[{text:"Действующее вещество"}]},{id:"id_state",width:150,header:[{text:"Статус"}]},{id:"dt",width:250,header:[{text:"Дата заведения"}]}],on:{onBeforeRender:function(){},onItemDblClick:function(e){e=this.getSelectedItem(),this.$scope.popnewuser.show("Редактирование пользователя",e)},onAfterLoad:function(){},onBeforeSelect:function(){e.$$("_del").enable()},onKeyPress:function(e,t){13===e&&this.callEvent("onItemDblClick")}}};return{view:"layout",rows:[{height:40,cols:[{view:"text",label:"",value:"",labelWidth:1,placeholder:"Строка поиска",keyPressTimeout:900,tooltip:"!слово - исключить из поиска, +слово - поиск в названии производителя",on:{onTimedKeyPress:function(e,t){}}},{view:"button",type:"htmlbutton",disabled:!1,label:"<span class='webix_icon fa-user-plus'></span><span style='line-height: 20px;'> Добавить</span>",width:140,click:function(){e.popnewuser.show("Добавление пользователя"),webix.message({text:"Добавление пользователя",type:"debug"})}},{view:"button",type:"htmlbutton",disabled:!0,localId:"_del",label:"<span class='webix_icon fa-user-times'></span><span style='line-height: 20px;'> Удалить</span>",width:140,click:function(){webix.message({text:"Удаление пользователя",type:"debug"})}}]},t]}},t.prototype.init=function(){this.popnewuser=this.ui(s.default),this.$$("__dtd").sync(c.dv.data)},t}(a.b);t.default=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){var e=this,t={view:"datatable",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,headermenu:!0,startPos:1,posPpage:20,totalPos:1250,old_stri:"",columns:[{id:"id",width:75,header:[{text:"ID"}]},{id:"c_user",fillspace:1,sort:"text",header:[{text:"Группа"}]},{id:"id_state",width:150,header:[{text:"Статус"}]},{id:"dt",width:250,header:[{text:"Дата заведения"}]}],on:{onBeforeRender:function(){},onItemDblClick:function(e){e=this.getSelectedItem(),this.$scope.popnewuser.show("Редактирование пользователя",e)},onAfterLoad:function(){},onBeforeSelect:function(){e.$$("_del").enable()},onKeyPress:function(e,t){13===e&&this.callEvent("onItemDblClick")}},data:[{id:1,c_user:"admin",id_group:"adm",id_role:"adm",id_state:"active",dt:"01-01-2016"},{id:2,c_user:"not admin",id_group:"user",id_role:"user",id_state:"active",dt:"01-01-2016"},{id:3,c_user:"not admin 1",id_group:"user",id_role:"user",id_state:"inactive",dt:"01-01-2016"}]};return{view:"layout",rows:[{height:40,cols:[{view:"text",label:"",value:"",labelWidth:1,placeholder:"Строка поиска",keyPressTimeout:900,tooltip:"!слово - исключить из поиска, +слово - поиск в названии производителя",on:{onTimedKeyPress:function(e,t){}}},{view:"button",type:"htmlbutton",disabled:!1,label:"<span class='webix_icon fa-user-plus'></span><span style='line-height: 20px;'> Добавить</span>",width:140,click:function(){e.popnewuser.show("Добавление пользователя"),webix.message({text:"Добавление пользователя",type:"debug"})}},{view:"button",type:"htmlbutton",disabled:!0,localId:"_del",label:"<span class='webix_icon fa-user-times'></span><span style='line-height: 20px;'> Удалить</span>",width:140,click:function(){webix.message({text:"Удаление пользователя",type:"debug"})}}]},t]}},t.prototype.init=function(){this.popnewuser=this.ui(s.default)},t}(a.b);t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(8),u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){var e=this,t={view:"datatable",localId:"__dth",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,headermenu:!0,startPos:1,posPpage:20,totalPos:1250,old_stri:"",columns:[{id:"id",width:75,header:[{text:"ID"}]},{id:"usloviya",fillspace:1,sort:"text",header:[{text:"Условия хранения"}]},{id:"id_state",width:150,header:[{text:"Статус"}]},{id:"dt",width:250,header:[{text:"Дата заведения"}]}],on:{onBeforeRender:function(){this.count||this.showProgress({type:"icon",icon:'<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>'})},onItemDblClick:function(e){e=this.getSelectedItem(),console.log(e);var t={text:e.usloviya,id:e.id,type:"Hran",callback:s.updHran,mode:"upd",source:this};this.$scope.popnew.show("Редактирование условия хранения",t)},onAfterLoad:function(){this.hideProgress()},onBeforeSelect:function(){e.$$("_del").enable()},onKeyPress:function(e,t){13===e&&this.callEvent("onItemDblClick")}}};return{view:"layout",rows:[{height:40,cols:[{view:"text",label:"",value:"",labelWidth:1,placeholder:"Строка поиска",keyPressTimeout:900,tooltip:"поиск по условиям хранения",on:{onTimedKeyPress:function(e,t){var n=this.getValue().toString().toLowerCase();this.$scope.$$("__dth").filter(function(e){return-1!=e.usloviya.toString().toLowerCase().indexOf(n)})}}},{view:"button",type:"htmlbutton",disabled:!1,label:"<span class='webix_icon fa-plus'></span><span style='line-height: 20px;'> Добавить</span>",width:140,click:function(){var t={type:"Hran",callback:s.addHran,mode:"new",source:e.$$("__dth")};e.popnew.show("Добавление условия хранения",t),webix.message({text:"Добавление",type:"debug"})}},{view:"button",type:"htmlbutton",disabled:!0,localId:"_del",label:"<span style='color: red', class='webix_icon fa-times'></span><span style='line-height: 20px;'> Удалить</span>",width:140,click:function(){var t=e.$$("__dth").getSelectedItem().id;console.log(t);var n={};n.user=e.app.config.user,n.id=t;var o=e.app.config.r_url+"?delHran",i=Object(s.request)(o,n,!0).response;i=JSON.parse(i),i.result?Object(s.delHran)(i.ret_val.id):webix.message({text:i.ret_val,type:"debug"})}}]},t]}},t.prototype.init=function(){this.popnew=this.ui(c.default),webix.extend(this.$$("__dth"),webix.ProgressBar),this.$$("__dth").sync(s.hran.data)},t}(a.b);t.default=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(1),u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){var e=this,t={view:"datatable",localId:"__dts",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,headermenu:!0,startPos:1,posPpage:20,totalPos:1250,old_stri:"",columns:[{id:"id",width:75,header:[{text:"ID"}]},{id:"sezon",fillspace:1,sort:"text",header:[{text:"Сезон"}]},{id:"id_state",width:150,header:[{text:"Статус"}]},{id:"dt",width:250,header:[{text:"Дата заведения"}]}],on:{onBeforeRender:function(){},onItemDblClick:function(e){e=this.getSelectedItem(),this.$scope.popnewuser.show("Редактирование пользователя",e)},onAfterLoad:function(){},onBeforeSelect:function(){e.$$("_del").enable()},onKeyPress:function(e,t){13===e&&this.callEvent("onItemDblClick")}}};return{view:"layout",rows:[{height:40,cols:[{view:"text",label:"",value:"",labelWidth:1,placeholder:"Строка поиска",keyPressTimeout:900,tooltip:"!слово - исключить из поиска, +слово - поиск в названии производителя",on:{onTimedKeyPress:function(e,t){}}},{view:"button",type:"htmlbutton",disabled:!1,label:"<span class='webix_icon fa-user-plus'></span><span style='line-height: 20px;'> Добавить</span>",width:140,click:function(){e.popnewuser.show("Добавление пользователя"),webix.message({text:"Добавление пользователя",type:"debug"})}},{view:"button",type:"htmlbutton",disabled:!0,localId:"_del",label:"<span class='webix_icon fa-user-times'></span><span style='line-height: 20px;'> Удалить</span>",width:140,click:function(){webix.message({text:"Удаление пользователя",type:"debug"})}}]},t]}},t.prototype.init=function(){this.popnewuser=this.ui(s.default),this.$$("__dts").sync(c.sezon.data)},t}(a.b);t.default=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(1),u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){var e=this,t={view:"datatable",localId:"__dtu",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,headermenu:!0,startPos:1,posPpage:20,totalPos:1250,old_stri:"",columns:[{id:"id",width:75,header:[{text:"ID"}]},{id:"c_user",fillspace:1,sort:"text",header:[{text:"Пользователь"}]},{id:"id_group",width:170,header:[{text:"Группа"}]},{id:"id_role",width:170,header:[{text:"Роль пользователя"}]},{id:"id_state",width:150,header:[{text:"Статус"}]},{id:"dt",width:250,header:[{text:"Дата заведения"}]}],on:{onBeforeRender:function(){webix.extend(this,webix.ProgressBar),this.count||this.showProgress({type:"icon",icon:'<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>'})},onItemDblClick:function(e){e=this.getSelectedItem(),this.$scope.popnewuser.show("Редактирование пользователя",e)},onAfterLoad:function(){this.hideProgress()},onBeforeSelect:function(){e.$$("_del").enable()},onKeyPress:function(e,t){13===e&&this.callEvent("onItemDblClick")}}};return{view:"layout",rows:[{height:40,cols:[{view:"text",label:"",value:"",labelWidth:1,placeholder:"Строка поиска",keyPressTimeout:900,tooltip:"!слово - исключить из поиска",on:{onTimedKeyPress:function(e,t){}}},{view:"button",type:"htmlbutton",disabled:!1,label:"<span class='webix_icon fa-user-plus'></span><span style='line-height: 20px;'> Добавить</span>",width:140,click:function(){e.popnewuser.show("Добавление пользователя"),webix.message({text:"Добавление пользователя",type:"debug"})}},{view:"button",type:"htmlbutton",disabled:!0,localId:"_del",label:"<span class='webix_icon fa-user-times'></span><span style='line-height: 20px;'> Удалить</span>",width:140,click:function(){webix.message({text:"Удаление пользователя",type:"debug"})}}]},t]}},t.prototype.init=function(){this.popnewuser=this.ui(s.default);var e=this.$$("__dtu");e.clearAll();var t=this.app.config.user,n=this.app.config.r_url+"?getUsersAll",o={user:t};Object(c.request)(n,o).then(function(t){t=t.json(),t.result?(t=t.ret_val,e.parse(t)):webix.message("error")})},t}(a.b);t.default=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(1),u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){var e=this,t={view:"datatable",localId:"__dtv",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,headermenu:!0,startPos:1,posPpage:20,totalPos:1250,old_stri:"",columns:[{id:"id",width:75,header:[{text:"ID"}]},{id:"c_zavod",fillspace:1,sort:"text",header:[{text:"Производитель"}]},{id:"id_state",width:150,header:[{text:"Статус"}]},{id:"dt",width:250,header:[{text:"Дата заведения"}]}],on:{onBeforeRender:function(){},onItemDblClick:function(e){e=this.getSelectedItem(),this.$scope.popnewuser.show("Редактирование пользователя",e)},onAfterLoad:function(){},onBeforeSelect:function(){e.$$("_del").enable()},onKeyPress:function(e,t){13===e&&this.callEvent("onItemDblClick")}}};return{view:"layout",rows:[{height:40,cols:[{view:"text",label:"",value:"",labelWidth:1,placeholder:"Строка поиска",keyPressTimeout:900,tooltip:"!слово - исключить из поиска, +слово - поиск в названии производителя",on:{onTimedKeyPress:function(e,t){}}},{view:"button",type:"htmlbutton",disabled:!1,label:"<span class='webix_icon fa-user-plus'></span><span style='line-height: 20px;'> Добавить</span>",width:140,click:function(){e.popnewuser.show("Добавление пользователя"),webix.message({text:"Добавление пользователя",type:"debug"})}},{view:"button",type:"htmlbutton",disabled:!0,localId:"_del",label:"<span class='webix_icon fa-user-times'></span><span style='line-height: 20px;'> Удалить</span>",width:140,click:function(){webix.message({text:"Удаление пользователя",type:"debug"})}}]},t]}},t.prototype.init=function(){this.popnewuser=this.ui(s.default),this.$$("__dtv").sync(c.vendor.data)},t}(a.b);t.default=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(6),c=n(15),u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){return{view:"layout",css:"margin-zero",rows:[{$subview:s.default,name:"top_menu"},{$subview:c.default,name:"spr_dt"}]}},t.prototype.ready=function(e){},t}(a.b);t.default=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=(n(6),n(21)),c=n(17),u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){return{view:"layout",css:"margin-zero",rows:[{$subview:s.default,name:"gr_top"},{$subview:c.default,name:"gr_spr"}]}},t.prototype.ready=function(e){},t}(a.b);t.default=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(22),c=n(16),u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return r(t,e),t.prototype.config=function(){return{type:"line",id:"main_ui",rows:[{$subview:s.default},{$subview:!0},{$subview:c.default}]}},t.prototype.init=function(){},t}(a.b);t.default=u},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(40),i=(n.n(o),n(0)),r=n(1);webix.ready(function(){webix.protoUI({name:"cWindow",defaults:{modal:!1,move:!0,position:"center"},$init:function(e){webix.extend(e,{head:{view:"toolbar",cols:[{view:"label",label:"Название окна"},{view:"button",type:"icon",icon:"times",css:"times",height:26,width:26,click:function(){this.getTopParentView().hide()}}]}})}},webix.ui.window);var e=new i.a({id:"mainApp",name:"linker",version:"2017.334.1230",start:"/start/body",user:"admin",r_url:"http://saas.local/linker_logic",router:i.c,x_api:"api-key",debug:!0});e.render(),Object(r.init_first)(e),webix.attachEvent("onBeforeAjax",function(t,n,o,i,r,a,s){r["x-api-key"]=e.config.x_api}),e.attachEvent("app:error:resolve",function(e,t){window.console.error(t)})})},function(e,t){},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return d});var a=n(23),s=n(5),c=n(42),u=n(43),l=n(25),p=n(24),f=n(45),h=(n.n(f),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),d=function(e){function t(n){o(this,t);var r=i(this,e.call(this));return r.webix=n.webix||webix,r.config=r.webix.extend({name:"App",version:"1.0",start:"/home"},n,!0),r._name=r.config.name,r._services={},webix.extend(r,webix.EventSystem),webix.attachEvent("onClick",function(e){return r.clickHandler(e)}),r}return r(t,e),t.prototype.getService=function(e){var t=this._services[e];return"function"==typeof t&&(t=this._services[e]=t(this)),t},t.prototype.setService=function(e,t){this._services[e]=t},t.prototype.copyConfig=function(e,n,o){if(e.$ui?e={$subview:new c.a(this,"",e)}:e instanceof t&&(e={$subview:e}),e.$subview)return this.addSubView(e,n,o);n=n||(e instanceof Array?[]:{});for(var i in e){var r=e[i];"function"==typeof r&&r.prototype&&r.prototype.config&&(r={$subview:r}),!r||"object"!==(void 0===r?"undefined":h(r))||r instanceof webix.DataCollection?n[i]=r:r instanceof Date?n[i]=new Date(r):n[i]=this.copyConfig(r,r instanceof Array?[]:{},o)}return n},t.prototype.getRouter=function(){return this.$router},t.prototype.clickHandler=function(e){if(e){var t=e.target||e.srcElement;if(t&&t.getAttribute){var n=t.getAttribute("trigger");n&&this.trigger(n);var o=t.getAttribute("route");o&&this.show(o)}}},t.prototype.refresh=function(){var e=this._container;this._view.destructor(),this._view=this._container=null,this.render(e,Object(p.a)(this.getRouter().get()),this._parent)},t.prototype.loadView=function(e){var t=this,o=this.config.views,i=null;try{if(o&&"string"==typeof(i="function"==typeof o?o(e):o[e])&&(e=i,i=null),!i){e=e.replace(/\./g,"/");var r=n(46)("./"+e);r.__esModule&&(r=r.default),i=r}}catch(t){i=this._loadError(e,t)}return i.then||(i=Promise.resolve(i)),i=i.catch(function(n){return t._loadError(e,n)})},t.prototype.createFromURL=function(e,n){var o=this,i=e[0],r=i.page;return n&&n.getName()===r?Promise.resolve(n):this.loadView(i.page).then(function(e){if("function"==typeof e){if(e.prototype&&e.prototype.show)return new e(o,r);e=e()}return e instanceof t||e instanceof s.a?e:e.$ui?new c.a(o,r,e):new u.a(o,r,e)})},t.prototype.show=function(e){var t=this;this.$router.get()!==e&&this.canNavigate(e).then(function(e){t.$router.set(e,{silent:!0}),t._render(e)}).catch(function(){return!1})},t.prototype.canNavigate=function(e,t){var n={url:Object(p.a)(e),redirect:e,confirm:Promise.resolve(!0)};return this.callEvent("app:guard",[e,t||this._view,n])?n.confirm.then(function(){return n.redirect}):Promise.reject("")},t.prototype.destructor=function(){this._view.destructor()},t.prototype.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];this.apply(e,n)},t.prototype.apply=function(e,t){this.callEvent(e,t)},t.prototype.action=function(e){return this.webix.bind(function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];this.apply(e,n)},this)},t.prototype.on=function(e,t){this.attachEvent(e,t)},t.prototype.use=function(e,t){e(this,null,t)},t.prototype.error=function(e,t){this.callEvent(e,t),this.callEvent("app:error",t),this.config.debug&&t[0]&&console.error(t[0])},t.prototype._render=function(e){var t=this;!this.$router&&(e=this._first_start(e));var n="string"==typeof e?e:Object(p.b)(e);return this.canNavigate(n).then(function(e){return t.$router.set(e,{silent:!0}),t._render_stage(e)})},t.prototype._render_stage=function(e){var t=this,n="string"==typeof e?Object(p.a)(e):e;return webix.ui.freeze(function(){return t.createFromURL(n,t._view).then(function(e){var o=t._view;return t._view=e,e.render(t._container,n,t._parent).then(function(i){return o&&o!==t._view&&o.destructor(),t._view.getRoot().getParentView()&&(t._container=i),t._root=i,t.callEvent("app:route",[n]),e})}).catch(function(e){t.error("app:error:render",[e])})})},t.prototype._urlChange=function(e){return alert("Not implemented"),Promise.resolve(!0)},t.prototype._first_start=function(e){var t=this,n=function(e){return setTimeout(function(){t._render(e)},1)};if(this.$router=new(this.config.router||l.a)(n,this.config),this._container===document.body&&!1!==this.config.animation){var o=this._container;webix.html.addCss(o,"webixappstart"),setTimeout(function(){webix.html.removeCss(o,"webixappstart"),webix.html.addCss(o,"webixapp")},10)}return e&&1!==e.length||(e=this.$router.get()||this.config.start,this.$router.set(e,{silent:!0})),e},t.prototype._loadError=function(e,t){return this.error("app:error:resolve",[t,e]),{template:" "}},t.prototype.addSubView=function(e,t,n){var o=!0!==e.$subview?e.$subview:null,i=e.name||(o?this.webix.uid():"default");t.id=e.id||"s"+this.webix.uid();var r=n[i]={id:t.id,url:o};return r.url instanceof s.a&&(r.view=r.url),t},t}(a.a)},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return s});var a=n(5),s=function(e){function t(n,r,a){o(this,t);var s=i(this,e.call(this,n,r));return s._ui=a,s._windows=[],s}return r(t,e),t.prototype.getRoot=function(){if(this.app.config.jet1xMode){var e=this.getParentView();if(e)return e.getRoot()}return this._root},t.prototype.config=function(){return this._ui.$ui||this._ui},t.prototype.destructor=function(){var t=this._ui.$ondestroy;t&&t();for(var n=this._windows,o=Array.isArray(n),i=0,n=o?n:n[Symbol.iterator]();;){var r;if(o){if(i>=n.length)break;r=n[i++]}else{if(i=n.next(),i.done)break;r=i.value}r.destructor()}e.prototype.destructor.call(this)},t.prototype.show=function(t,n){if(0===t.indexOf("/")||0===t.indexOf("./"))return e.prototype.show.call(this,t,n);e.prototype.show.call(this,"../"+t,n)},t.prototype.init=function(e,t){this.app.config.legacyEarlyInit&&this._realInitHandler(e,t)},t.prototype.ready=function(e,t){this.app.config.legacyEarlyInit||this._realInitHandler(e,t)},t.prototype._realInitHandler=function(e,n){var o=this._ui.$oninit;if(o){var i=this.getRoot();o(i,i.$scope)}var r=this._ui.$onevent;if(r)for(var a in r)this.on(this.app,a,r[a]);var s=this._ui.$windows;if(s)for(var c=s,u=Array.isArray(c),l=0,c=u?c:c[Symbol.iterator]();;){var p;if(u){if(l>=c.length)break;p=c[l++]}else{if(l=c.next(),l.done)break;p=l.value}var f=p;if(f.$ui){var h=new t(this.app,this.getName(),f);h.render(document.body),this._windows.push(h)}else this.ui(f)}},t.prototype._urlChange=function(t){var n=this;return e.prototype._urlChange.call(this,t).then(function(){var e=n._ui.$onurlchange;if(e){var o=n.getRoot();e(t[0].params,t.slice(1),o.$scope)}})},t}(a.a)},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return s});var a=n(5),s=function(e){function t(n,r,a){o(this,t);var s=i(this,e.call(this,n,r));return s._ui=a,s}return r(t,e),t.prototype.config=function(){return this._ui},t}(a.a)},function(e,t,n){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){var n,i=[],r={},a=e.routie,s=function(e,t){this.name=t,this.path=e,this.keys=[],this.fns=[],this.params={},this.regex=c(this.path,this.keys,!1,!1)};s.prototype.addHandler=function(e){this.fns.push(e)},s.prototype.removeHandler=function(e){for(var t=0,n=this.fns.length;t<n;t++){if(e==this.fns[t])return void this.fns.splice(t,1)}},s.prototype.run=function(e){for(var t=0,n=this.fns.length;t<n;t++)if(!1===this.fns[t].apply(this,e))return!1;return!0},s.prototype.match=function(e,t){var n=this.regex.exec(e);if(!n)return!1;for(var o=1,i=n.length;o<i;++o){var r=this.keys[o-1],a="string"==typeof n[o]?decodeURIComponent(n[o]):n[o];r&&(this.params[r.name]=a),t.push(a)}return!0},s.prototype.toURL=function(e){var t=this.path;for(var n in e)t=t.replace("/:"+n,"/"+e[n]);if(t=t.replace(/\/:.*\?/g,"/").replace(/\?/g,""),-1!=t.indexOf(":"))throw new Error("missing parameters for url: "+t);return t};var c=function(e,t,n,o){return e instanceof RegExp?e:(e instanceof Array&&(e="("+e.join("|")+")"),e=e.concat(o?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,n,o,i,r,a){return t.push({name:i,optional:!!a}),n=n||"",(a?"":n)+"(?:"+(a?n:"")+(o||"")+(r||o&&"([^/.]+?)"||"([^/]+?)")+")"+(a||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+e+"$",n?"":"i"))},u=function(e,t){var n=e.split(" "),o=2==n.length?n[0]:null;e=2==n.length?n[1]:n[0],r[e]||(r[e]=new s(e,o),i.push(r[e])),r[e].addHandler(t)},l=function e(t,n){if("function"==typeof n)u(t,n),e.reload();else if("object"==(void 0===t?"undefined":o(t))){for(var i in t)u(i,t[i]);e.reload()}else void 0===n&&e.navigate(t)};l.lookup=function(e,t){for(var n=0,o=i.length;n<o;n++){var r=i[n];if(r.name==e)return r.toURL(t)}},l.remove=function(e,t){var n=r[e];n&&n.removeHandler(t)},l.removeAll=function(){r={},i=[],n=""},l.navigate=function(e,t){t=t||{};var n=t.silent||!1;n&&b(),setTimeout(function(){window.location.hash=e,n&&setTimeout(function(){d()},1)},1)},l.noConflict=function(){return e.routie=a,l};var p=function(){return window.location.hash.substring(1)},f=function(e,t){var n=[];return t.match(e,n)?!1!==t.run(n)?1:0:-1},h=l.reload=function(){for(var e=p(),t=0,o=i.length;t<o;t++){var r=i[t],a=f(e,r);if(1===a){n=e;break}if(0===a){l.navigate(n,{silent:!0});break}}},d=function(){e.addEventListener?e.addEventListener("hashchange",h,!1):e.attachEvent("onhashchange",h)},b=function(){e.removeEventListener?e.removeEventListener("hashchange",h):e.detachEvent("onhashchange",h)};if(d(),n=p(),t)return l;e.routie=l};e.exports=i(window,!0),e.exports.default=e.exports},function(e,t){var n=webix;n.ui.freeze||(n.ui.freeze=function(e){var t=e();return t&&t.then?t.then(function(e){return n.ui.$freeze=!1,n.ui.resize(),e}):(n.ui.$freeze=!1,n.ui.resize()),t})},function(e,t,n){function o(e){return n(i(e))}function i(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./adm":26,"./adm-barcodes":27,"./adm-barcodes.js":27,"./adm-country":28,"./adm-country.js":28,"./adm-dv":29,"./adm-dv.js":29,"./adm-groups":30,"./adm-groups.js":30,"./adm-hran":31,"./adm-hran.js":31,"./adm-seasons":32,"./adm-seasons.js":32,"./adm-top-menu":7,"./adm-top-menu.js":7,"./adm-users":33,"./adm-users.js":33,"./adm-vendors":34,"./adm-vendors.js":34,"./adm.js":26,"./body":35,"./body.js":35,"./footer":16,"./footer.js":16,"./globals":1,"./globals.js":1,"./gr-body":17,"./gr-body.js":17,"./gr-center":18,"./gr-center.js":18,"./gr-left":19,"./gr-left.js":19,"./gr-right":20,"./gr-right.js":20,"./gr-top":21,"./gr-top.js":21,"./grouper":36,"./grouper.js":36,"./header":22,"./header.js":22,"./links_form":11,"./links_form.js":11,"./new_bar":10,"./new_bar.js":10,"./new_form":3,"./new_form.js":3,"./new_prop":8,"./new_prop.js":8,"./new_stri":9,"./new_stri.js":9,"./new_user":2,"./new_user.js":2,"./skipped":14,"./skipped.js":14,"./spr_dt":15,"./spr_dt.js":15,"./start":37,"./start.js":37,"./top-menu":6,"./top-menu.js":6,"./unlink":12,"./unlink.js":12,"./unlinked":13,"./unlinked.js":13,"./yes-no":4,"./yes-no.js":4};o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=46},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return i});var i=function(){function e(t,n){o(this,e),this.name=n.storeName||n.id+":route",this.cb=t}return e.prototype.set=function(e,t){var n=this;webix.storage.session.put(this.name,e),t&&t.silent||setTimeout(function(){return n.cb(e)},1)},e.prototype.get=function(){return webix.storage.session.get(this.name)},e}()},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){function e(t,n){o(this,e),this.cb=t,this.prefix=n.routerPrefix||""}e.prototype.set=function(e,t){var n=this;window.history.pushState(null,null,this.prefix+e),t&&t.silent||setTimeout(function(){return n.cb(e)},1)},e.prototype.get=function(){var e=window.location.pathname.replace(this.prefix,"");return"/"!==e?e:""}}()},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){function e(t,n){o(this,e),this.path="",this.cb=t}e.prototype.set=function(e,t){var n=this;this.path=e,t&&t.silent||setTimeout(function(){return n.cb(e)},1)},e.prototype.get=function(){return this.path}}()},function(e,t,n){"use strict";function o(e,t,n){t.on(e,"app:guard",function(e,o,i){if(o===t||o.contains(t)){var r=n();i.confirm=!1===r?Promise.reject(r):i.confirm.then(function(){return r})}})}t.a=o},function(e,t,n){"use strict";function o(e,t,o){o=o||{};var i=o.storage,a=i?i.get("lang"):o.lang||"en",s={_:null,polyglot:null,getLang:function(){return a},setLang:function(t,o){var c=n(53)("./"+t);c.__esModule&&(c=c.default);var u=s.polyglot=new r.a({phrases:c});u.locale(t),s._=webix.bind(u.t,u),a=t,i&&i.put("lang",a),o||e.refresh()}};e.setService("locale",s),s.setLang(a,!0)}t.a=o;var i=n(52),r=n.n(i)},function(e,t,n){var o,i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n,r){o=[],void 0!==(i=function(){return r(n)}.apply(t,o))&&(e.exports=i)}(this,function(e){"use strict";function t(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||u}function n(e){var t,n,o,i={};for(t in e)if(e.hasOwnProperty(t)){n=e[t];for(o in n)i[n[o]]=t}return i}function o(e){var t=/^\s+|\s+$/g;return e.replace(t,"")}function i(e,t,n){var i,r,a;return null!=n&&e?(r=e.split(p),a=r[s(t,n)]||r[0],i=o(a)):i=e,i}function a(e){var t=n(h);return t[e]||t.en}function s(e,t){return f[a(e)](t)}function c(e,t){for(var n in t)"_"!==n&&t.hasOwnProperty(n)&&(e=e.replace(new RegExp("%\\{"+n+"\\}","g"),t[n]));return e}function u(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}function l(e){var t={};for(var n in e)t[n]=e[n];return t}t.VERSION="0.4.3",t.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},t.prototype.extend=function(e,t){var n;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],t&&(o=t+"."+o),"object"===(void 0===n?"undefined":r(n))?this.extend(n,o):this.phrases[o]=n)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(e){this.clear(),this.extend(e)},t.prototype.t=function(e,t){var n,o;return t=null==t?{}:t,"number"==typeof t&&(t={smart_count:t}),"string"==typeof this.phrases[e]?n=this.phrases[e]:"string"==typeof t._?n=t._:this.allowMissing?n=e:(this.warn('Missing translation for key: "'+e+'"'),o=e),"string"==typeof n&&(t=l(t),o=i(n,this.currentLocale,t.smart_count),o=c(o,t)),o},t.prototype.has=function(e){return e in this.phrases};var p="||||",f={chinese:function(e){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},h={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t})},function(e,t,n){function o(e){return n(i(e))}function i(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./en":38,"./en.js":38};o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=53},function(e,t,n){"use strict";function o(e,t,n){t.urls&&(n=t.urls[n]||n),e.show("./"+n)}function i(e,t,n){var i=t.$$(n.id||n),r=!1;i.attachEvent("onchange",function(){r||o(t,n,this.getValue())}),i.attachEvent("onafterselect",function(){if(!r){var e=null;i.setValue?e=this.getValue():i.getSelectedId&&(e=i.getSelectedId()),o(t,n,e)}}),t.on(e,"app:route",function(e){var n=e[t.getIndex()];if(n){r=!0;var o=n.page;i.setValue&&i.getValue()!==o?i.setValue(o):i.select&&i.exists(o)&&i.getSelectedId()!==o&&i.select(o),r=!1}})}t.a=i},function(e,t,n){"use strict";function o(e,t,n){function o(e){var o=t.$$(n.target);o&&(e||(e="<div class='status_"+h+"'><span class='webix_icon fa-"+y[h]+"'></span> "+_[h]+"</div>"),o.setHTML(e))}function a(){d--,p("good")}function s(e){d--,p("error",e)}function c(e){d++,p("saving"),e&&e.then&&e.then(a,s)}function u(){return h}function l(){0==d&&o(" ")}function p(t,n){d<0&&(d=0),"saving"===t?(h="saving",o()):(b="error"===t,0===d&&(h=b?"error":"good",b?e.error("app:error:server",[n.responseText||n]):w&&setTimeout(l,w),o()))}function f(e){var n=webix.dp(e);n&&(t.on(n,"onAfterDataSend",c),t.on(n,"onAfterSaveError",function(e,t,n){return s(n)}),t.on(n,"onAfterSave",a))}var h="good",d=0,b=!1,w=n.expire;w||!1===w||(w=2e3);var _=n.texts||r,y=n.icons||i;"string"==typeof n&&(n={target:n}),e.setService("status",{getStatus:u,setStatus:p,track:f}),n.remote&&t.on(webix,"onRemoteCall",c),n.ajax&&t.on(webix,"onBeforeAjax",function(e,t,n,o,i,r,a){c(a)}),n.data&&f(n.data)}t.a=o;var i={good:"check",error:"warning",saving:"refresh fa-spin"},r={good:"Ok",error:"Error",saving:"Connecting..."}},function(e,t,n){"use strict";function o(e,t,n){n=n||{};var o=n.storage,i=o?o.get("theme"):n.theme||"flat-default",r={getTheme:function(){return i},setTheme:function(t,n){for(var r=t.split("-"),a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var c=a[s].getAttribute("title");c&&(c===t||c===r[0]?(a[s].rel="stylesheet",a[s].disabled=!1):(a[s].rel="alternate stylesheet",a[s].disabled=!0),webix.skin.set(r[0])),webix.html.removeCss(document.body,"theme-"+i),webix.html.addCss(document.body,"theme-"+t)}i=t,o&&o.put("theme",t),n||e.refresh()}};e.setService("theme",r),r.setTheme(i,!0)}t.a=o},function(e,t,n){"use strict";function o(e,t,n){function o(e,t){e===r?(p.logout(),t.redirect=s):e===i||p.getStatus()||(t.redirect=i)}n=n||{};var i=n.login||"/login",r=n.logout||"/logout",a=n.afterLogin||e.config.start,s=n.afterLogout||"/login",c=n.ping||3e5,u=n.model,l=n.user,p={getUser:function(){return l},getStatus:function(e){return e?u.status().catch(function(){return null}).then(function(e){l=e}):null!==l},login:function(t,n){return u.login(t,n).then(function(t){if(l=t,!t)throw"Access denied";e.show(a)})},logout:function(){return l=null,u.logout()}};e.setService("user",p),e.attachEvent("app:guard",function(e,t,n){return void 0===l&&(n.confirm=p.getStatus(!0).then(function(t){return o(e,n)})),o(e,n)}),c&&setInterval(function(){return p.getStatus(!0)},c)}t.a=o}]);