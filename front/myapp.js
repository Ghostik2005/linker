!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/codebase/",e(e.s=23)}([function(t,e,n){"use strict";var o=n(25);n.d(e,"a",function(){return o.a});var r=n(2);n.d(e,"b",function(){return r.a});var i=(n(18),n(31));n.d(e,"c",function(){return i.a});var a=(n(32),n(33),n(34)),s=n(35),u=n(38),c=n(39),l=n(40),f=n(41);a.a,s.a,u.a,l.a,f.a,c.a;window.Promise||(window.Promise=webix.promise)},function(t,e,n){"use strict";function o(t,e){var n=t?t.app.config.user:"user";y(t?t.app.config.r_url+"?getSprSearch":"/linker_logic?getSprSearch",{user:n,search:e}).then(function(t){t=t.json(),t.result?(t=t.ret_val,$$("__dt").clearAll(),$$("__dt").parse(t)):webix.message("error")})}function r(t){var e=$$("prcs_dc").getItem($$("prcs_dc").getCursor());$$("_names_bar").elements._vendor.setValue(e.c_zavod);var n="https://www.google.ru/search?newwindow=1&q="+e.c_tovar,r="<a target='_balnk' href='"+n+"'><span>"+e.c_tovar+"</span></a>",i="<span style='color: #666666;'>Осталось свести: </span><span style='color: red; font-weight: bold;'>"+$$("prcs_dc").count()+"</span>";$$("_names_bar").elements._name.setValue(r),$$("_names_bar").elements._count.setValue(i);var a=e.c_tovar.split(" "),s=0;a[s].length<4&&(s+=1);for(var u=a[s],c=s;c<a.length;c++)for(var l=a[c],f=0;f<l.length;f++){var p=(parseInt(l[f],10),!isNaN(l[f]));p&&(u+=" "+l[f])}u=u.replace('"'," "),u=u.replace("-"," "),u=u.replace("."," "),u=u.replace("*"," "),u=u.replace("+"," "),u=u.replace("/"," "),u=u.replace("\\"," "),$$("_spr_search").setValue(u),o(t,u)}function i(t,e){var n=t.app.config.user,o=t.app.config.r_url+"?getSpr",r={user:n,id_spr:e},i=y(o,r,!0).response;return i=JSON.parse(i),i.result?i.ret_val[0]:(webix.message("error"),"error")}function a(t){u(t),c(t),l(t),f(t),p(t),h(t),d(t)}function s(t,e){var n=t.app.config.user;y(t.app.config.r_url+"?getPrcs",{user:n,id_vnd:+e,not_link:0}).then(function(t){t=t.json(),t.result?(t=t.ret_val,$$("prcs_dc").clearAll(),$$("prcs_dc").parse(t)):webix.message("error")})}function u(t){var e=t.config.user;y(t.config.r_url+"?getStranaAll",{user:e}).then(function(t){t=t.json(),t.result?(t=t.ret_val,$$("strana_dc").clearAll(),$$("strana_dc").parse(t)):webix.message("error")})}function c(t){var e=t.config.user;y(t.config.r_url+"?getVendorAll",{user:e}).then(function(t){t=t.json(),t.result?(t=t.ret_val,$$("vendor_dc").clearAll(),$$("vendor_dc").parse(t)):webix.message("error")})}function l(t){var e=t.config.user;y(t.config.r_url+"?getDvAll",{user:e}).then(function(t){t=t.json(),t.result?(t=t.ret_val,$$("dv_dc").clearAll(),$$("dv_dc").parse(t)):webix.message("error")})}function f(t){var e=t.config.user;y(t.config.r_url+"?getNdsAll",{user:e}).then(function(t){t=t.json(),t.result?(t=t.ret_val,$$("nds_dc").clearAll(),$$("nds_dc").parse(t)):webix.message("error")})}function p(t){var e=t.config.user;y(t.config.r_url+"?getHranAll",{user:e}).then(function(t){t=t.json(),t.result?(t=t.ret_val,$$("hran_dc").clearAll(),$$("hran_dc").parse(t)):webix.message("error")})}function h(t){var e=t.config.user;y(t.config.r_url+"?getSezonAll",{user:e}).then(function(t){t=t.json(),t.result?(t=t.ret_val,$$("sezon_dc").clearAll(),$$("sezon_dc").parse(t)):webix.message("error")})}function d(t){var e=t.config.user;y(t.config.r_url+"?getGroupAll",{user:e}).then(function(t){t=t.json(),t.result?(t=t.ret_val,$$("group_dc").clearAll(),$$("group_dc").parse(t)):webix.message("error")})}function b(t,e){var n=e.app.config.user;y(e.app.config.r_url+"?getSupplUnlnk",{user:n}).then(function(e){if(e=e.json(),e.result){e=e.ret_val,$$(t).getList().clearAll(),$$(t).getList().parse(e);var n=$$(t).getList().getFirstId();$$(t).setValue(n)}else webix.message("error")})}function w(t,e){return e=e.toString().toLowerCase(),e=new RegExp(".*"+e.replace(/ /g,".*")+".*"),-1!=t.c_vnd.toString().toLowerCase().search(e)}function y(t,e,n){return!0===n?webix.ajax().sync().headers({"Content-type":"application/json"}).post(t,e):webix.ajax().headers({"Content-type":"application/json"}).post(t,e)}function v(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):NaN}function g(t,e,n){n=n||{};var o=n.expires;if("number"==typeof o&&o){var r=new Date;r.setTime(r.getTime()+1e3*o),o=n.expires=r}o&&o.toUTCString&&(n.expires=o.toUTCString()),e=encodeURIComponent(e);var i=t+"="+e;for(var a in n){i+="; "+a;var s=n[a];!0!==s&&(i+="="+s)}document.cookie=i}function _(t){g(t,"",{expires:-1,path:"/"})}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"prcs",function(){return m}),n.d(e,"strana",function(){return x}),n.d(e,"vendor",function(){return j}),n.d(e,"dv",function(){return $}),n.d(e,"nds",function(){return O}),n.d(e,"sezon",function(){return E}),n.d(e,"hran",function(){return S}),n.d(e,"group",function(){return C}),e.get_spr_search=o,e.parse_unlinked_item=r,e.get_spr=i,e.init_first=a,e.get_prcs=s,e.get_strana_all=u,e.get_vendor_all=c,e.get_dv_all=l,e.get_nds_all=f,e.get_hran_all=p,e.get_sezon_all=h,e.get_group_all=d,e.get_suppl=b,e.filter_1=w,e.request=y,e.getCookie=v,e.setCookie=g,e.deleteCookie=_;var m=new webix.DataCollection({id:"prcs_dc",on:{onAfterLoad:function(){var t=this.data.order[0];this.setCursor(t),r()}}}),x=new webix.DataCollection({id:"strana_dc",on:{onAfterLoad:function(){}}}),j=new webix.DataCollection({id:"vendor_dc",on:{onAfterLoad:function(){}}}),$=new webix.DataCollection({id:"dv_dc",on:{onAfterLoad:function(){}}}),O=new webix.DataCollection({id:"nds_dc",on:{onAfterLoad:function(){}}}),E=new webix.DataCollection({id:"sezon_dc",on:{onAfterLoad:function(){}}}),S=new webix.DataCollection({id:"hran_dc",on:{onAfterLoad:function(){}}}),C=new webix.DataCollection({id:"group_dc",on:{onAfterLoad:function(){}}})},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return u});var a=n(16),s=n(17),u=function(t){function e(n,i){o(this,e);var a=r(this,t.call(this));return a.app=n,a._name=i,a._children=[],a}return i(e,t),e.prototype.ui=function(t,e){if("function"==typeof t){var n=new t(this.app,e);return this._children.push(n),n.render(),n}var o=this.app.webix.ui(t);return this._children.push(o),o},e.prototype.show=function(t,e){var n=this;if("string"==typeof t){if("/"===t.substr(0,1))return this.app.show(t);if(0===t.indexOf("./")&&(t=t.substr(2)),0===t.indexOf("../")){var o=this.getParentView();return void(o?o.show("./"+t.substr(3)):this.app.show("/"+t.substr(3)))}var r=this.getSubView();if(!r)return this.app.show("/"+t);if(r.parent!==this)return r.parent.show(t,e);var i=Object(s.a)(t),a=null,u=this.app.getRouter().get();if(this._index){a=Object(s.a)(u).slice(0,this._index).concat(i);for(var c=0;c<a.length;c++)a[c].index=c+1;var l=Object(s.b)(a);this.app.canNavigate(l,this).then(function(t){l!==t?n.app.show(t):n._finishShow(r.subview,a,t)}).catch(function(){return!1})}else this._finishShow(r.subview,i,"")}},e.prototype.init=function(t,e){},e.prototype.ready=function(t,e){},e.prototype.config=function(){this.app.webix.message("View:Config is not implemented")},e.prototype.urlChange=function(t,e){},e.prototype.destroy=function(){},e.prototype.destructor=function(){this.destroy();for(var e=this._children,n=e.length-1;n>=0;n--)e[n]&&e[n].destructor&&e[n].destructor();this.app=this._children=null,this._root.destructor(),t.prototype.destructor.call(this)},e.prototype.use=function(t,e){t(this.app,this,e)},e.prototype._render=function(t){var e=this,n=this.config();return n.then?n.then(function(n){return e._render_final(n,t)}):this._render_final(n,t)},e.prototype._render_final=function(t,e){var n=this,o=void 0,r={ui:{}};this.app.copyConfig(t,r.ui,this._subs),this.app.callEvent("app:render",[this,e,r]),r.ui.$scope=this;try{this._root=this.app.webix.ui(r.ui,this._container),this._root.getParentView()&&(this._container=this._root),this._init(this._root,e),o=this._urlChange(e).then(function(){return n.ready(n._root,e)})}catch(t){o=Promise.reject(t)}return o.catch(function(t){return n._initError(n,t)})},e.prototype._init=function(t,e){return this.init(t,e)},e.prototype._urlChange=function(t){var e=this,n=[];for(var o in this._subs){var r=this._subs[o];if(r.url)if("string"==typeof r.url){var i=Object(s.a)(r.url);n.push(this._createSubView(r,i))}else{var a=r.view;"function"!=typeof r.url||a instanceof r.url||(a=new r.url(this.app,"")),a||(a=r.url),n.push(this._renderSubView(r,a,t))}else if("default"===o&&t&&t.length>1){var u=t.slice(1);n.push(this._createSubView(r,u))}}return Promise.all(n).then(function(){e.urlChange(e._root,t)})},e.prototype._initError=function(t,e){return this.app.error("app:error:initview",[e,t]),!0},e.prototype._createSubView=function(t,e){var n=this;return this.app.createFromURL(e,t.view).then(function(o){return n._renderSubView(t,o,e)})},e.prototype._renderSubView=function(t,e,n){var o=this.app.webix.$$(t.id);return e.render(o,n,this).then(function(n){return t.view&&t.view!==e&&t.view.destructor(),t.view=e,t.id=n.config.id,n})},e.prototype._finishShow=function(t,e,n){this._index?(this._urlChange(e.slice(this._index-1)),this.app.getRouter().set(n,{silent:!0}),this.app.callEvent("app:route",[e])):this._createSubView(t,e)},e}(a.a)},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(4),u=n(6),c=n(7),l=n(1),f=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){var t=this;return{rows:[{view:"toolbar",height:40,cols:[{view:"combo",name:"suppliers",id:"_suppl",readonly:!1,disabled:!1,width:300,options:{filter:l.filter_1,body:{css:"big-combo",template:"#c_vnd# - #n_sum2#",yCount:10}},on:{onChange:function(){var e=$$("_suppl").getList().getItem($$("_suppl").getValue()).id_vnd;Object(l.get_prcs)(t,e)}}},{},{view:"button",type:"form",label:"TEST",width:150,click:function(){webix.message({text:"test",type:"debug"})}},{view:"button",id:"_links",type:"htmlbutton",label:"<span class='webix_icon fa-stumbleupon'></span><span style='line-height: 20px;'> Связки (Ctrl+L)</span>",width:150,click:function(){t.poplinks.show("Линки")}}]},{view:"toolbar",id:"_names_bar",css:"header",rows:[{cols:[{view:"label",label:"",name:"_name"},{},{view:"label",label:"",css:"right",name:"_count"}]},{cols:[{view:"label",label:"",css:"header",name:"_vendor"},{},{view:"button",type:"form",label:"Посмотреть все",width:190,click:function(){webix.message("просмотр всех несвязанных товаров поставщика")}}]}]},{view:"toolbar",height:40,cols:[{view:"text",label:"",value:"",labelWidth:1,placeholder:"Строка поиска",id:"_spr_search",keyPressTimeout:900,on:{onTimedKeyPress:function(t,e){var n=this.getValue(),o=this.$scope;Object(l.get_spr_search)(o,n)}}},{view:"button",type:"htmlbutton",id:"_add",label:"Добавить (Ins)",width:140,hotkey:"insert",disabled:!1,click:function(){t.popnew.show("Добавление в справочник")}},{view:"button",type:"htmlbutton",id:"_link",label:"<span class='webix_icon fa-link'></span><span style='line-height: 20px;'>  Объединить (Ctrl+Home)</span>",width:220,hotkey:"home+ctrl",disabled:!0,click:function(){t.popconfirm.show("Связать?")}},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-angle-left'></span><span style='line-height: 20px;'>Ctrl+</span><span class='webix_icon fa-arrow-down'></span>",width:90,hotkey:"down+ctrl",click:function(){var e=$$("prcs_dc").getCursor(),n=$$("prcs_dc").data.order,o=void 0;n.forEach(function(t,n,r){t===e&&(o=n)}),o-=1,o<0&&(o=$$("prcs_dc").count()-1),e=$$("prcs_dc").data.order[+o],$$("prcs_dc").setCursor(e),Object(l.parse_unlinked_item)(t)}},{view:"button",type:"htmlbutton",label:"Пропустить (Ctrl+M)",width:160,hotkey:"m+ctrl",disabled:!1,click:function(){t.popconfirm.show("Пропустить?")}},{view:"button",type:"htmlbutton",label:"<span style='line-height: 20px;'>Ctrl+</span><span class='webix_icon fa-arrow-up'></span><span class='webix_icon fa-angle-right'></span>",width:90,hotkey:"up+ctrl",click:function(){var e=$$("prcs_dc").getCursor(),n=$$("prcs_dc").data.order,o=void 0;n.forEach(function(t,n,r){t===e&&(o=n)}),o+=1,o===$$("prcs_dc").count()-1&&(o=0),e=$$("prcs_dc").data.order[+o],$$("prcs_dc").setCursor(e),Object(l.parse_unlinked_item)(t)}}]}]}},e.prototype.init=function(){Object(l.get_suppl)("_suppl",this),this.popconfirm=this.ui(c.default),this.popnew=this.ui(s.default),this.poplinks=this.ui(u.default)},e}(a.b);e.default=f},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(5),u=n(1),c=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){function t(t,e){return e=e.toString().toLowerCase(),e=new RegExp(".*"+e.replace(/ /g,".*")+".*"),-1!=t.c_strana.toString().toLowerCase().search(e)}var e=this;return{view:"cWindow",modal:!0,body:{view:"form",localId:"new_form",margin:0,elements:[{rows:[{view:"label",label:"Название товара:   Название 1",name:"t_name"},{view:"text",label:"",value:"Название 1",name:"c_tovar"},{height:10,width:700},{cols:[{rows:[{view:"label",label:"Страна:",name:"s_name"},{view:"combo",width:400,value:"",name:"id_strana",options:{filter:t,body:{template:"#c_strana#",yCount:15,data:u.strana}},on:{onAfterRender:function(){this.getList().sync($$("strana_dc"))}}},{view:"label",label:"Производитель:Китай",name:"v_name"},{cols:[{view:"combo",label:"",value:"",name:"id_zavod",options:{body:{template:"#c_zavod#",yCount:10,data:u.vendor}},on:{onAfterRender:function(){this.getList().sync($$("vendor_dc"))}}},{view:"button",type:"base",label:"+",width:30,click:function(){e.popstri.show("Добавление производителя")}}]},{view:"label",label:"Действующее вещество:",name:"dv_name"},{cols:[{view:"combo",label:"",value:"",name:"id_dv",options:{body:{autoheight:!1,view:"list",type:{height:"auto"},template:"<div class='comboList'>#act_ingr#</div>",height:400,yCount:0,data:u.dv}},on:{onAfterRender:function(){this.getList().sync($$("dv_dc"))}}},{view:"button",type:"base",label:"+",width:30,click:function(){e.popstri.show("Добавление д.вещества")}}]},{view:"label",label:"Штрих-код:"},{cols:[{view:"text",label:"",value:"",readonly:!0,name:"barcode"},{view:"button",type:"base",label:"+",width:30,click:function(){e.popstri.show("Добавление ш.кода")}}]},{view:"textarea",label:"Описание:",labelPosition:"top",value:"",height:120,name:"c_opisanie"}]},{width:5},{rows:[{view:"form",css:"borders",localId:"new_f_right",elements:[{view:"label",labelWidth:0},{view:"label",labelWidth:0},{view:"checkbox",labelRight:"Рецептурный",labelWidth:0,align:"left",name:"_prescr"},{view:"checkbox",labelRight:"Обязательный",labelWidth:0,align:"left",name:"_mandat"},{view:"combo",label:"Сезон:",labelPosition:"top",value:"",name:"id_sezon",css:"small",options:{body:{template:"#sezon#",yCount:5,data:u.sezon}},on:{onAfterRender:function(){this.getList().sync($$("sezon_dc"))}}},{view:"combo",label:"Условия хранения:",labelPosition:"top",value:"",name:"id_usloviya",css:"small",options:{body:{template:"#usloviya#",yCount:10,data:u.hran}},on:{onAfterRender:function(){this.getList().sync($$("hran_dc"))}}},{view:"combo",label:"Группа:",labelPosition:"top",value:"",name:"id_group",css:"small",options:{body:{autoheight:!1,view:"list",type:{height:"auto"},template:"<div class='comboList'>#group#</div>",height:400,yCount:0,data:u.group}},on:{onAfterRender:function(){this.getList().sync($$("group_dc"))}}},{view:"combo",label:"НДС:",labelPosition:"top",value:"",name:"id_nds",css:"small",options:{body:{template:"#nds#",yCount:10,data:u.nds}},on:{onAfterRender:function(){this.getList().sync($$("nds_dc"))}}}]}]}]},{cols:[{view:"button",type:"base",label:"Отменить",width:120,height:32,click:function(){webix.message("Очищаем форму и закрываем"),e.hide()}},{},{view:"button",type:"base",label:"Test",width:120,height:32,click:function(){}},{view:"button",type:"base",label:"Сохранить",width:120,height:32,click:function(){webix.message("Очищаем форму, отправляем данные на сервер и закрываем"),e.hide()}}]}]}],on:{onBeforeShow:function(){},onShow:function(){}}}}},e.prototype.show=function(t,e){e&&(this.$$("new_form").parse(e),this.$$("new_f_right").parse(e)),this.getRoot().getHead().getChildViews()[0].setValue(t),this.getRoot().show()},e.prototype.hide=function(){this.getRoot().hide()},e.prototype.init=function(){this.popstri=this.ui(s.default)},e}(a.b);e.default=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{view:"cWindow",modal:!0,body:{view:"form",margin:0,elements:[{view:"text",label:"Название",value:"Ввод новой строки",width:320,name:"_new_str"},{cols:[{view:"button",type:"base",label:"Отменить",width:120},{},{view:"button",type:"base",label:"Сохранить",width:120}]}],on:{onBeforeShow:function(){},onShow:function(){}}}}},e.prototype.show=function(t){this.getRoot().getHead().getChildViews()[0].setValue(t),this.getRoot().show()},e.prototype.hide=function(){this.getRoot().hide()},e.prototype.getValues=function(){return this.getRoot().getBody().getValues()},e}(a.b);e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){function t(t,e,n){var o="<div>"+t.name;return o=t.sprvendor?o+"<br>"+t.sprvendor+"</div>":o+"</div>",e.treetable(t,e)+o}var e=this;return{view:"cWindow",modal:!0,body:{view:"form",margin:0,elements:[{view:"form",margin:0,elements:[{rows:[{cols:[{view:"text",label:"",placeholder:"Строка поиска",width:500},{view:"checkbox",labelRight:"Поиск по словарю",labelWidth:0},{view:"button",type:"htmlbutton",label:"<span class='webix_icon fa-unlink'></span><span style='line-height: 20px;'>  Разорвать (Ctrl+D)</span>",width:220}]},{height:10,width:900},{view:"treetable",scheme:{},height:550,footer:!0,borderless:!0,columns:[{id:"name",header:"Наименование",fillspace:!0,template:t},{id:"vendor",header:"Производитель",width:200},{id:"supplier",header:"Поставщик",width:150},{id:"code",header:"Код",width:75},{id:"date",header:"Дата",width:75},{id:"creater",header:"Создал",width:100}],select:!0,on:{onBeforeSelect:function(t){},onAfterSelect:function(){}},data:[{id:"1",name:"12345, Наименование препарата 1",sprvendor:"Производитель 1, Китай",data:[{id:"1.1",name:"Наименование поставщика 1",vendor:"Производитель 1",supplier:"Поставщик 1",code:"5588445",date:"12.12.2017",creater:"Пользователь"},{id:"1.2",name:"Наименование поставщика 2",vendor:"Производ 2",supplier:"Поставщик 1",code:"558812",date:"12.12.2017",creater:"Пользователь"}]}]},{cols:[{},{view:"button",type:"base",label:"Закрыть",width:120,height:32,click:function(){webix.message("Закрываем форму"),e.hide()}}]}]}]}]}}},e.prototype.show=function(t){this.getRoot().getHead().getChildViews()[0].setValue(t),this.getRoot().show()},e.prototype.hide=function(){this.getRoot().hide()},e}(a.b);e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){var t,e=this;return{view:"cWindow",modal:!0,body:(t={view:"form",margin:0,on:{onShow:function(t){$$("_yes").focus()}},elements:[{height:66},{cols:[{view:"button",type:"base",label:"Нет",width:120,height:44,click:function(){webix.message("Очищаем форму и закрываем"),console.log(e.hide())}},{},{view:"button",type:"base",label:"Да (Enter)",width:120,height:44,id:"_yes",click:function(){webix.message("Очищаем форму, отправляем данные на сервер и закрываем"),console.log(e.hide())}}]}]},t.on={onBeforeShow:function(){},onShow:function(){}},t)}},e.prototype.show=function(t){this.getRoot().getHead().getChildViews()[0].setValue(t),this.getRoot().show()},e.prototype.hide=function(){this.getRoot().hide()},e.prototype.getValues=function(){return this.getRoot().getBody().getValues()},e}(a.b);e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(4),u=n(1),c=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){function t(t){var e=t.id_mnn;return e=0!=+e?"<div> <span class='green'>есть</span></div>":"<div> <span class='red'>нет</span></div>"}return{view:"datatable",id:"__dt",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,footer:!0,headermenu:!0,columns:[{id:"id_mnn",width:75,template:t,header:[{text:"МНН"}],footer:{text:"Всего:",colspan:5,rowspan:1,height:24}},{id:"id_spr",width:80,sort:"int",header:[{text:"IDSPR"}]},{id:"c_tovar",fillspace:1,sort:"text",header:[{text:"Название"}]},{id:"id_zavod",sort:"text",width:400,header:[{text:"Производитель"},{content:"textFilter"}]},{id:"id_strana",sort:"text",width:250,header:[{text:"Страна"},{content:"textFilter"}]}],on:{"data->onParse":function(t,e){this.clearAll(),$$("_link").disable()},onItemDblClick:function(t){t=this.getItem(t.row),t=t.id_spr,t=Object(u.get_spr)(this.$scope,t),t.s_name="Страна: "+t.c_strana,t.t_name="Название товара: "+t.c_tovar,t.v_name="Производитель: "+t.c_zavod,t.dv_name="Действующее вещество: "+t.c_dv,this.$scope.popnew.show("Редактирование записи "+t.id_spr,t)},onBeforeSelect:function(){$$("_link").enable(),$$("_add").enable()}}}},e.prototype.init=function(){this.popnew=this.ui(s.default)},e}(a.b);e.default=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{view:"toolbar",css:"header",cols:[{view:"label",label:"Вы находитесь на сервере:   saas",css:"ms-logo-text",height:36},{},{view:"button",type:"htmlbutton",width:32,label:"<span class='webix_icon fa-info', style='color: #666666;'></span>"}]}},e}(a.b);e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(11),u=n(12),c=n(13),l=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{view:"layout",rows:[{height:10},{margin:10,cols:[{$subview:c.default,name:"gr_right"},{$subview:s.default,name:"gr_center"},{$subview:u.default,name:"gr_left"}]}]}},e}(a.b);e.default=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{rows:[{view:"toolbar",cols:[{view:"label",label:"Содержание группы"}]},{view:"toolbar",cols:[{view:"label",label:"Группа не выбрана"},{},{view:"button",type:"form",label:"Новая",width:100}]},{view:"datatable",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,footer:!0,headermenu:!0,columns:[{id:"idspr",sort:"int",width:75,header:[{text:"IDSPR"}]},{id:"mnn",fillspace:1,sort:"text",header:[{text:"Товар"}]},{id:"idspr",width:120,sort:"text",header:[{text:"Производитель"}]},{id:"name",width:100,sort:"text",header:[{text:"Страна"}]}]}]}},e}(a.b);e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{rows:[{view:"toolbar",cols:[{view:"label",label:"Группы"}]},{view:"toolbar",cols:[{view:"text",value:""}]},{view:"datatable",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,footer:!0,headermenu:!0,columns:[{id:"idspr",sort:"int",width:75,header:[{text:"IDSPR"}]},{id:"mnn",fillspace:1,sort:"text",header:[{text:"Товар"}]},{id:"name",width:120,sort:"text",header:[{text:"Страна"}]}]}]}},e}(a.b);e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{rows:[{view:"toolbar",cols:[{view:"label",label:"Не сведенные"}]},{view:"toolbar",cols:[{view:"text",value:""}]},{view:"datatable",navigation:"row",select:!0,resizeColumn:!0,fixedRowHeight:!1,rowLineHeight:32,rowHeight:32,editable:!1,footer:!0,headermenu:!0,columns:[{id:"idspr",sort:"int",width:75,header:[{text:"IDSPR"}]},{id:"mnn",fillspace:1,sort:"text",header:[{text:"Товар"}]},{id:"idspr",width:120,sort:"text",header:[{text:"Производитель"}]},{id:"name",width:100,sort:"text",header:[{text:"Страна"}]}]}]}},e}(a.b);e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{rows:[{view:"toolbar",height:40,cols:[{view:"label",label:"Общий поиск"},{},{view:"button",type:"form",label:"Проверка групп",width:180,click:function(){}},{view:"button",type:"form",label:"Добавить эталон",width:220},{view:"button",type:"form",label:"Линки",width:140},{view:"button",type:"form",label:"Штрихкоды",width:180}]}]}},e.prototype.init=function(){},e}(a.b);e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){var t=this;return{view:"toolbar",css:"header",cols:[{view:"label",label:"<a href='http://ms71.org'><span class='ms-logo', style='background-image: url(addons/img/ms_logo.jpg);'></span></a>",width:44,align:"center",height:36},{view:"label",label:"Манускрипт солюшн: linker",css:"ms-logo-text",height:36,width:250},{view:"label",label:"Текущий пользователь:  user",css:"ms-logo-text",width:300,height:36},{},{view:"button",id:"_adm",type:"form",label:"Админка",width:120},{view:"button",id:"_merge",type:"form",label:"Merger",width:80,click:function(){t.app.show("/start/body")}},{view:"button",id:"_group",type:"form",label:"Grouper",width:80,click:function(){t.app.show("/start/grouper")}},{view:"button",id:"_exit",type:"form",label:"Выйти",width:80}]}},e}(a.b);e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=t.getChildViews(),o=n,i=Array.isArray(o),a=0,o=i?o:o[Symbol.iterator]();;){var s;if(i){if(a>=o.length)break;s=o[a++]}else{if(a=o.next(),a.done)break;s=a.value}var u=s,c=u;if(c.config.localId===e)return c;if(c=r(c,e))return c}return null}n.d(e,"a",function(){return i});var i=function(){function t(){o(this,t),this._id=webix.uid(),this._events=[],this._subs={}}return t.prototype.getRoot=function(){return this._root},t.prototype.destructor=function(){for(var t=this._events,e=t.length-1;e>=0;e--)t[e].obj.detachEvent(t[e].id);for(var n in this._subs){var o=this._subs[n].view;o&&o.destructor()}this._events=this._container=this._app=this._parent=null},t.prototype.render=function(t,e,n){var o=this;this._parent=n,e&&(this._index=e[0].index),t=t||document.body;var r="string"==typeof t?webix.toNode(t):t;return this._container!==r?(this._container=r,this._render(e).then(function(){return o.getRoot()})):this._urlChange(e).then(function(){return o.getRoot()})},t.prototype.getIndex=function(){return this._index},t.prototype.getId=function(){return this._id},t.prototype.getParentView=function(){return this._parent},t.prototype.$$=function(t){var e=webix.$$(t);return e||(e=r(this.getRoot(),t)),e},t.prototype.on=function(t,e,n){var o=t.attachEvent(e,n);return this._events.push({obj:t,id:o}),o},t.prototype.contains=function(t){for(var e in this._subs){var n=this._subs[e].view;if(n===t||n.contains(t))return!0}return!1},t.prototype.getSubView=function(t){var e=this._subs[t||"default"];return e?{subview:e,parent:this}:this._parent?this._parent.getSubView(t):null},t.prototype.getName=function(){return this._name},t}()},function(t,e,n){"use strict";function o(t){"/"===t[0]&&(t=t.substr(1));for(var e=t.split("/"),n=[],o=0;o<e.length;o++){var r=e[o],i={},a=r.indexOf(":");if(-1===a&&(a=r.indexOf("?")),-1!==a)for(var s=r.substr(a+1).split(/[\:\?\&]/g),u=s,c=Array.isArray(u),l=0,u=c?u:u[Symbol.iterator]();;){var f;if(c){if(l>=u.length)break;f=u[l++]}else{if(l=u.next(),l.done)break;f=l.value}var p=f,h=p.split("=");i[h[0]]=h[1]}n[o]={page:a>-1?r.substr(0,a):r,params:i,index:o+1}}return n}function r(t){for(var e=[],n=t,o=Array.isArray(n),r=0,n=o?n:n[Symbol.iterator]();;){var a;if(o){if(r>=n.length)break;a=n[r++]}else{if(r=n.next(),r.done)break;a=r.value}var s=a;e.push("/"+s.page);var u=i(s.params);u&&e.push(":"+u)}return e.join("")}function i(t){var e=[];for(var n in t)e.length&&e.push(":"),e.push(n+"="+t[n]);return e.join("")}e.a=o,e.b=r},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return a});var r=n(28),i=n.n(r),a=function(){function t(e,n){var r=this;o(this,t),this.config=n||{},this._prefix=this.config.routerPrefix,void 0===this._prefix&&(this._prefix="!");var a=function(t){};i()(this._prefix+"*",function(t){return r._lastUrl="",a(r.get())}),a=e}return t.prototype.set=function(t,e){if(this.config.routes){var n=t.split("?",2);for(var o in this.config.routes)if(this.config.routes[o]===n[0]){t=o+(n.length>1?"?"+n[1]:"");break}}this._lastUrl=t,i.a.navigate(this._prefix+t,e)},t.prototype.get=function(){var t=this._lastUrl||(window.location.hash||"").replace("#"+this._prefix,"");if(this.config.routes){var e=t.split("?",2),n=this.config.routes[e[0]];n&&(t=n+(e.length>1?"?"+e[1]:""))}return t},t}()},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(3),u=n(8),c=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{view:"layout",css:"margin-zero",rows:[{$subview:s.default,name:"top_menu"},{$subview:u.default,name:"spr_dt"}]}},e.prototype.ready=function(t){},e}(a.b);e.default=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=(n(3),n(14)),u=n(10),c=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{view:"layout",css:"margin-zero",rows:[{$subview:s.default,name:"gr_top"},{$subview:u.default,name:"gr_spr"}]}},e.prototype.ready=function(t){},e}(a.b);e.default=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(15),u=n(9),c=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.config=function(){return{type:"line",id:"main_ui",rows:[{$subview:s.default},{$subview:!0},{$subview:u.default}]}},e.prototype.init=function(){},e}(a.b);e.default=c},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(24),r=(n.n(o),n(0)),i=n(1);webix.ready(function(){webix.protoUI({name:"cWindow",defaults:{modal:!1,move:!0,position:"center"},$init:function(t){webix.extend(t,{head:{view:"toolbar",cols:[{view:"label",label:"Название окна"},{view:"button",type:"icon",icon:"times",css:"times",height:26,width:26,click:function(){this.getTopParentView().hide()}}]}})}},webix.ui.window);var t=new r.a({id:"mainApp",name:"linker",version:"2017.334.1230",start:"/start/body",user:"admin",r_url:"/linker_logic",router:r.c,x_api:"api-key",debug:!0});t.render(),webix.attachEvent("onBeforeAjax",function(e,n,o,r,i,a,s){i["x-api-key"]=t.config.x_api}),Object(i.init_first)(t),t.attachEvent("app:error:resolve",function(t,e){window.console.error(e)})})},function(t,e){},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return d});var a=n(16),s=n(2),u=n(26),c=n(27),l=n(18),f=n(17),p=n(29),h=(n.n(p),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}),d=function(t){function e(n){o(this,e);var i=r(this,t.call(this));return i.webix=n.webix||webix,i.config=i.webix.extend({name:"App",version:"1.0",start:"/home"},n,!0),i._name=i.config.name,i._services={},webix.extend(i,webix.EventSystem),webix.attachEvent("onClick",function(t){return i.clickHandler(t)}),i}return i(e,t),e.prototype.getService=function(t){var e=this._services[t];return"function"==typeof e&&(e=this._services[t]=e(this)),e},e.prototype.setService=function(t,e){this._services[t]=e},e.prototype.copyConfig=function(t,n,o){if(t.$ui?t={$subview:new u.a(this,"",t)}:t instanceof e&&(t={$subview:t}),t.$subview)return this.addSubView(t,n,o);n=n||(t instanceof Array?[]:{});for(var r in t){var i=t[r];"function"==typeof i&&i.prototype&&i.prototype.config&&(i={$subview:i}),!i||"object"!==(void 0===i?"undefined":h(i))||i instanceof webix.DataCollection?n[r]=i:i instanceof Date?n[r]=new Date(i):n[r]=this.copyConfig(i,i instanceof Array?[]:{},o)}return n},e.prototype.getRouter=function(){return this.$router},e.prototype.clickHandler=function(t){if(t){var e=t.target||t.srcElement;if(e&&e.getAttribute){var n=e.getAttribute("trigger");n&&this.trigger(n);var o=e.getAttribute("route");o&&this.show(o)}}},e.prototype.refresh=function(){var t=this._container;this._view.destructor(),this._view=this._container=null,this.render(t,Object(f.a)(this.getRouter().get()),this._parent)},e.prototype.loadView=function(t){var e=this,o=this.config.views,r=null;try{if(o&&"string"==typeof(r="function"==typeof o?o(t):o[t])&&(t=r,r=null),!r){t=t.replace(/\./g,"/");var i=n(30)("./"+t);i.__esModule&&(i=i.default),r=i}}catch(e){r=this._loadError(t,e)}return r.then||(r=Promise.resolve(r)),r=r.catch(function(n){return e._loadError(t,n)})},e.prototype.createFromURL=function(t,n){var o=this,r=t[0],i=r.page;return n&&n.getName()===i?Promise.resolve(n):this.loadView(r.page).then(function(t){if("function"==typeof t){if(t.prototype&&t.prototype.show)return new t(o,i);t=t()}return t instanceof e||t instanceof s.a?t:t.$ui?new u.a(o,i,t):new c.a(o,i,t)})},e.prototype.show=function(t){var e=this;this.$router.get()!==t&&this.canNavigate(t).then(function(t){e.$router.set(t,{silent:!0}),e._render(t)}).catch(function(){return!1})},e.prototype.canNavigate=function(t,e){var n={url:Object(f.a)(t),redirect:t,confirm:Promise.resolve(!0)};return this.callEvent("app:guard",[t,e||this._view,n])?n.confirm.then(function(){return n.redirect}):Promise.reject("")},e.prototype.destructor=function(){this._view.destructor()},e.prototype.trigger=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];this.apply(t,n)},e.prototype.apply=function(t,e){this.callEvent(t,e)},e.prototype.action=function(t){return this.webix.bind(function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];this.apply(t,n)},this)},e.prototype.on=function(t,e){this.attachEvent(t,e)},e.prototype.use=function(t,e){t(this,null,e)},e.prototype.error=function(t,e){this.callEvent(t,e),this.callEvent("app:error",e),this.config.debug&&e[0]&&console.error(e[0])},e.prototype._render=function(t){var e=this;!this.$router&&(t=this._first_start(t));var n="string"==typeof t?t:Object(f.b)(t);return this.canNavigate(n).then(function(t){return e.$router.set(t,{silent:!0}),e._render_stage(t)})},e.prototype._render_stage=function(t){var e=this,n="string"==typeof t?Object(f.a)(t):t;return webix.ui.freeze(function(){return e.createFromURL(n,e._view).then(function(t){var o=e._view;return e._view=t,t.render(e._container,n,e._parent).then(function(r){return o&&o!==e._view&&o.destructor(),e._view.getRoot().getParentView()&&(e._container=r),e._root=r,e.callEvent("app:route",[n]),t})}).catch(function(t){e.error("app:error:render",[t])})})},e.prototype._urlChange=function(t){return alert("Not implemented"),Promise.resolve(!0)},e.prototype._first_start=function(t){var e=this,n=function(t){return setTimeout(function(){e._render(t)},1)};if(this.$router=new(this.config.router||l.a)(n,this.config),this._container===document.body&&!1!==this.config.animation){var o=this._container;webix.html.addCss(o,"webixappstart"),setTimeout(function(){webix.html.removeCss(o,"webixappstart"),webix.html.addCss(o,"webixapp")},10)}return t&&1!==t.length||(t=this.$router.get()||this.config.start,this.$router.set(t,{silent:!0})),t},e.prototype._loadError=function(t,e){return this.error("app:error:resolve",[e,t]),{template:" "}},e.prototype.addSubView=function(t,e,n){var o=!0!==t.$subview?t.$subview:null,r=t.name||(o?this.webix.uid():"default");e.id=t.id||"s"+this.webix.uid();var i=n[r]={id:e.id,url:o};return i.url instanceof s.a&&(i.view=i.url),e},e}(a.a)},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return s});var a=n(2),s=function(t){function e(n,i,a){o(this,e);var s=r(this,t.call(this,n,i));return s._ui=a,s._windows=[],s}return i(e,t),e.prototype.getRoot=function(){if(this.app.config.jet1xMode){var t=this.getParentView();if(t)return t.getRoot()}return this._root},e.prototype.config=function(){return this._ui.$ui||this._ui},e.prototype.destructor=function(){var e=this._ui.$ondestroy;e&&e();for(var n=this._windows,o=Array.isArray(n),r=0,n=o?n:n[Symbol.iterator]();;){var i;if(o){if(r>=n.length)break;i=n[r++]}else{if(r=n.next(),r.done)break;i=r.value}i.destructor()}t.prototype.destructor.call(this)},e.prototype.show=function(e,n){if(0===e.indexOf("/")||0===e.indexOf("./"))return t.prototype.show.call(this,e,n);t.prototype.show.call(this,"../"+e,n)},e.prototype.init=function(t,e){this.app.config.legacyEarlyInit&&this._realInitHandler(t,e)},e.prototype.ready=function(t,e){this.app.config.legacyEarlyInit||this._realInitHandler(t,e)},e.prototype._realInitHandler=function(t,n){var o=this._ui.$oninit;if(o){var r=this.getRoot();o(r,r.$scope)}var i=this._ui.$onevent;if(i)for(var a in i)this.on(this.app,a,i[a]);var s=this._ui.$windows;if(s)for(var u=s,c=Array.isArray(u),l=0,u=c?u:u[Symbol.iterator]();;){var f;if(c){if(l>=u.length)break;f=u[l++]}else{if(l=u.next(),l.done)break;f=l.value}var p=f;if(p.$ui){var h=new e(this.app,this.getName(),p);h.render(document.body),this._windows.push(h)}else this.ui(p)}},e.prototype._urlChange=function(e){var n=this;return t.prototype._urlChange.call(this,e).then(function(){var t=n._ui.$onurlchange;if(t){var o=n.getRoot();t(e[0].params,e.slice(1),o.$scope)}})},e}(a.a)},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return s});var a=n(2),s=function(t){function e(n,i,a){o(this,e);var s=r(this,t.call(this,n,i));return s._ui=a,s}return i(e,t),e.prototype.config=function(){return this._ui},e}(a.a)},function(t,e,n){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t,e){var n,r=[],i={},a=t.routie,s=function(t,e){this.name=e,this.path=t,this.keys=[],this.fns=[],this.params={},this.regex=u(this.path,this.keys,!1,!1)};s.prototype.addHandler=function(t){this.fns.push(t)},s.prototype.removeHandler=function(t){for(var e=0,n=this.fns.length;e<n;e++){if(t==this.fns[e])return void this.fns.splice(e,1)}},s.prototype.run=function(t){for(var e=0,n=this.fns.length;e<n;e++)if(!1===this.fns[e].apply(this,t))return!1;return!0},s.prototype.match=function(t,e){var n=this.regex.exec(t);if(!n)return!1;for(var o=1,r=n.length;o<r;++o){var i=this.keys[o-1],a="string"==typeof n[o]?decodeURIComponent(n[o]):n[o];i&&(this.params[i.name]=a),e.push(a)}return!0},s.prototype.toURL=function(t){var e=this.path;for(var n in t)e=e.replace("/:"+n,"/"+t[n]);if(e=e.replace(/\/:.*\?/g,"/").replace(/\?/g,""),-1!=e.indexOf(":"))throw new Error("missing parameters for url: "+e);return e};var u=function(t,e,n,o){return t instanceof RegExp?t:(t instanceof Array&&(t="("+t.join("|")+")"),t=t.concat(o?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(t,n,o,r,i,a){return e.push({name:r,optional:!!a}),n=n||"",(a?"":n)+"(?:"+(a?n:"")+(o||"")+(i||o&&"([^/.]+?)"||"([^/]+?)")+")"+(a||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+t+"$",n?"":"i"))},c=function(t,e){var n=t.split(" "),o=2==n.length?n[0]:null;t=2==n.length?n[1]:n[0],i[t]||(i[t]=new s(t,o),r.push(i[t])),i[t].addHandler(e)},l=function t(e,n){if("function"==typeof n)c(e,n),t.reload();else if("object"==(void 0===e?"undefined":o(e))){for(var r in e)c(r,e[r]);t.reload()}else void 0===n&&t.navigate(e)};l.lookup=function(t,e){for(var n=0,o=r.length;n<o;n++){var i=r[n];if(i.name==t)return i.toURL(e)}},l.remove=function(t,e){var n=i[t];n&&n.removeHandler(e)},l.removeAll=function(){i={},r=[],n=""},l.navigate=function(t,e){e=e||{};var n=e.silent||!1;n&&b(),setTimeout(function(){window.location.hash=t,n&&setTimeout(function(){d()},1)},1)},l.noConflict=function(){return t.routie=a,l};var f=function(){return window.location.hash.substring(1)},p=function(t,e){var n=[];return e.match(t,n)?!1!==e.run(n)?1:0:-1},h=l.reload=function(){for(var t=f(),e=0,o=r.length;e<o;e++){var i=r[e],a=p(t,i);if(1===a){n=t;break}if(0===a){l.navigate(n,{silent:!0});break}}},d=function(){t.addEventListener?t.addEventListener("hashchange",h,!1):t.attachEvent("onhashchange",h)},b=function(){t.removeEventListener?t.removeEventListener("hashchange",h):t.detachEvent("onhashchange",h)};if(d(),n=f(),e)return l;t.routie=l};t.exports=r(window,!0),t.exports.default=t.exports},function(t,e){var n=webix;n.ui.freeze||(n.ui.freeze=function(t){var e=t();return e&&e.then?e.then(function(t){return n.ui.$freeze=!1,n.ui.resize(),t}):(n.ui.$freeze=!1,n.ui.resize()),e})},function(t,e,n){function o(t){return n(r(t))}function r(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var i={"./body":19,"./body.js":19,"./footer":9,"./footer.js":9,"./globals":1,"./globals.js":1,"./gr-body":10,"./gr-body.js":10,"./gr-center":11,"./gr-center.js":11,"./gr-left":12,"./gr-left.js":12,"./gr-right":13,"./gr-right.js":13,"./gr-top":14,"./gr-top.js":14,"./grouper":20,"./grouper.js":20,"./header":15,"./header.js":15,"./links_form":6,"./links_form.js":6,"./new_form":4,"./new_form.js":4,"./new_stri":5,"./new_stri.js":5,"./spr_dt":8,"./spr_dt.js":8,"./start":21,"./start.js":21,"./top-menu":3,"./top-menu.js":3,"./yes-no":7,"./yes-no.js":7};o.keys=function(){return Object.keys(i)},o.resolve=r,t.exports=o,o.id=30},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r});var r=function(){function t(e,n){o(this,t),this.name=n.storeName||n.id+":route",this.cb=e}return t.prototype.set=function(t,e){var n=this;webix.storage.session.put(this.name,t),e&&e.silent||setTimeout(function(){return n.cb(t)},1)},t.prototype.get=function(){return webix.storage.session.get(this.name)},t}()},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){function t(e,n){o(this,t),this.cb=e,this.prefix=n.routerPrefix||""}t.prototype.set=function(t,e){var n=this;window.history.pushState(null,null,this.prefix+t),e&&e.silent||setTimeout(function(){return n.cb(t)},1)},t.prototype.get=function(){var t=window.location.pathname.replace(this.prefix,"");return"/"!==t?t:""}}()},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){function t(e,n){o(this,t),this.path="",this.cb=e}t.prototype.set=function(t,e){var n=this;this.path=t,e&&e.silent||setTimeout(function(){return n.cb(t)},1)},t.prototype.get=function(){return this.path}}()},function(t,e,n){"use strict";function o(t,e,n){e.on(t,"app:guard",function(t,o,r){if(o===e||o.contains(e)){var i=n();r.confirm=!1===i?Promise.reject(i):r.confirm.then(function(){return i})}})}e.a=o},function(t,e,n){"use strict";function o(t,e,o){o=o||{};var r=o.storage,a=r?r.get("lang"):o.lang||"en",s={_:null,polyglot:null,getLang:function(){return a},setLang:function(e,o){var u=n(37)("./"+e);u.__esModule&&(u=u.default);var c=s.polyglot=new i.a({phrases:u});c.locale(e),s._=webix.bind(c.t,c),a=e,r&&r.put("lang",a),o||t.refresh()}};t.setService("locale",s),s.setLang(a,!0)}e.a=o;var r=n(36),i=n.n(r)},function(t,e,n){var o,r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n,i){o=[],void 0!==(r=function(){return i(n)}.apply(e,o))&&(t.exports=r)}(this,function(t){"use strict";function e(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||c}function n(t){var e,n,o,r={};for(e in t)if(t.hasOwnProperty(e)){n=t[e];for(o in n)r[n[o]]=e}return r}function o(t){var e=/^\s+|\s+$/g;return t.replace(e,"")}function r(t,e,n){var r,i,a;return null!=n&&t?(i=t.split(f),a=i[s(e,n)]||i[0],r=o(a)):r=t,r}function a(t){var e=n(h);return e[t]||e.en}function s(t,e){return p[a(t)](e)}function u(t,e){for(var n in e)"_"!==n&&e.hasOwnProperty(n)&&(t=t.replace(new RegExp("%\\{"+n+"\\}","g"),e[n]));return t}function c(e){t.console&&t.console.warn&&t.console.warn("WARNING: "+e)}function l(t){var e={};for(var n in t)e[n]=t[n];return e}e.VERSION="0.4.3",e.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},e.prototype.extend=function(t,e){var n;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],e&&(o=e+"."+o),"object"===(void 0===n?"undefined":i(n))?this.extend(n,o):this.phrases[o]=n)},e.prototype.clear=function(){this.phrases={}},e.prototype.replace=function(t){this.clear(),this.extend(t)},e.prototype.t=function(t,e){var n,o;return e=null==e?{}:e,"number"==typeof e&&(e={smart_count:e}),"string"==typeof this.phrases[t]?n=this.phrases[t]:"string"==typeof e._?n=e._:this.allowMissing?n=t:(this.warn('Missing translation for key: "'+t+'"'),o=t),"string"==typeof n&&(e=l(e),o=r(n,this.currentLocale,e.smart_count),o=u(o,e)),o},e.prototype.has=function(t){return t in this.phrases};var f="||||",p={chinese:function(t){return 0},german:function(t){return 1!==t?1:0},french:function(t){return t>1?1:0},russian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},h={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return e})},function(t,e,n){function o(t){return n(r(t))}function r(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var i={"./en":22,"./en.js":22};o.keys=function(){return Object.keys(i)},o.resolve=r,t.exports=o,o.id=37},function(t,e,n){"use strict";function o(t,e,n){e.urls&&(n=e.urls[n]||n),t.show("./"+n)}function r(t,e,n){var r=e.$$(n.id||n),i=!1;r.attachEvent("onchange",function(){i||o(e,n,this.getValue())}),r.attachEvent("onafterselect",function(){if(!i){var t=null;r.setValue?t=this.getValue():r.getSelectedId&&(t=r.getSelectedId()),o(e,n,t)}}),e.on(t,"app:route",function(t){var n=t[e.getIndex()];if(n){i=!0;var o=n.page;r.setValue&&r.getValue()!==o?r.setValue(o):r.select&&r.exists(o)&&r.getSelectedId()!==o&&r.select(o),i=!1}})}e.a=r},function(t,e,n){"use strict";function o(t,e,n){function o(t){var o=e.$$(n.target);o&&(t||(t="<div class='status_"+h+"'><span class='webix_icon fa-"+v[h]+"'></span> "+y[h]+"</div>"),o.setHTML(t))}function a(){d--,f("good")}function s(t){d--,f("error",t)}function u(t){d++,f("saving"),t&&t.then&&t.then(a,s)}function c(){return h}function l(){0==d&&o(" ")}function f(e,n){d<0&&(d=0),"saving"===e?(h="saving",o()):(b="error"===e,0===d&&(h=b?"error":"good",b?t.error("app:error:server",[n.responseText||n]):w&&setTimeout(l,w),o()))}function p(t){var n=webix.dp(t);n&&(e.on(n,"onAfterDataSend",u),e.on(n,"onAfterSaveError",function(t,e,n){return s(n)}),e.on(n,"onAfterSave",a))}var h="good",d=0,b=!1,w=n.expire;w||!1===w||(w=2e3);var y=n.texts||i,v=n.icons||r;"string"==typeof n&&(n={target:n}),t.setService("status",{getStatus:c,setStatus:f,track:p}),n.remote&&e.on(webix,"onRemoteCall",u),n.ajax&&e.on(webix,"onBeforeAjax",function(t,e,n,o,r,i,a){u(a)}),n.data&&p(n.data)}e.a=o;var r={good:"check",error:"warning",saving:"refresh fa-spin"},i={good:"Ok",error:"Error",saving:"Connecting..."}},function(t,e,n){"use strict";function o(t,e,n){n=n||{};var o=n.storage,r=o?o.get("theme"):n.theme||"flat-default",i={getTheme:function(){return r},setTheme:function(e,n){for(var i=e.split("-"),a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var u=a[s].getAttribute("title");u&&(u===e||u===i[0]?(a[s].rel="stylesheet",a[s].disabled=!1):(a[s].rel="alternate stylesheet",a[s].disabled=!0),webix.skin.set(i[0])),webix.html.removeCss(document.body,"theme-"+r),webix.html.addCss(document.body,"theme-"+e)}r=e,o&&o.put("theme",e),n||t.refresh()}};t.setService("theme",i),i.setTheme(r,!0)}e.a=o},function(t,e,n){"use strict";function o(t,e,n){function o(t,e){t===i?(f.logout(),e.redirect=s):t===r||f.getStatus()||(e.redirect=r)}n=n||{};var r=n.login||"/login",i=n.logout||"/logout",a=n.afterLogin||t.config.start,s=n.afterLogout||"/login",u=n.ping||3e5,c=n.model,l=n.user,f={getUser:function(){return l},getStatus:function(t){return t?c.status().catch(function(){return null}).then(function(t){l=t}):null!==l},login:function(e,n){return c.login(e,n).then(function(e){if(l=e,!e)throw"Access denied";t.show(a)})},logout:function(){return l=null,c.logout()}};t.setService("user",f),t.attachEvent("app:guard",function(t,e,n){return void 0===l&&(n.confirm=f.getStatus(!0).then(function(e){return o(t,n)})),o(t,n)}),u&&setInterval(function(){return f.getStatus(!0)},u)}e.a=o}]);